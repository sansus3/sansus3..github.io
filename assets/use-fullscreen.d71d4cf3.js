import{aE as O,r as y,au as P,c as I,aF as K,aG as V,aH as R,aI as x,aJ as W,aK as S,aL as G,aM as $,aN as J,aO as F,aP as Q,aQ as U,aR as z,k as b,aS as X,a as Y,o as Z,aT as C,g as _}from"./index.42606acb.js";import{u as ee}from"./notify.hook.52a25033.js";const ne=O("experiences",()=>{const n=y([]),c=y({}),s=y(!1),a=y(null),{error:l}=ee(),f=P(),p=async()=>{if(!D.value){s.value=!0;try{const e=await K(V(R(x,"workExperience"),W("dateEnd","desc")));if(e.docs.length)n.value=e.docs.map(t=>t.data());else throw new Error("Ha surgido alg\xFAn tipo de error en la consulta. compruebe la colecci\xF3n, los documentos o los campos")}catch(e){a.value=S[e.code]||e.message,l(a.value)}finally{s.value=!1}}},r=async e=>{await G($(x,"workExperience",e));const t=n.value.findIndex(o=>o.idDoc===e);t>-1&&n.value.splice(t,1)},m=async e=>{const t=n.value.find(o=>o.idDoc===e);c.value=t||await v(e)},v=async e=>{const t=$(x,"workExperience",e),o=await J(t);return o.exists()?o.data():{}},u=async e=>{const t=new Date(e.dateStart),o=new Date(e.dateEnd);try{s.value=!0;const i=$(R(x,"workExperience")),w={idDoc:i.id,createdAt:Date.now(),...e,dateStart:F.fromDate(t),dateEnd:F.fromDate(o)};await Q(i,w),n.value.push(w),f.push({name:"WorkExperienceAdmin"})}catch(i){a.value=S[i.code]||i.message,l(a.value)}finally{s.value=!1}},d=async(e,t)=>{let{code:o,title:i,jobTitle:w,province:B,place:H,comments:N,dateStart:T,dateEnd:j,is_certificado_profesionalidad:q}=t;const h={code:o,title:i,jobTitle:w,province:B,place:H,comments:N,dateStart:T,dateEnd:j,is_certificado_profesionalidad:q},A=new Date(h.dateStart);t.dateStart=h.dateStart=F.fromDate(A);const L=new Date(t.dateEnd);t.dateEnd=h.dateEnd=F.fromDate(L);try{s.value=!0,await U($(x,"workExperience",e),h)}catch(g){a.value=S[g.code]||g.message,l(a.value)}finally{s.value=!1}const k=n.value.findIndex(g=>g.idDoc===e);k>-1&&(n.value[k]=t)},M=I(()=>Object.keys(c.value).length!==0),D=I(()=>n.value.length>0);return{experiences:n,experience:c,isExperience:M,loading:s,error:a,isExperiences:D,setExperiencesFromCloud:p,setExperience:m,addExperience:u,updateExperience:d,deleteExperience:r}});let E=0;const se={fullscreen:Boolean,noRouteFullscreenExit:Boolean},re=["update:fullscreen","fullscreen"];function oe(){const n=_(),{props:c,emit:s,proxy:a}=n;let l,f,p;const r=y(!1);z(n)===!0&&b(()=>a.$route.fullPath,()=>{c.noRouteFullscreenExit!==!0&&u()}),b(()=>c.fullscreen,d=>{r.value!==d&&m()}),b(r,d=>{s("update:fullscreen",d),s("fullscreen",d)});function m(){r.value===!0?u():v()}function v(){r.value!==!0&&(r.value=!0,p=a.$el.parentNode,p.replaceChild(f,a.$el),document.body.appendChild(a.$el),E++,E===1&&document.body.classList.add("q-body--fullscreen-mixin"),l={handler:u},C.add(l))}function u(){r.value===!0&&(l!==void 0&&(C.remove(l),l=void 0),p.replaceChild(a.$el,f),r.value=!1,E=Math.max(0,E-1),E===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),a.$el.scrollIntoView!==void 0&&setTimeout(()=>{a.$el.scrollIntoView()})))}return X(()=>{f=document.createElement("span")}),Y(()=>{c.fullscreen===!0&&v()}),Z(u),Object.assign(a,{toggleFullscreen:m,setFullscreen:v,exitFullscreen:u}),{inFullscreen:r,toggleFullscreen:m}}export{se as a,re as b,oe as c,ne as u};
