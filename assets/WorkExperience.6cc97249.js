import{Q as L}from"./QPage.d0363454.js";import{h as w,f as q,c as Q,v as C,g as I,a2 as R,a3 as H,_ as U,E as b,L as D,I as e,G as o,H as n,M as O,bl as W,B as M,r as k,F as E,S as h,Q as K,av as T,be as G,aB as J,O as _,a1 as f,J as S,bn as $,az as X,aA as B,bo as Z,bp as ee,w as te,b9 as ae,D as oe}from"./index.42606acb.js";import{u as F}from"./use-fullscreen.d71d4cf3.js";import{b as le,a as ne}from"./QTable.c4bdfd0f.js";import{a as ie,Q as V}from"./QList.272928c8.js";import{Q as se,a as z}from"./selection.96396454.js";import{C as re}from"./ClosePopup.2b50205f.js";import{u as de}from"./notify.hook.52a25033.js";import"./rtl.4b414a6d.js";import"./QMenu.a843bec7.js";function ce(t){const l=document.createElement("textarea");l.value=t,l.contentEditable="true",l.style.position="fixed",document.body.appendChild(l),l.focus(),l.select();const i=document.execCommand("copy");return l.remove(),i}function ue(t){return navigator.clipboard!==void 0?navigator.clipboard.writeText(t):new Promise((l,i)=>{const c=ce(t);c?l(!0):i(c)})}const me=w("div",{class:"q-space"});var pe=q({name:"QSpace",setup(){return()=>me}}),x=q({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(t,{slots:l}){const i=I(),c=Q(()=>"q-td"+(t.autoWidth===!0?" q-table--col-auto-width":"")+(t.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(t.props===void 0)return w("td",{class:c.value},C(l.default));const m=i.vnode.key,p=(t.props.colsMap!==void 0?t.props.colsMap[m]:null)||t.props.col;if(p===void 0)return;const{row:r}=t.props;return w("td",{class:c.value+p.__tdClass(r),style:p.__tdStyle(r)},C(l.default))}}}),fe=q({name:"QTr",props:{props:Object,noHover:Boolean},setup(t,{slots:l}){const i=Q(()=>"q-tr"+(t.props===void 0||t.props.header===!0?"":" "+t.props.__trClass)+(t.noHover===!0?" q-tr--no-hover":""));return()=>w("tr",{class:i.value},C(l.default))}});const ve=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],xe=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var d=q({name:"QSkeleton",props:{...R,tag:{type:String,default:"div"},type:{type:String,validator:t=>ve.includes(t),default:"rect"},animation:{type:String,validator:t=>xe.includes(t),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(t,{slots:l}){const i=I(),c=H(t,i.proxy.$q),m=Q(()=>{const r=t.size!==void 0?[t.size,t.size]:[t.width,t.height];return{"--q-skeleton-speed":`${t.animationSpeed}ms`,width:r[0],height:r[1]}}),p=Q(()=>`q-skeleton q-skeleton--${c.value===!0?"dark":"light"} q-skeleton--type-${t.type}`+(t.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${t.animation}`:"")+(t.square===!0?" q-skeleton--square":"")+(t.bordered===!0?" q-skeleton--bordered":""));return()=>w(t.tag,{class:p.value,style:m.value},C(l.default))}});const _e={},be={class:"q-pa-md"},he={class:"text-left",style:{width:"150px"}},ye={class:"text-right"},ge={class:"text-right"},ke={class:"text-right"},we={class:"text-right"},Qe={class:"text-right"},Ce={class:"text-left"},De={class:"text-right"},Se={class:"text-right"},qe={class:"text-right"},Ee={class:"text-right"},Te={class:"text-right"};function $e(t,l){return b(),D("div",be,[e(le,null,{default:o(()=>[n("thead",null,[n("tr",null,[n("th",he,[e(d,{animation:"blink",type:"text"})]),n("th",ye,[e(d,{animation:"blink",type:"text"})]),n("th",ge,[e(d,{animation:"blink",type:"text"})]),n("th",ke,[e(d,{animation:"blink",type:"text"})]),n("th",we,[e(d,{animation:"blink",type:"text"})]),n("th",Qe,[e(d,{animation:"blink",type:"text"})])])]),n("tbody",null,[(b(),D(O,null,W(5,i=>n("tr",{key:i},[n("td",Ce,[e(d,{animation:"blink",type:"text",width:"85px"})]),n("td",De,[e(d,{animation:"blink",type:"text",width:"50px"})]),n("td",Se,[e(d,{animation:"blink",type:"text",width:"35px"})]),n("td",qe,[e(d,{animation:"blink",type:"text",width:"65px"})]),n("td",Ee,[e(d,{animation:"blink",type:"text",width:"25px"})]),n("td",Te,[e(d,{animation:"blink",type:"text",width:"85px"})])])),64))])]),_:1})])}var Be=U(_e,[["render",$e]]);const Ve={class:"q-pa-md"},ze={key:0},Ie={class:"text-subtitle1"},Me={class:"text-subtitle2"},Fe=_("Para eliminar repita el c\xF3digo que viene a continuaci\xF3n"),Ne={class:"text-weight-medium"},Ye={class:"text-grey-8 q-gutter-xs"},Pe=M({__name:"ExperiencesTableBackend",props:{experiences:null,loading:{type:Boolean}},setup(t){const{deleteExperience:l}=F(),{error:i,ok:c}=de(),m=k([]),p=k(""),r=k(!1),y=k(""),v=k({}),N=[{name:"options",align:"center",label:"Opciones",field:"option",sortable:!1},{name:"code",align:"left",label:"C\xF3digo",field:"code",sortable:!0},{name:"title",required:!0,label:"T\xEDtulo",align:"left",field:"title",sortable:!0},{name:"jobTitle",align:"center",label:"Cargo",field:"jobTitle",sortable:!0},{name:"dateStart",label:"Comienzo",field:u=>u.dateStart.seconds,sortable:!0},{name:"dateEnd",label:"Finalizaci\xF3n",field:u=>u.dateEnd.seconds,sortable:!0},{name:"place",label:"Lugar",field:"place"},{name:"province",label:"Provincia",field:"province",sortable:!0}],Y=(u,s,a)=>`${a} registros`,P=async u=>{v.value=u,r.value=!0},j=async()=>{try{if(v.value.idDoc!==y.value)throw new Error(`Claves no coincidendes. (${v.value.idDoc}!=${y.value})`);await l(v.value.idDoc),r.value=!1,c("Experiencia eliminada de forma correcta")}catch(u){i(u.message)}finally{y.value=""}},A=async()=>{try{if(v.value.idDoc!==void 0)await ue(v.value.idDoc);else throw new Error("idDoc es undefined")}catch(u){i(u.message)}};return(u,s)=>(b(),D("div",Ve,[t.loading?(b(),E(Be,{key:0})):(b(),E(ne,{key:1,title:"Experiencia laboral",rows:t.experiences,"rows-per-page-options":[0],"pagination-label":Y,columns:N,"row-key":"title",selection:"multiple",selected:m.value,"onUpdate:selected":s[2]||(s[2]=a=>m.value=a),filter:p.value},{top:o(()=>[e(h,{color:"primary",label:"Nueva Experiencia",to:{name:"NewExperience"}}),e(pe),e(T,{borderless:"",dense:"",debounce:"300",outlined:"",color:"primary",modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=a=>p.value=a)},{append:o(()=>[e(K,{name:"search"})]),_:1},8,["modelValue"])]),body:o(a=>[e(fe,{props:a},{default:o(()=>[e(x,null,{default:o(()=>[e(G,{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=g=>m.value=g),val:a.row},null,8,["modelValue","val"])]),_:2},1024),e(x,null,{default:o(()=>[e(h,{to:{name:"EditExperience",params:{idDoc:a.row.idDoc}},class:"q-mr-xs",color:"primary",size:"sm",label:"Modificar"},null,8,["to"]),e(h,{onClick:g=>P(a.row),color:"negative",size:"sm",label:"Eliminar"},null,8,["onClick"])]),_:2},1024),e(x,{key:"code",props:a},{default:o(()=>{var g;return[(g=a.row)!=null&&g.is_certificado_profesionalidad?(b(),D("span",ze," \xAE ")):J("",!0),_(f(a.row.code),1)]}),_:2},1032,["props"]),e(x,{key:"title",props:a},{default:o(()=>[_(f(a.row.title),1)]),_:2},1032,["props"]),e(x,{key:"jobTitle",props:a},{default:o(()=>[_(f(a.row.jobTitle),1)]),_:2},1032,["props"]),e(x,{key:"dateStart",props:a},{default:o(()=>[_(f(S($).formatDate(a.row.dateStart.toDate(),"DD-MM-YYYY")),1)]),_:2},1032,["props"]),e(x,{key:"dateEnd",props:a},{default:o(()=>[_(f(S($).formatDate(a.row.dateEnd.toDate(),"DD-MM-YYYY")),1)]),_:2},1032,["props"]),e(x,{key:"place",props:a},{default:o(()=>[_(f(a.row.place),1)]),_:2},1032,["props"]),e(x,{key:"province",props:a},{default:o(()=>[_(f(a.row.province),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selected","filter"])),e(ae,{modelValue:r.value,"onUpdate:modelValue":s[5]||(s[5]=a=>r.value=a),persistent:""},{default:o(()=>[e(X,{style:{"min-width":"350px"}},{default:o(()=>[e(B,null,{default:o(()=>[n("div",Ie,f(v.value.code),1),n("div",Me,f(v.value.title),1),n("div",null,[e(ie,{bordered:"",class:"rounded-borders",style:{"max-width":"600px"}},{default:o(()=>[e(V,{header:""},{default:o(()=>[Fe]),_:1}),e(se,null,{default:o(()=>[e(z,{top:""},{default:o(()=>[e(V,{lines:"1"},{default:o(()=>{var a;return[n("span",Ne,f((a=v.value)==null?void 0:a.idDoc),1)]}),_:1})]),_:1}),e(z,{top:"",side:""},{default:o(()=>[n("div",Ye,[e(h,{onClick:A,title:"Copiar al portapapeles",class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"content_copy"})])]),_:1})]),_:1})]),_:1})])]),_:1}),e(B,{class:"q-pt-none"},{default:o(()=>[e(T,{dense:"",modelValue:y.value,"onUpdate:modelValue":s[3]||(s[3]=a=>y.value=a),autofocus:"",onKeyup:s[4]||(s[4]=Z(a=>r.value=!1,["enter"]))},null,8,["modelValue"])]),_:1}),e(ee,{align:"right",class:"text-primary"},{default:o(()=>[te(e(h,{flat:"",label:"Cancelar"},null,512),[[re]]),e(h,{flat:"",label:"Aceptar",onClick:j})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Je=M({__name:"WorkExperience",setup(t){const l=F(),{setExperiencesFromCloud:i}=l;i();const{experiences:c,loading:m}=oe(l);return(p,r)=>(b(),E(L,{padding:""},{default:o(()=>[e(Pe,{loading:S(m),experiences:S(c)},null,8,["loading","experiences"])]),_:1}))}});export{Je as default};
