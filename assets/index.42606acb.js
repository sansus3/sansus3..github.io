function bh(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const F_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",V_=bh(F_);function Up(t){return!!t||t===""}function _h(t){if(he(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=tt(r)?U_(r):_h(r);if(s)for(const i in s)e[i]=s[i]}return e}else{if(tt(t))return t;if(Ve(t))return t}}const B_=/;(?![^(]*\))/g,$_=/:(.+)/;function U_(t){const e={};return t.split(B_).forEach(n=>{if(n){const r=n.split($_);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ih(t){let e="";if(tt(t))e=t;else if(he(t))for(let n=0;n<t.length;n++){const r=Ih(t[n]);r&&(e+=r+" ")}else if(Ve(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const uL=t=>tt(t)?t:t==null?"":he(t)||Ve(t)&&(t.toString===zp||!be(t.toString))?JSON.stringify(t,qp,2):String(t),qp=(t,e)=>e&&e.__v_isRef?qp(t,e.value):Ns(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:jp(e)?{[`Set(${e.size})`]:[...e.values()]}:Ve(e)&&!he(e)&&!Kp(e)?String(e):e,Pe={},Ms=[],rn=()=>{},q_=()=>!1,j_=/^on[^a-z]/,Sl=t=>j_.test(t),Eh=t=>t.startsWith("onUpdate:"),st=Object.assign,Th=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},H_=Object.prototype.hasOwnProperty,Se=(t,e)=>H_.call(t,e),he=Array.isArray,Ns=t=>kl(t)==="[object Map]",jp=t=>kl(t)==="[object Set]",be=t=>typeof t=="function",tt=t=>typeof t=="string",Sh=t=>typeof t=="symbol",Ve=t=>t!==null&&typeof t=="object",Hp=t=>Ve(t)&&be(t.then)&&be(t.catch),zp=Object.prototype.toString,kl=t=>zp.call(t),z_=t=>kl(t).slice(8,-1),Kp=t=>kl(t)==="[object Object]",kh=t=>tt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,_a=bh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Cl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},K_=/-(\w)/g,Tn=Cl(t=>t.replace(K_,(e,n)=>n?n.toUpperCase():"")),G_=/\B([A-Z])/g,us=Cl(t=>t.replace(G_,"-$1").toLowerCase()),xl=Cl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Eu=Cl(t=>t?`on${xl(t)}`:""),Wi=(t,e)=>!Object.is(t,e),Tu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},qa=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Gp=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let df;const W_=()=>df||(df=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let fn;class Wp{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&fn&&(this.parent=fn,this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}run(e){if(this.active){const n=fn;try{return fn=this,e()}finally{fn=n}}}on(){fn=this}off(){fn=this.parent}stop(e){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function Yp(t){return new Wp(t)}function Y_(t,e=fn){e&&e.active&&e.effects.push(t)}const Ch=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Qp=t=>(t.w&dr)>0,Xp=t=>(t.n&dr)>0,Q_=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=dr},X_=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];Qp(s)&&!Xp(s)?s.delete(t):e[n++]=s,s.w&=~dr,s.n&=~dr}e.length=n}},cc=new WeakMap;let xi=0,dr=1;const hc=30;let Zt;const jr=Symbol(""),dc=Symbol("");class xh{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Y_(this,r)}run(){if(!this.active)return this.fn();let e=Zt,n=ar;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Zt,Zt=this,ar=!0,dr=1<<++xi,xi<=hc?Q_(this):ff(this),this.fn()}finally{xi<=hc&&X_(this),dr=1<<--xi,Zt=this.parent,ar=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Zt===this?this.deferStop=!0:this.active&&(ff(this),this.onStop&&this.onStop(),this.active=!1)}}function ff(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ar=!0;const Jp=[];function ni(){Jp.push(ar),ar=!1}function ri(){const t=Jp.pop();ar=t===void 0?!0:t}function Bt(t,e,n){if(ar&&Zt){let r=cc.get(t);r||cc.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Ch()),Zp(s)}}function Zp(t,e){let n=!1;xi<=hc?Xp(t)||(t.n|=dr,n=!Qp(t)):n=!t.has(Zt),n&&(t.add(Zt),Zt.deps.push(t))}function Bn(t,e,n,r,s,i){const o=cc.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&he(t))o.forEach((l,u)=>{(u==="length"||u>=r)&&a.push(l)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":he(t)?kh(n)&&a.push(o.get("length")):(a.push(o.get(jr)),Ns(t)&&a.push(o.get(dc)));break;case"delete":he(t)||(a.push(o.get(jr)),Ns(t)&&a.push(o.get(dc)));break;case"set":Ns(t)&&a.push(o.get(jr));break}if(a.length===1)a[0]&&fc(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);fc(Ch(l))}}function fc(t,e){const n=he(t)?t:[...t];for(const r of n)r.computed&&mf(r);for(const r of n)r.computed||mf(r)}function mf(t,e){(t!==Zt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const J_=bh("__proto__,__v_isRef,__isVue"),ev=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sh)),Z_=Ah(),eI=Ah(!1,!0),tI=Ah(!0),gf=nI();function nI(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=pe(this);for(let i=0,o=this.length;i<o;i++)Bt(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(pe)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){ni();const r=pe(this)[e].apply(this,n);return ri(),r}}),t}function Ah(t=!1,e=!1){return function(r,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?yI:iv:e?sv:rv).get(r))return r;const o=he(r);if(!t&&o&&Se(gf,s))return Reflect.get(gf,s,i);const a=Reflect.get(r,s,i);return(Sh(s)?ev.has(s):J_(s))||(t||Bt(r,"get",s),e)?a:je(a)?o&&kh(s)?a:a.value:Ve(a)?t?ov(a):yr(a):a}}const rI=tv(),sI=tv(!0);function tv(t=!1){return function(n,r,s,i){let o=n[r];if(qs(o)&&je(o)&&!je(s))return!1;if(!t&&(!ja(s)&&!qs(s)&&(o=pe(o),s=pe(s)),!he(n)&&je(o)&&!je(s)))return o.value=s,!0;const a=he(n)&&kh(r)?Number(r)<n.length:Se(n,r),l=Reflect.set(n,r,s,i);return n===pe(i)&&(a?Wi(s,o)&&Bn(n,"set",r,s):Bn(n,"add",r,s)),l}}function iI(t,e){const n=Se(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&Bn(t,"delete",e,void 0),r}function oI(t,e){const n=Reflect.has(t,e);return(!Sh(e)||!ev.has(e))&&Bt(t,"has",e),n}function aI(t){return Bt(t,"iterate",he(t)?"length":jr),Reflect.ownKeys(t)}const nv={get:Z_,set:rI,deleteProperty:iI,has:oI,ownKeys:aI},lI={get:tI,set(t,e){return!0},deleteProperty(t,e){return!0}},uI=st({},nv,{get:eI,set:sI}),Dh=t=>t,Al=t=>Reflect.getPrototypeOf(t);function Yo(t,e,n=!1,r=!1){t=t.__v_raw;const s=pe(t),i=pe(e);n||(e!==i&&Bt(s,"get",e),Bt(s,"get",i));const{has:o}=Al(s),a=r?Dh:n?Mh:Yi;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function Qo(t,e=!1){const n=this.__v_raw,r=pe(n),s=pe(t);return e||(t!==s&&Bt(r,"has",t),Bt(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Xo(t,e=!1){return t=t.__v_raw,!e&&Bt(pe(t),"iterate",jr),Reflect.get(t,"size",t)}function pf(t){t=pe(t);const e=pe(this);return Al(e).has.call(e,t)||(e.add(t),Bn(e,"add",t,t)),this}function vf(t,e){e=pe(e);const n=pe(this),{has:r,get:s}=Al(n);let i=r.call(n,t);i||(t=pe(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?Wi(e,o)&&Bn(n,"set",t,e):Bn(n,"add",t,e),this}function yf(t){const e=pe(this),{has:n,get:r}=Al(e);let s=n.call(e,t);s||(t=pe(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&Bn(e,"delete",t,void 0),i}function wf(){const t=pe(this),e=t.size!==0,n=t.clear();return e&&Bn(t,"clear",void 0,void 0),n}function Jo(t,e){return function(r,s){const i=this,o=i.__v_raw,a=pe(o),l=e?Dh:t?Mh:Yi;return!t&&Bt(a,"iterate",jr),o.forEach((u,c)=>r.call(s,l(u),l(c),i))}}function Zo(t,e,n){return function(...r){const s=this.__v_raw,i=pe(s),o=Ns(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),c=n?Dh:e?Mh:Yi;return!e&&Bt(i,"iterate",l?dc:jr),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function Kn(t){return function(...e){return t==="delete"?!1:this}}function cI(){const t={get(i){return Yo(this,i)},get size(){return Xo(this)},has:Qo,add:pf,set:vf,delete:yf,clear:wf,forEach:Jo(!1,!1)},e={get(i){return Yo(this,i,!1,!0)},get size(){return Xo(this)},has:Qo,add:pf,set:vf,delete:yf,clear:wf,forEach:Jo(!1,!0)},n={get(i){return Yo(this,i,!0)},get size(){return Xo(this,!0)},has(i){return Qo.call(this,i,!0)},add:Kn("add"),set:Kn("set"),delete:Kn("delete"),clear:Kn("clear"),forEach:Jo(!0,!1)},r={get(i){return Yo(this,i,!0,!0)},get size(){return Xo(this,!0)},has(i){return Qo.call(this,i,!0)},add:Kn("add"),set:Kn("set"),delete:Kn("delete"),clear:Kn("clear"),forEach:Jo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Zo(i,!1,!1),n[i]=Zo(i,!0,!1),e[i]=Zo(i,!1,!0),r[i]=Zo(i,!0,!0)}),[t,n,e,r]}const[hI,dI,fI,mI]=cI();function Rh(t,e){const n=e?t?mI:fI:t?dI:hI;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Se(n,s)&&s in r?n:r,s,i)}const gI={get:Rh(!1,!1)},pI={get:Rh(!1,!0)},vI={get:Rh(!0,!1)},rv=new WeakMap,sv=new WeakMap,iv=new WeakMap,yI=new WeakMap;function wI(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bI(t){return t.__v_skip||!Object.isExtensible(t)?0:wI(z_(t))}function yr(t){return qs(t)?t:Oh(t,!1,nv,gI,rv)}function _I(t){return Oh(t,!1,uI,pI,sv)}function ov(t){return Oh(t,!0,lI,vI,iv)}function Oh(t,e,n,r,s){if(!Ve(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=bI(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function Vn(t){return qs(t)?Vn(t.__v_raw):!!(t&&t.__v_isReactive)}function qs(t){return!!(t&&t.__v_isReadonly)}function ja(t){return!!(t&&t.__v_isShallow)}function av(t){return Vn(t)||qs(t)}function pe(t){const e=t&&t.__v_raw;return e?pe(e):t}function Sn(t){return qa(t,"__v_skip",!0),t}const Yi=t=>Ve(t)?yr(t):t,Mh=t=>Ve(t)?ov(t):t;function lv(t){ar&&Zt&&(t=pe(t),Zp(t.dep||(t.dep=Ch())))}function uv(t,e){t=pe(t),t.dep&&fc(t.dep)}function je(t){return!!(t&&t.__v_isRef===!0)}function ke(t){return cv(t,!1)}function II(t){return cv(t,!0)}function cv(t,e){return je(t)?t:new EI(t,e)}class EI{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:pe(e),this._value=n?e:Yi(e)}get value(){return lv(this),this._value}set value(e){const n=this.__v_isShallow||ja(e)||qs(e);e=n?e:pe(e),Wi(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Yi(e),uv(this))}}function Ps(t){return je(t)?t.value:t}const TI={get:(t,e,n)=>Ps(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return je(s)&&!je(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function hv(t){return Vn(t)?t:new Proxy(t,TI)}function SI(t){const e=he(t)?new Array(t.length):{};for(const n in t)e[n]=dv(t,n);return e}class kI{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function dv(t,e,n){const r=t[e];return je(r)?r:new kI(t,e,n)}var fv;class CI{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[fv]=!1,this._dirty=!0,this.effect=new xh(e,()=>{this._dirty||(this._dirty=!0,uv(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=pe(this);return lv(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}fv="__v_isReadonly";function xI(t,e,n=!1){let r,s;const i=be(t);return i?(r=t,s=rn):(r=t.get,s=t.set),new CI(r,s,i||!s,n)}function lr(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){Dl(i,e,n)}return s}function Gt(t,e,n,r){if(be(t)){const i=lr(t,e,n,r);return i&&Hp(i)&&i.catch(o=>{Dl(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(Gt(t[i],e,n,r));return s}function Dl(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const u=i.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){lr(l,null,10,[t,o,a]);return}}AI(t,n,s,r)}function AI(t,e,n,r=!0){console.error(t)}let Ha=!1,mc=!1;const pt=[];let vn=0;const Ls=[];let On=null,Rr=0;const mv=Promise.resolve();let Nh=null;function vt(t){const e=Nh||mv;return t?e.then(this?t.bind(this):t):e}function DI(t){let e=vn+1,n=pt.length;for(;e<n;){const r=e+n>>>1;Qi(pt[r])<t?e=r+1:n=r}return e}function Ph(t){(!pt.length||!pt.includes(t,Ha&&t.allowRecurse?vn+1:vn))&&(t.id==null?pt.push(t):pt.splice(DI(t.id),0,t),gv())}function gv(){!Ha&&!mc&&(mc=!0,Nh=mv.then(vv))}function RI(t){const e=pt.indexOf(t);e>vn&&pt.splice(e,1)}function OI(t){he(t)?Ls.push(...t):(!On||!On.includes(t,t.allowRecurse?Rr+1:Rr))&&Ls.push(t),gv()}function bf(t,e=vn){for(;e<pt.length;e++){const n=pt[e];n&&n.pre&&(pt.splice(e,1),e--,n())}}function pv(t){if(Ls.length){const e=[...new Set(Ls)];if(Ls.length=0,On){On.push(...e);return}for(On=e,On.sort((n,r)=>Qi(n)-Qi(r)),Rr=0;Rr<On.length;Rr++)On[Rr]();On=null,Rr=0}}const Qi=t=>t.id==null?1/0:t.id,MI=(t,e)=>{const n=Qi(t)-Qi(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function vv(t){mc=!1,Ha=!0,pt.sort(MI);const e=rn;try{for(vn=0;vn<pt.length;vn++){const n=pt[vn];n&&n.active!==!1&&lr(n,null,14)}}finally{vn=0,pt.length=0,pv(),Ha=!1,Nh=null,(pt.length||Ls.length)&&vv()}}function NI(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Pe;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[c]||Pe;d&&(s=n.map(f=>f.trim())),h&&(s=n.map(Gp))}let a,l=r[a=Eu(e)]||r[a=Eu(Tn(e))];!l&&i&&(l=r[a=Eu(us(e))]),l&&Gt(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Gt(u,t,6,s)}}function yv(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!be(t)){const l=u=>{const c=yv(u,e,!0);c&&(a=!0,st(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Ve(t)&&r.set(t,null),null):(he(i)?i.forEach(l=>o[l]=null):st(o,i),Ve(t)&&r.set(t,o),o)}function Rl(t,e){return!t||!Sl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Se(t,e[0].toLowerCase()+e.slice(1))||Se(t,us(e))||Se(t,e))}let zt=null,wv=null;function za(t){const e=zt;return zt=t,wv=t&&t.type.__scopeId||null,e}function PI(t,e=zt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Of(-1);const i=za(e),o=t(...s);return za(i),r._d&&Of(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Su(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:h,data:d,setupState:f,ctx:m,inheritAttrs:b}=t;let p,w;const y=za(t);try{if(n.shapeFlag&4){const D=s||r;p=gn(c.call(D,D,h,i,f,d,m)),w=l}else{const D=e;p=gn(D.length>1?D(i,{attrs:l,slots:a,emit:u}):D(i,null)),w=e.props?l:LI(l)}}catch(D){Fi.length=0,Dl(D,t,1),p=kt(sn)}let _=p;if(w&&b!==!1){const D=Object.keys(w),{shapeFlag:M}=_;D.length&&M&7&&(o&&D.some(Eh)&&(w=FI(w,o)),_=fr(_,w))}return n.dirs&&(_=fr(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),p=_,za(y),p}const LI=t=>{let e;for(const n in t)(n==="class"||n==="style"||Sl(n))&&((e||(e={}))[n]=t[n]);return e},FI=(t,e)=>{const n={};for(const r in t)(!Eh(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function VI(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?_f(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==r[d]&&!Rl(u,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?_f(r,o,u):!0:!!o;return!1}function _f(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Rl(n,i))return!0}return!1}function BI({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const $I=t=>t.__isSuspense;function UI(t,e){e&&e.pendingBranch?he(t)?e.effects.push(...t):e.effects.push(t):OI(t)}function Ia(t,e){if(rt){let n=rt.provides;const r=rt.parent&&rt.parent.provides;r===n&&(n=rt.provides=Object.create(r)),n[t]=e}}function Wt(t,e,n=!1){const r=rt||zt;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&be(e)?e.call(r.proxy):e}}const If={};function Le(t,e,n){return bv(t,e,n)}function bv(t,e,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=Pe){const a=rt;let l,u=!1,c=!1;if(je(t)?(l=()=>t.value,u=ja(t)):Vn(t)?(l=()=>t,r=!0):he(t)?(c=!0,u=t.some(w=>Vn(w)||ja(w)),l=()=>t.map(w=>{if(je(w))return w.value;if(Vn(w))return Vr(w);if(be(w))return lr(w,a,2)})):be(t)?e?l=()=>lr(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),Gt(t,a,3,[d])}:l=rn,e&&r){const w=l;l=()=>Vr(w())}let h,d=w=>{h=p.onStop=()=>{lr(w,a,4)}};if(eo)return d=rn,e?n&&Gt(e,a,3,[l(),c?[]:void 0,d]):l(),rn;let f=c?[]:If;const m=()=>{if(!!p.active)if(e){const w=p.run();(r||u||(c?w.some((y,_)=>Wi(y,f[_])):Wi(w,f)))&&(h&&h(),Gt(e,a,3,[w,f===If?void 0:f,d]),f=w)}else p.run()};m.allowRecurse=!!e;let b;s==="sync"?b=m:s==="post"?b=()=>Dt(m,a&&a.suspense):(m.pre=!0,a&&(m.id=a.uid),b=()=>Ph(m));const p=new xh(l,b);return e?n?m():f=p.run():s==="post"?Dt(p.run.bind(p),a&&a.suspense):p.run(),()=>{p.stop(),a&&a.scope&&Th(a.scope.effects,p)}}function qI(t,e,n){const r=this.proxy,s=tt(t)?t.includes(".")?_v(r,t):()=>r[t]:t.bind(r,r);let i;be(e)?i=e:(i=e.handler,n=e);const o=rt;js(this);const a=bv(s,i.bind(r),n);return o?js(o):Hr(),a}function _v(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Vr(t,e){if(!Ve(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),je(t))Vr(t.value,e);else if(he(t))for(let n=0;n<t.length;n++)Vr(t[n],e);else if(jp(t)||Ns(t))t.forEach(n=>{Vr(n,e)});else if(Kp(t))for(const n in t)Vr(t[n],e);return t}function Iv(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return So(()=>{t.isMounted=!0}),cn(()=>{t.isUnmounting=!0}),t}const qt=[Function,Array],jI={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:qt,onEnter:qt,onAfterEnter:qt,onEnterCancelled:qt,onBeforeLeave:qt,onLeave:qt,onAfterLeave:qt,onLeaveCancelled:qt,onBeforeAppear:qt,onAppear:qt,onAfterAppear:qt,onAppearCancelled:qt},setup(t,{slots:e}){const n=Ge(),r=Iv();let s;return()=>{const i=e.default&&Lh(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const b of i)if(b.type!==sn){o=b;break}}const a=pe(t),{mode:l}=a;if(r.isLeaving)return ku(o);const u=Ef(o);if(!u)return ku(o);const c=Xi(u,a,r,n);Ji(u,c);const h=n.subTree,d=h&&Ef(h);let f=!1;const{getTransitionKey:m}=u.type;if(m){const b=m();s===void 0?s=b:b!==s&&(s=b,f=!0)}if(d&&d.type!==sn&&(!Or(u,d)||f)){const b=Xi(d,a,r,n);if(Ji(d,b),l==="out-in")return r.isLeaving=!0,b.afterLeave=()=>{r.isLeaving=!1,n.update()},ku(o);l==="in-out"&&u.type!==sn&&(b.delayLeave=(p,w,y)=>{const _=Tv(r,d);_[String(d.key)]=d,p._leaveCb=()=>{w(),p._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=y})}return o}}},Ev=jI;function Tv(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Xi(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:b,onAppear:p,onAfterAppear:w,onAppearCancelled:y}=e,_=String(t.key),D=Tv(n,t),M=(S,O)=>{S&&Gt(S,r,9,O)},I=(S,O)=>{const F=O[1];M(S,O),he(S)?S.every(B=>B.length<=1)&&F():S.length<=1&&F()},E={mode:i,persisted:o,beforeEnter(S){let O=a;if(!n.isMounted)if(s)O=b||a;else return;S._leaveCb&&S._leaveCb(!0);const F=D[_];F&&Or(t,F)&&F.el._leaveCb&&F.el._leaveCb(),M(O,[S])},enter(S){let O=l,F=u,B=c;if(!n.isMounted)if(s)O=p||l,F=w||u,B=y||c;else return;let C=!1;const H=S._enterCb=W=>{C||(C=!0,W?M(B,[S]):M(F,[S]),E.delayedLeave&&E.delayedLeave(),S._enterCb=void 0)};O?I(O,[S,H]):H()},leave(S,O){const F=String(t.key);if(S._enterCb&&S._enterCb(!0),n.isUnmounting)return O();M(h,[S]);let B=!1;const C=S._leaveCb=H=>{B||(B=!0,O(),H?M(m,[S]):M(f,[S]),S._leaveCb=void 0,D[F]===t&&delete D[F])};D[F]=t,d?I(d,[S,C]):C()},clone(S){return Xi(S,e,n,r)}};return E}function ku(t){if(Ol(t))return t=fr(t),t.children=null,t}function Ef(t){return Ol(t)?t.children?t.children[0]:void 0:t}function Ji(t,e){t.shapeFlag&6&&t.component?Ji(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Lh(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Jt?(o.patchFlag&128&&s++,r=r.concat(Lh(o.children,e,a))):(e||o.type!==sn)&&r.push(a!=null?fr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Fh(t){return be(t)?{setup:t,name:t.name}:t}const Ea=t=>!!t.type.__asyncLoader,Ol=t=>t.type.__isKeepAlive;function Sv(t,e){Cv(t,"a",e)}function kv(t,e){Cv(t,"da",e)}function Cv(t,e,n=rt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Ml(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Ol(s.parent.vnode)&&HI(r,e,n,s),s=s.parent}}function HI(t,e,n,r){const s=Ml(e,t,r,!0);Nl(()=>{Th(r[e],s)},n)}function Ml(t,e,n=rt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;ni(),js(n);const a=Gt(e,n,t,o);return Hr(),ri(),a});return r?s.unshift(i):s.push(i),i}}const Hn=t=>(e,n=rt)=>(!eo||t==="sp")&&Ml(t,e,n),zI=Hn("bm"),So=Hn("m"),xv=Hn("bu"),Av=Hn("u"),cn=Hn("bum"),Nl=Hn("um"),KI=Hn("sp"),GI=Hn("rtg"),WI=Hn("rtc");function YI(t,e=rt){Ml("ec",t,e)}function Dv(t,e){const n=zt;if(n===null)return t;const r=Ll(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,l,u=Pe]=e[i];be(o)&&(o={mounted:o,updated:o}),o.deep&&Vr(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u})}return t}function Er(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(ni(),Gt(l,n,8,[t.el,a,t,e]),ri())}}const Rv="components";function QI(t,e){return JI(Rv,t,!0,e)||t}const XI=Symbol();function JI(t,e,n=!0,r=!1){const s=zt||rt;if(s){const i=s.type;if(t===Rv){const a=RE(i,!1);if(a&&(a===e||a===Tn(e)||a===xl(Tn(e))))return i}const o=Tf(s[t]||i[t],e)||Tf(s.appContext[t],e);return!o&&r?i:o}}function Tf(t,e){return t&&(t[e]||t[Tn(e)]||t[xl(Tn(e))])}function cL(t,e,n,r){let s;const i=n&&n[r];if(he(t)||tt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(Ve(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];s[a]=e(t[u],u,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const gc=t=>t?zv(t)?Ll(t)||t.proxy:gc(t.parent):null,Ka=st(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>gc(t.parent),$root:t=>gc(t.root),$emit:t=>t.emit,$options:t=>Mv(t),$forceUpdate:t=>t.f||(t.f=()=>Ph(t.update)),$nextTick:t=>t.n||(t.n=vt.bind(t.proxy)),$watch:t=>qI.bind(t)}),ZI={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(r!==Pe&&Se(r,e))return o[e]=1,r[e];if(s!==Pe&&Se(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Se(u,e))return o[e]=3,i[e];if(n!==Pe&&Se(n,e))return o[e]=4,n[e];pc&&(o[e]=0)}}const c=Ka[e];let h,d;if(c)return e==="$attrs"&&Bt(t,"get",e),c(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Pe&&Se(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Se(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return s!==Pe&&Se(s,e)?(s[e]=n,!0):r!==Pe&&Se(r,e)?(r[e]=n,!0):Se(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Pe&&Se(t,o)||e!==Pe&&Se(e,o)||(a=i[0])&&Se(a,o)||Se(r,o)||Se(Ka,o)||Se(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Se(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let pc=!0;function eE(t){const e=Mv(t),n=t.proxy,r=t.ctx;pc=!1,e.beforeCreate&&Sf(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:f,updated:m,activated:b,deactivated:p,beforeDestroy:w,beforeUnmount:y,destroyed:_,unmounted:D,render:M,renderTracked:I,renderTriggered:E,errorCaptured:S,serverPrefetch:O,expose:F,inheritAttrs:B,components:C,directives:H,filters:W}=e;if(u&&tE(u,r,null,t.appContext.config.unwrapInjectedRef),o)for(const R in o){const X=o[R];be(X)&&(r[R]=X.bind(n))}if(s){const R=s.call(n,n);Ve(R)&&(t.data=yr(R))}if(pc=!0,i)for(const R in i){const X=i[R],q=be(X)?X.bind(n,n):be(X.get)?X.get.bind(n,n):rn,Ie=!be(X)&&be(X.set)?X.set.bind(n):rn,$e=x({get:q,set:Ie});Object.defineProperty(r,R,{enumerable:!0,configurable:!0,get:()=>$e.value,set:Ue=>$e.value=Ue})}if(a)for(const R in a)Ov(a[R],r,n,R);if(l){const R=be(l)?l.call(n):l;Reflect.ownKeys(R).forEach(X=>{Ia(X,R[X])})}c&&Sf(c,t,"c");function se(R,X){he(X)?X.forEach(q=>R(q.bind(n))):X&&R(X.bind(n))}if(se(zI,h),se(So,d),se(xv,f),se(Av,m),se(Sv,b),se(kv,p),se(YI,S),se(WI,I),se(GI,E),se(cn,y),se(Nl,D),se(KI,O),he(F))if(F.length){const R=t.exposed||(t.exposed={});F.forEach(X=>{Object.defineProperty(R,X,{get:()=>n[X],set:q=>n[X]=q})})}else t.exposed||(t.exposed={});M&&t.render===rn&&(t.render=M),B!=null&&(t.inheritAttrs=B),C&&(t.components=C),H&&(t.directives=H)}function tE(t,e,n=rn,r=!1){he(t)&&(t=vc(t));for(const s in t){const i=t[s];let o;Ve(i)?"default"in i?o=Wt(i.from||s,i.default,!0):o=Wt(i.from||s):o=Wt(i),je(o)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function Sf(t,e,n){Gt(he(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Ov(t,e,n,r){const s=r.includes(".")?_v(n,r):()=>n[r];if(tt(t)){const i=e[t];be(i)&&Le(s,i)}else if(be(t))Le(s,t.bind(n));else if(Ve(t))if(he(t))t.forEach(i=>Ov(i,e,n,r));else{const i=be(t.handler)?t.handler.bind(n):e[t.handler];be(i)&&Le(s,i,t)}}function Mv(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>Ga(l,u,o,!0)),Ga(l,e,o)),Ve(e)&&i.set(e,l),l}function Ga(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Ga(t,i,n,!0),s&&s.forEach(o=>Ga(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=nE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const nE={data:kf,props:xr,emits:xr,methods:xr,computed:xr,beforeCreate:_t,created:_t,beforeMount:_t,mounted:_t,beforeUpdate:_t,updated:_t,beforeDestroy:_t,beforeUnmount:_t,destroyed:_t,unmounted:_t,activated:_t,deactivated:_t,errorCaptured:_t,serverPrefetch:_t,components:xr,directives:xr,watch:sE,provide:kf,inject:rE};function kf(t,e){return e?t?function(){return st(be(t)?t.call(this,this):t,be(e)?e.call(this,this):e)}:e:t}function rE(t,e){return xr(vc(t),vc(e))}function vc(t){if(he(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function _t(t,e){return t?[...new Set([].concat(t,e))]:e}function xr(t,e){return t?st(st(Object.create(null),t),e):e}function sE(t,e){if(!t)return e;if(!e)return t;const n=st(Object.create(null),t);for(const r in e)n[r]=_t(t[r],e[r]);return n}function iE(t,e,n,r=!1){const s={},i={};qa(i,Pl,1),t.propsDefaults=Object.create(null),Nv(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:_I(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function oE(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=pe(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(Rl(t.emitsOptions,d))continue;const f=e[d];if(l)if(Se(i,d))f!==i[d]&&(i[d]=f,u=!0);else{const m=Tn(d);s[m]=yc(l,a,m,f,t,!1)}else f!==i[d]&&(i[d]=f,u=!0)}}}else{Nv(t,e,s,i)&&(u=!0);let c;for(const h in a)(!e||!Se(e,h)&&((c=us(h))===h||!Se(e,c)))&&(l?n&&(n[h]!==void 0||n[c]!==void 0)&&(s[h]=yc(l,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!Se(e,h)&&!0)&&(delete i[h],u=!0)}u&&Bn(t,"set","$attrs")}function Nv(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(_a(l))continue;const u=e[l];let c;s&&Se(s,c=Tn(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:Rl(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=pe(n),u=a||Pe;for(let c=0;c<i.length;c++){const h=i[c];n[h]=yc(s,l,h,u[h],t,!Se(u,h))}}return o}function yc(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Se(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&be(l)){const{propsDefaults:u}=s;n in u?r=u[n]:(js(s),r=u[n]=l.call(null,e),Hr())}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===us(n))&&(r=!0))}return r}function Pv(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!be(t)){const c=h=>{l=!0;const[d,f]=Pv(h,e,!0);st(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return Ve(t)&&r.set(t,Ms),Ms;if(he(i))for(let c=0;c<i.length;c++){const h=Tn(i[c]);Cf(h)&&(o[h]=Pe)}else if(i)for(const c in i){const h=Tn(c);if(Cf(h)){const d=i[c],f=o[h]=he(d)||be(d)?{type:d}:d;if(f){const m=Df(Boolean,f.type),b=Df(String,f.type);f[0]=m>-1,f[1]=b<0||m<b,(m>-1||Se(f,"default"))&&a.push(h)}}}const u=[o,a];return Ve(t)&&r.set(t,u),u}function Cf(t){return t[0]!=="$"}function xf(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Af(t,e){return xf(t)===xf(e)}function Df(t,e){return he(e)?e.findIndex(n=>Af(n,t)):be(e)&&Af(e,t)?0:-1}const Lv=t=>t[0]==="_"||t==="$stable",Vh=t=>he(t)?t.map(gn):[gn(t)],aE=(t,e,n)=>{if(e._n)return e;const r=PI((...s)=>Vh(e(...s)),n);return r._c=!1,r},Fv=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Lv(s))continue;const i=t[s];if(be(i))e[s]=aE(s,i,r);else if(i!=null){const o=Vh(i);e[s]=()=>o}}},Vv=(t,e)=>{const n=Vh(e);t.slots.default=()=>n},lE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=pe(e),qa(e,"_",n)):Fv(e,t.slots={})}else t.slots={},e&&Vv(t,e);qa(t.slots,Pl,1)},uE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Pe;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(st(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Fv(e,s)),o=e}else e&&(Vv(t,e),o={default:1});if(i)for(const a in s)!Lv(a)&&!(a in o)&&delete s[a]};function Bv(){return{app:null,config:{isNativeTag:q_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cE=0;function hE(t,e){return function(r,s=null){be(r)||(r=Object.assign({},r)),s!=null&&!Ve(s)&&(s=null);const i=Bv(),o=new Set;let a=!1;const l=i.app={_uid:cE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:ME,get config(){return i.config},set config(u){},use(u,...c){return o.has(u)||(u&&be(u.install)?(o.add(u),u.install(l,...c)):be(u)&&(o.add(u),u(l,...c))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,c){return c?(i.components[u]=c,l):i.components[u]},directive(u,c){return c?(i.directives[u]=c,l):i.directives[u]},mount(u,c,h){if(!a){const d=kt(r,s);return d.appContext=i,c&&e?e(d,u):t(d,u,h),a=!0,l._container=u,u.__vue_app__=l,Ll(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return i.provides[u]=c,l}};return l}}function wc(t,e,n,r,s=!1){if(he(t)){t.forEach((d,f)=>wc(d,e&&(he(e)?e[f]:e),n,r,s));return}if(Ea(r)&&!s)return;const i=r.shapeFlag&4?Ll(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,c=a.refs===Pe?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==l&&(tt(u)?(c[u]=null,Se(h,u)&&(h[u]=null)):je(u)&&(u.value=null)),be(l))lr(l,a,12,[o,c]);else{const d=tt(l),f=je(l);if(d||f){const m=()=>{if(t.f){const b=d?c[l]:l.value;s?he(b)&&Th(b,i):he(b)?b.includes(i)||b.push(i):d?(c[l]=[i],Se(h,l)&&(h[l]=c[l])):(l.value=[i],t.k&&(c[t.k]=l.value))}else d?(c[l]=o,Se(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(c[t.k]=o))};o?(m.id=-1,Dt(m,n)):m()}}}const Dt=UI;function dE(t){return fE(t)}function fE(t,e){const n=W_();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:f=rn,cloneNode:m,insertStaticContent:b}=t,p=(g,v,k,V=null,L=null,K=null,J=!1,z=null,Y=!!v.dynamicChildren)=>{if(g===v)return;g&&!Or(g,v)&&(V=ie(g),Ae(g,L,K,!0),g=null),v.patchFlag===-2&&(Y=!1,v.dynamicChildren=null);const{type:$,ref:ae,shapeFlag:re}=v;switch($){case $h:w(g,v,k,V);break;case sn:y(g,v,k,V);break;case Ta:g==null&&_(v,k,V,J);break;case Jt:H(g,v,k,V,L,K,J,z,Y);break;default:re&1?I(g,v,k,V,L,K,J,z,Y):re&6?W(g,v,k,V,L,K,J,z,Y):(re&64||re&128)&&$.process(g,v,k,V,L,K,J,z,Y,Ee)}ae!=null&&L&&wc(ae,g&&g.ref,K,v||g,!v)},w=(g,v,k,V)=>{if(g==null)r(v.el=a(v.children),k,V);else{const L=v.el=g.el;v.children!==g.children&&u(L,v.children)}},y=(g,v,k,V)=>{g==null?r(v.el=l(v.children||""),k,V):v.el=g.el},_=(g,v,k,V)=>{[g.el,g.anchor]=b(g.children,v,k,V,g.el,g.anchor)},D=({el:g,anchor:v},k,V)=>{let L;for(;g&&g!==v;)L=d(g),r(g,k,V),g=L;r(v,k,V)},M=({el:g,anchor:v})=>{let k;for(;g&&g!==v;)k=d(g),s(g),g=k;s(v)},I=(g,v,k,V,L,K,J,z,Y)=>{J=J||v.type==="svg",g==null?E(v,k,V,L,K,J,z,Y):F(g,v,L,K,J,z,Y)},E=(g,v,k,V,L,K,J,z)=>{let Y,$;const{type:ae,props:re,shapeFlag:le,transition:me,patchFlag:Ce,dirs:Me}=g;if(g.el&&m!==void 0&&Ce===-1)Y=g.el=m(g.el);else{if(Y=g.el=o(g.type,K,re&&re.is,re),le&8?c(Y,g.children):le&16&&O(g.children,Y,null,V,L,K&&ae!=="foreignObject",J,z),Me&&Er(g,null,V,"created"),re){for(const Fe in re)Fe!=="value"&&!_a(Fe)&&i(Y,Fe,null,re[Fe],K,g.children,V,L,G);"value"in re&&i(Y,"value",null,re.value),($=re.onVnodeBeforeMount)&&dn($,V,g)}S(Y,g,g.scopeId,J,V)}Me&&Er(g,null,V,"beforeMount");const Ne=(!L||L&&!L.pendingBranch)&&me&&!me.persisted;Ne&&me.beforeEnter(Y),r(Y,v,k),(($=re&&re.onVnodeMounted)||Ne||Me)&&Dt(()=>{$&&dn($,V,g),Ne&&me.enter(Y),Me&&Er(g,null,V,"mounted")},L)},S=(g,v,k,V,L)=>{if(k&&f(g,k),V)for(let K=0;K<V.length;K++)f(g,V[K]);if(L){let K=L.subTree;if(v===K){const J=L.vnode;S(g,J,J.scopeId,J.slotScopeIds,L.parent)}}},O=(g,v,k,V,L,K,J,z,Y=0)=>{for(let $=Y;$<g.length;$++){const ae=g[$]=z?Jn(g[$]):gn(g[$]);p(null,ae,v,k,V,L,K,J,z)}},F=(g,v,k,V,L,K,J)=>{const z=v.el=g.el;let{patchFlag:Y,dynamicChildren:$,dirs:ae}=v;Y|=g.patchFlag&16;const re=g.props||Pe,le=v.props||Pe;let me;k&&Tr(k,!1),(me=le.onVnodeBeforeUpdate)&&dn(me,k,v,g),ae&&Er(v,g,k,"beforeUpdate"),k&&Tr(k,!0);const Ce=L&&v.type!=="foreignObject";if($?B(g.dynamicChildren,$,z,k,V,Ce,K):J||q(g,v,z,null,k,V,Ce,K,!1),Y>0){if(Y&16)C(z,v,re,le,k,V,L);else if(Y&2&&re.class!==le.class&&i(z,"class",null,le.class,L),Y&4&&i(z,"style",re.style,le.style,L),Y&8){const Me=v.dynamicProps;for(let Ne=0;Ne<Me.length;Ne++){const Fe=Me[Ne],Yt=re[Fe],vs=le[Fe];(vs!==Yt||Fe==="value")&&i(z,Fe,Yt,vs,L,g.children,k,V,G)}}Y&1&&g.children!==v.children&&c(z,v.children)}else!J&&$==null&&C(z,v,re,le,k,V,L);((me=le.onVnodeUpdated)||ae)&&Dt(()=>{me&&dn(me,k,v,g),ae&&Er(v,g,k,"updated")},V)},B=(g,v,k,V,L,K,J)=>{for(let z=0;z<v.length;z++){const Y=g[z],$=v[z],ae=Y.el&&(Y.type===Jt||!Or(Y,$)||Y.shapeFlag&70)?h(Y.el):k;p(Y,$,ae,null,V,L,K,J,!0)}},C=(g,v,k,V,L,K,J)=>{if(k!==V){for(const z in V){if(_a(z))continue;const Y=V[z],$=k[z];Y!==$&&z!=="value"&&i(g,z,$,Y,J,v.children,L,K,G)}if(k!==Pe)for(const z in k)!_a(z)&&!(z in V)&&i(g,z,k[z],null,J,v.children,L,K,G);"value"in V&&i(g,"value",k.value,V.value)}},H=(g,v,k,V,L,K,J,z,Y)=>{const $=v.el=g?g.el:a(""),ae=v.anchor=g?g.anchor:a("");let{patchFlag:re,dynamicChildren:le,slotScopeIds:me}=v;me&&(z=z?z.concat(me):me),g==null?(r($,k,V),r(ae,k,V),O(v.children,k,ae,L,K,J,z,Y)):re>0&&re&64&&le&&g.dynamicChildren?(B(g.dynamicChildren,le,k,L,K,J,z),(v.key!=null||L&&v===L.subTree)&&Bh(g,v,!0)):q(g,v,k,ae,L,K,J,z,Y)},W=(g,v,k,V,L,K,J,z,Y)=>{v.slotScopeIds=z,g==null?v.shapeFlag&512?L.ctx.activate(v,k,V,J,Y):U(v,k,V,L,K,J,Y):se(g,v,Y)},U=(g,v,k,V,L,K,J)=>{const z=g.component=kE(g,V,L);if(Ol(g)&&(z.ctx.renderer=Ee),CE(z),z.asyncDep){if(L&&L.registerDep(z,R),!g.el){const Y=z.subTree=kt(sn);y(null,Y,v,k)}return}R(z,g,v,k,L,K,J)},se=(g,v,k)=>{const V=v.component=g.component;if(VI(g,v,k))if(V.asyncDep&&!V.asyncResolved){X(V,v,k);return}else V.next=v,RI(V.update),V.update();else v.el=g.el,V.vnode=v},R=(g,v,k,V,L,K,J)=>{const z=()=>{if(g.isMounted){let{next:ae,bu:re,u:le,parent:me,vnode:Ce}=g,Me=ae,Ne;Tr(g,!1),ae?(ae.el=Ce.el,X(g,ae,J)):ae=Ce,re&&Tu(re),(Ne=ae.props&&ae.props.onVnodeBeforeUpdate)&&dn(Ne,me,ae,Ce),Tr(g,!0);const Fe=Su(g),Yt=g.subTree;g.subTree=Fe,p(Yt,Fe,h(Yt.el),ie(Yt),g,L,K),ae.el=Fe.el,Me===null&&BI(g,Fe.el),le&&Dt(le,L),(Ne=ae.props&&ae.props.onVnodeUpdated)&&Dt(()=>dn(Ne,me,ae,Ce),L)}else{let ae;const{el:re,props:le}=v,{bm:me,m:Ce,parent:Me}=g,Ne=Ea(v);if(Tr(g,!1),me&&Tu(me),!Ne&&(ae=le&&le.onVnodeBeforeMount)&&dn(ae,Me,v),Tr(g,!0),re&&de){const Fe=()=>{g.subTree=Su(g),de(re,g.subTree,g,L,null)};Ne?v.type.__asyncLoader().then(()=>!g.isUnmounted&&Fe()):Fe()}else{const Fe=g.subTree=Su(g);p(null,Fe,k,V,g,L,K),v.el=Fe.el}if(Ce&&Dt(Ce,L),!Ne&&(ae=le&&le.onVnodeMounted)){const Fe=v;Dt(()=>dn(ae,Me,Fe),L)}(v.shapeFlag&256||Me&&Ea(Me.vnode)&&Me.vnode.shapeFlag&256)&&g.a&&Dt(g.a,L),g.isMounted=!0,v=k=V=null}},Y=g.effect=new xh(z,()=>Ph($),g.scope),$=g.update=()=>Y.run();$.id=g.uid,Tr(g,!0),$()},X=(g,v,k)=>{v.component=g;const V=g.vnode.props;g.vnode=v,g.next=null,oE(g,v.props,V,k),uE(g,v.children,k),ni(),bf(),ri()},q=(g,v,k,V,L,K,J,z,Y=!1)=>{const $=g&&g.children,ae=g?g.shapeFlag:0,re=v.children,{patchFlag:le,shapeFlag:me}=v;if(le>0){if(le&128){$e($,re,k,V,L,K,J,z,Y);return}else if(le&256){Ie($,re,k,V,L,K,J,z,Y);return}}me&8?(ae&16&&G($,L,K),re!==$&&c(k,re)):ae&16?me&16?$e($,re,k,V,L,K,J,z,Y):G($,L,K,!0):(ae&8&&c(k,""),me&16&&O(re,k,V,L,K,J,z,Y))},Ie=(g,v,k,V,L,K,J,z,Y)=>{g=g||Ms,v=v||Ms;const $=g.length,ae=v.length,re=Math.min($,ae);let le;for(le=0;le<re;le++){const me=v[le]=Y?Jn(v[le]):gn(v[le]);p(g[le],me,k,null,L,K,J,z,Y)}$>ae?G(g,L,K,!0,!1,re):O(v,k,V,L,K,J,z,Y,re)},$e=(g,v,k,V,L,K,J,z,Y)=>{let $=0;const ae=v.length;let re=g.length-1,le=ae-1;for(;$<=re&&$<=le;){const me=g[$],Ce=v[$]=Y?Jn(v[$]):gn(v[$]);if(Or(me,Ce))p(me,Ce,k,null,L,K,J,z,Y);else break;$++}for(;$<=re&&$<=le;){const me=g[re],Ce=v[le]=Y?Jn(v[le]):gn(v[le]);if(Or(me,Ce))p(me,Ce,k,null,L,K,J,z,Y);else break;re--,le--}if($>re){if($<=le){const me=le+1,Ce=me<ae?v[me].el:V;for(;$<=le;)p(null,v[$]=Y?Jn(v[$]):gn(v[$]),k,Ce,L,K,J,z,Y),$++}}else if($>le)for(;$<=re;)Ae(g[$],L,K,!0),$++;else{const me=$,Ce=$,Me=new Map;for($=Ce;$<=le;$++){const Pt=v[$]=Y?Jn(v[$]):gn(v[$]);Pt.key!=null&&Me.set(Pt.key,$)}let Ne,Fe=0;const Yt=le-Ce+1;let vs=!1,uf=0;const gi=new Array(Yt);for($=0;$<Yt;$++)gi[$]=0;for($=me;$<=re;$++){const Pt=g[$];if(Fe>=Yt){Ae(Pt,L,K,!0);continue}let hn;if(Pt.key!=null)hn=Me.get(Pt.key);else for(Ne=Ce;Ne<=le;Ne++)if(gi[Ne-Ce]===0&&Or(Pt,v[Ne])){hn=Ne;break}hn===void 0?Ae(Pt,L,K,!0):(gi[hn-Ce]=$+1,hn>=uf?uf=hn:vs=!0,p(Pt,v[hn],k,null,L,K,J,z,Y),Fe++)}const cf=vs?mE(gi):Ms;for(Ne=cf.length-1,$=Yt-1;$>=0;$--){const Pt=Ce+$,hn=v[Pt],hf=Pt+1<ae?v[Pt+1].el:V;gi[$]===0?p(null,hn,k,hf,L,K,J,z,Y):vs&&(Ne<0||$!==cf[Ne]?Ue(hn,k,hf,2):Ne--)}}},Ue=(g,v,k,V,L=null)=>{const{el:K,type:J,transition:z,children:Y,shapeFlag:$}=g;if($&6){Ue(g.component.subTree,v,k,V);return}if($&128){g.suspense.move(v,k,V);return}if($&64){J.move(g,v,k,Ee);return}if(J===Jt){r(K,v,k);for(let re=0;re<Y.length;re++)Ue(Y[re],v,k,V);r(g.anchor,v,k);return}if(J===Ta){D(g,v,k);return}if(V!==2&&$&1&&z)if(V===0)z.beforeEnter(K),r(K,v,k),Dt(()=>z.enter(K),L);else{const{leave:re,delayLeave:le,afterLeave:me}=z,Ce=()=>r(K,v,k),Me=()=>{re(K,()=>{Ce(),me&&me()})};le?le(K,Ce,Me):Me()}else r(K,v,k)},Ae=(g,v,k,V=!1,L=!1)=>{const{type:K,props:J,ref:z,children:Y,dynamicChildren:$,shapeFlag:ae,patchFlag:re,dirs:le}=g;if(z!=null&&wc(z,null,k,g,!0),ae&256){v.ctx.deactivate(g);return}const me=ae&1&&le,Ce=!Ea(g);let Me;if(Ce&&(Me=J&&J.onVnodeBeforeUnmount)&&dn(Me,v,g),ae&6)te(g.component,k,V);else{if(ae&128){g.suspense.unmount(k,V);return}me&&Er(g,null,v,"beforeUnmount"),ae&64?g.type.remove(g,v,k,L,Ee,V):$&&(K!==Jt||re>0&&re&64)?G($,v,k,!1,!0):(K===Jt&&re&384||!L&&ae&16)&&G(Y,v,k),V&&Nt(g)}(Ce&&(Me=J&&J.onVnodeUnmounted)||me)&&Dt(()=>{Me&&dn(Me,v,g),me&&Er(g,null,v,"unmounted")},k)},Nt=g=>{const{type:v,el:k,anchor:V,transition:L}=g;if(v===Jt){N(k,V);return}if(v===Ta){M(g);return}const K=()=>{s(k),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(g.shapeFlag&1&&L&&!L.persisted){const{leave:J,delayLeave:z}=L,Y=()=>J(k,K);z?z(g.el,K,Y):Y()}else K()},N=(g,v)=>{let k;for(;g!==v;)k=d(g),s(g),g=k;s(v)},te=(g,v,k)=>{const{bum:V,scope:L,update:K,subTree:J,um:z}=g;V&&Tu(V),L.stop(),K&&(K.active=!1,Ae(J,g,v,k)),z&&Dt(z,v),Dt(()=>{g.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},G=(g,v,k,V=!1,L=!1,K=0)=>{for(let J=K;J<g.length;J++)Ae(g[J],v,k,V,L)},ie=g=>g.shapeFlag&6?ie(g.component.subTree):g.shapeFlag&128?g.suspense.next():d(g.anchor||g.el),ne=(g,v,k)=>{g==null?v._vnode&&Ae(v._vnode,null,null,!0):p(v._vnode||null,g,v,null,null,null,k),bf(),pv(),v._vnode=g},Ee={p,um:Ae,m:Ue,r:Nt,mt:U,mc:O,pc:q,pbc:B,n:ie,o:t};let ye,de;return e&&([ye,de]=e(Ee)),{render:ne,hydrate:ye,createApp:hE(ne,ye)}}function Tr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Bh(t,e,n=!1){const r=t.children,s=e.children;if(he(r)&&he(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Jn(s[i]),a.el=o.el),n||Bh(o,a))}}function mE(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const gE=t=>t.__isTeleport,Li=t=>t&&(t.disabled||t.disabled===""),Rf=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,bc=(t,e)=>{const n=t&&t.to;return tt(n)?e?e(n):null:n},pE={__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,u){const{mc:c,pc:h,pbc:d,o:{insert:f,querySelector:m,createText:b,createComment:p}}=u,w=Li(e.props);let{shapeFlag:y,children:_,dynamicChildren:D}=e;if(t==null){const M=e.el=b(""),I=e.anchor=b("");f(M,n,r),f(I,n,r);const E=e.target=bc(e.props,m),S=e.targetAnchor=b("");E&&(f(S,E),o=o||Rf(E));const O=(F,B)=>{y&16&&c(_,F,B,s,i,o,a,l)};w?O(n,I):E&&O(E,S)}else{e.el=t.el;const M=e.anchor=t.anchor,I=e.target=t.target,E=e.targetAnchor=t.targetAnchor,S=Li(t.props),O=S?n:I,F=S?M:E;if(o=o||Rf(I),D?(d(t.dynamicChildren,D,O,s,i,o,a),Bh(t,e,!0)):l||h(t,e,O,F,s,i,o,a,!1),w)S||ea(e,n,M,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const B=e.target=bc(e.props,m);B&&ea(e,B,null,u,0)}else S&&ea(e,I,E,u,1)}},remove(t,e,n,r,{um:s,o:{remove:i}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:h,props:d}=t;if(h&&i(c),(o||!Li(d))&&(i(u),a&16))for(let f=0;f<l.length;f++){const m=l[f];s(m,e,n,!0,!!m.dynamicChildren)}},move:ea,hydrate:vE};function ea(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,h=i===2;if(h&&r(o,e,n),(!h||Li(c))&&l&16)for(let d=0;d<u.length;d++)s(u[d],e,n,2);h&&r(a,e,n)}function vE(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const c=e.target=bc(e.props,l);if(c){const h=c._lpa||c.firstChild;if(e.shapeFlag&16)if(Li(e.props))e.anchor=u(o(t),e,a(t),n,r,s,i),e.targetAnchor=h;else{e.anchor=o(t);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,c._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(h,e,c,n,r,s,i)}}return e.anchor&&o(e.anchor)}const yE=pE,Jt=Symbol(void 0),$h=Symbol(void 0),sn=Symbol(void 0),Ta=Symbol(void 0),Fi=[];let en=null;function $v(t=!1){Fi.push(en=t?null:[])}function wE(){Fi.pop(),en=Fi[Fi.length-1]||null}let Zi=1;function Of(t){Zi+=t}function Uv(t){return t.dynamicChildren=Zi>0?en||Ms:null,wE(),Zi>0&&en&&en.push(t),t}function hL(t,e,n,r,s,i){return Uv(Hv(t,e,n,r,s,i,!0))}function qv(t,e,n,r,s){return Uv(kt(t,e,n,r,s,!0))}function _c(t){return t?t.__v_isVNode===!0:!1}function Or(t,e){return t.type===e.type&&t.key===e.key}const Pl="__vInternal",jv=({key:t})=>t!=null?t:null,Sa=({ref:t,ref_key:e,ref_for:n})=>t!=null?tt(t)||je(t)||be(t)?{i:zt,r:t,k:e,f:!!n}:t:null;function Hv(t,e=null,n=null,r=0,s=null,i=t===Jt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&jv(e),ref:e&&Sa(e),scopeId:wv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(Uh(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=tt(n)?8:16),Zi>0&&!o&&en&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&en.push(l),l}const kt=bE;function bE(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===XI)&&(t=sn),_c(t)){const a=fr(t,e,!0);return n&&Uh(a,n),Zi>0&&!i&&en&&(a.shapeFlag&6?en[en.indexOf(t)]=a:en.push(a)),a.patchFlag|=-2,a}if(OE(t)&&(t=t.__vccOpts),e){e=_E(e);let{class:a,style:l}=e;a&&!tt(a)&&(e.class=Ih(a)),Ve(l)&&(av(l)&&!he(l)&&(l=st({},l)),e.style=_h(l))}const o=tt(t)?1:$I(t)?128:gE(t)?64:Ve(t)?4:be(t)?2:0;return Hv(t,e,n,r,s,o,i,!0)}function _E(t){return t?av(t)||Pl in t?st({},t):t:null}function fr(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?EE(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&jv(a),ref:e&&e.ref?n&&s?he(s)?s.concat(Sa(e)):[s,Sa(e)]:Sa(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Jt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fr(t.ssContent),ssFallback:t.ssFallback&&fr(t.ssFallback),el:t.el,anchor:t.anchor}}function IE(t=" ",e=0){return kt($h,null,t,e)}function dL(t,e){const n=kt(Ta,null,t);return n.staticCount=e,n}function fL(t="",e=!1){return e?($v(),qv(sn,null,t)):kt(sn,null,t)}function gn(t){return t==null||typeof t=="boolean"?kt(sn):he(t)?kt(Jt,null,t.slice()):typeof t=="object"?Jn(t):kt($h,null,String(t))}function Jn(t){return t.el===null||t.memo?t:fr(t)}function Uh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(he(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Uh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Pl in e)?e._ctx=zt:s===3&&zt&&(zt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else be(e)?(e={default:e,_ctx:zt},n=32):(e=String(e),r&64?(n=16,e=[IE(e)]):n=8);t.children=e,t.shapeFlag|=n}function EE(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ih([e.class,r.class]));else if(s==="style")e.style=_h([e.style,r.style]);else if(Sl(s)){const i=e[s],o=r[s];o&&i!==o&&!(he(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function dn(t,e,n,r=null){Gt(t,e,7,[n,r])}const TE=Bv();let SE=0;function kE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||TE,i={uid:SE++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Wp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pv(r,s),emitsOptions:yv(r,s),emit:null,emitted:null,propsDefaults:Pe,inheritAttrs:r.inheritAttrs,ctx:Pe,data:Pe,props:Pe,attrs:Pe,slots:Pe,refs:Pe,setupState:Pe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=NI.bind(null,i),t.ce&&t.ce(i),i}let rt=null;const Ge=()=>rt||zt,js=t=>{rt=t,t.scope.on()},Hr=()=>{rt&&rt.scope.off(),rt=null};function zv(t){return t.vnode.shapeFlag&4}let eo=!1;function CE(t,e=!1){eo=e;const{props:n,children:r}=t.vnode,s=zv(t);iE(t,n,s,e),lE(t,r);const i=s?xE(t,e):void 0;return eo=!1,i}function xE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Sn(new Proxy(t.ctx,ZI));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?DE(t):null;js(t),ni();const i=lr(r,t,0,[t.props,s]);if(ri(),Hr(),Hp(i)){if(i.then(Hr,Hr),e)return i.then(o=>{Mf(t,o,e)}).catch(o=>{Dl(o,t,0)});t.asyncDep=i}else Mf(t,i,e)}else Kv(t,e)}function Mf(t,e,n){be(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ve(e)&&(t.setupState=hv(e)),Kv(t,n)}let Nf;function Kv(t,e,n){const r=t.type;if(!t.render){if(!e&&Nf&&!r.render){const s=r.template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=st(st({isCustomElement:i,delimiters:a},o),l);r.render=Nf(s,u)}}t.render=r.render||rn}js(t),ni(),eE(t),ri(),Hr()}function AE(t){return new Proxy(t.attrs,{get(e,n){return Bt(t,"get","$attrs"),e[n]}})}function DE(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=AE(t))},slots:t.slots,emit:t.emit,expose:e}}function Ll(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(hv(Sn(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ka)return Ka[n](t)}}))}function RE(t,e=!0){return be(t)?t.displayName||t.name:t.name||e&&t.__name}function OE(t){return be(t)&&"__vccOpts"in t}const x=(t,e)=>xI(t,e,eo);function A(t,e,n){const r=arguments.length;return r===2?Ve(e)&&!he(e)?_c(e)?kt(t,null,[e]):kt(t,e):kt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&_c(n)&&(n=[n]),kt(t,e,n))}const ME="3.2.38",NE="http://www.w3.org/2000/svg",Mr=typeof document!="undefined"?document:null,Pf=Mr&&Mr.createElement("template"),PE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?Mr.createElementNS(NE,t):Mr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Mr.createTextNode(t),createComment:t=>Mr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Mr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Pf.innerHTML=r?`<svg>${t}</svg>`:t;const a=Pf.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function LE(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function FE(t,e,n){const r=t.style,s=tt(n);if(n&&!s){for(const i in n)Ic(r,i,n[i]);if(e&&!tt(e))for(const i in e)n[i]==null&&Ic(r,i,"")}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const Lf=/\s*!important$/;function Ic(t,e,n){if(he(n))n.forEach(r=>Ic(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=VE(t,e);Lf.test(n)?t.setProperty(us(r),n.replace(Lf,""),"important"):t[r]=n}}const Ff=["Webkit","Moz","ms"],Cu={};function VE(t,e){const n=Cu[e];if(n)return n;let r=Tn(e);if(r!=="filter"&&r in t)return Cu[e]=r;r=xl(r);for(let s=0;s<Ff.length;s++){const i=Ff[s]+r;if(i in t)return Cu[e]=i}return e}const Vf="http://www.w3.org/1999/xlink";function BE(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Vf,e.slice(6,e.length)):t.setAttributeNS(Vf,e,n);else{const i=V_(e);n==null||i&&!Up(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function $E(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n==null?"":n;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Up(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[Gv,UE]=(()=>{let t=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let Ec=0;const qE=Promise.resolve(),jE=()=>{Ec=0},HE=()=>Ec||(qE.then(jE),Ec=Gv());function zE(t,e,n,r){t.addEventListener(e,n,r)}function KE(t,e,n,r){t.removeEventListener(e,n,r)}function GE(t,e,n,r,s=null){const i=t._vei||(t._vei={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=WE(e);if(r){const u=i[e]=YE(r,s);zE(t,a,u,l)}else o&&(KE(t,a,o,l),i[e]=void 0)}}const Bf=/(?:Once|Passive|Capture)$/;function WE(t){let e;if(Bf.test(t)){e={};let r;for(;r=t.match(Bf);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):us(t.slice(2)),e]}function YE(t,e){const n=r=>{const s=r.timeStamp||Gv();(UE||s>=n.attached-1)&&Gt(QE(r,n.value),e,5,[r])};return n.value=t,n.attached=HE(),n}function QE(t,e){if(he(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const $f=/^on[a-z]/,XE=(t,e,n,r,s=!1,i,o,a,l)=>{e==="class"?LE(t,r,s):e==="style"?FE(t,n,r):Sl(e)?Eh(e)||GE(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):JE(t,e,r,s))?$E(t,e,r,i,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),BE(t,e,r,s))};function JE(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&$f.test(e)&&be(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||$f.test(e)&&tt(n)?!1:e in t}const Gn="transition",pi="animation",Hs=(t,{slots:e})=>A(Ev,Yv(t),e);Hs.displayName="Transition";const Wv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ZE=Hs.props=st({},Ev.props,Wv),Sr=(t,e=[])=>{he(t)?t.forEach(n=>n(...e)):t&&t(...e)},Uf=t=>t?he(t)?t.some(e=>e.length>1):t.length>1:!1;function Yv(t){const e={};for(const C in t)C in Wv||(e[C]=t[C]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,m=eT(s),b=m&&m[0],p=m&&m[1],{onBeforeEnter:w,onEnter:y,onEnterCancelled:_,onLeave:D,onLeaveCancelled:M,onBeforeAppear:I=w,onAppear:E=y,onAppearCancelled:S=_}=e,O=(C,H,W)=>{Xn(C,H?c:a),Xn(C,H?u:o),W&&W()},F=(C,H)=>{C._isLeaving=!1,Xn(C,h),Xn(C,f),Xn(C,d),H&&H()},B=C=>(H,W)=>{const U=C?E:y,se=()=>O(H,C,W);Sr(U,[H,se]),qf(()=>{Xn(H,C?l:i),Rn(H,C?c:a),Uf(U)||jf(H,r,b,se)})};return st(e,{onBeforeEnter(C){Sr(w,[C]),Rn(C,i),Rn(C,o)},onBeforeAppear(C){Sr(I,[C]),Rn(C,l),Rn(C,u)},onEnter:B(!1),onAppear:B(!0),onLeave(C,H){C._isLeaving=!0;const W=()=>F(C,H);Rn(C,h),Xv(),Rn(C,d),qf(()=>{!C._isLeaving||(Xn(C,h),Rn(C,f),Uf(D)||jf(C,r,p,W))}),Sr(D,[C,W])},onEnterCancelled(C){O(C,!1),Sr(_,[C])},onAppearCancelled(C){O(C,!0),Sr(S,[C])},onLeaveCancelled(C){F(C),Sr(M,[C])}})}function eT(t){if(t==null)return null;if(Ve(t))return[xu(t.enter),xu(t.leave)];{const e=xu(t);return[e,e]}}function xu(t){return Gp(t)}function Rn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function Xn(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function qf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let tT=0;function jf(t,e,n,r){const s=t._endId=++tT,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=Qv(t,e);if(!o)return r();const u=o+"end";let c=0;const h=()=>{t.removeEventListener(u,d),i()},d=f=>{f.target===t&&++c>=l&&h()};setTimeout(()=>{c<l&&h()},a+1),t.addEventListener(u,d)}function Qv(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),s=r(Gn+"Delay"),i=r(Gn+"Duration"),o=Hf(s,i),a=r(pi+"Delay"),l=r(pi+"Duration"),u=Hf(a,l);let c=null,h=0,d=0;e===Gn?o>0&&(c=Gn,h=o,d=i.length):e===pi?u>0&&(c=pi,h=u,d=l.length):(h=Math.max(o,u),c=h>0?o>u?Gn:pi:null,d=c?c===Gn?i.length:l.length:0);const f=c===Gn&&/\b(transform|all)(,|$)/.test(n[Gn+"Property"]);return{type:c,timeout:h,propCount:d,hasTransform:f}}function Hf(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>zf(n)+zf(t[r])))}function zf(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function Xv(){return document.body.offsetHeight}const Jv=new WeakMap,Zv=new WeakMap,nT={name:"TransitionGroup",props:st({},ZE,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ge(),r=Iv();let s,i;return Av(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!aT(s[0].el,n.vnode.el,o))return;s.forEach(sT),s.forEach(iT);const a=s.filter(oT);Xv(),a.forEach(l=>{const u=l.el,c=u.style;Rn(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const h=u._moveCb=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",h),u._moveCb=null,Xn(u,o))};u.addEventListener("transitionend",h)})}),()=>{const o=pe(t),a=Yv(o);let l=o.tag||Jt;s=i,i=e.default?Lh(e.default()):[];for(let u=0;u<i.length;u++){const c=i[u];c.key!=null&&Ji(c,Xi(c,a,r,n))}if(s)for(let u=0;u<s.length;u++){const c=s[u];Ji(c,Xi(c,a,r,n)),Jv.set(c,c.el.getBoundingClientRect())}return kt(l,null,i)}}},rT=nT;function sT(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function iT(t){Zv.set(t,t.el.getBoundingClientRect())}function oT(t){const e=Jv.get(t),n=Zv.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function aT(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:i}=Qv(r);return s.removeChild(r),i}const lT=["ctrl","shift","alt","meta"],uT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>lT.some(n=>t[`${n}Key`]&&!e.includes(n))},mL=(t,e)=>(n,...r)=>{for(let s=0;s<e.length;s++){const i=uT[e[s]];if(i&&i(n,e))return}return t(n,...r)},cT={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},gL=(t,e)=>n=>{if(!("key"in n))return;const r=us(n.key);if(e.some(s=>s===r||cT[s]===r))return t(n)},hT=st({patchProp:XE},PE);let Kf;function dT(){return Kf||(Kf=dE(hT))}const ey=(...t)=>{const e=dT().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=fT(r);if(!s)return;const i=e._component;!be(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function fT(t){return tt(t)?document.querySelector(t):t}function ko(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0})}function pL(t,e){for(const n in e)ko(t,n,e[n])}const $n=ke(!1);let Fl;function mT(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[2]||n[4]||"0",versionNumber:n[4]||n[2]||"0",platform:e[0]||""}}function gT(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const ty="ontouchstart"in window||window.navigator.maxTouchPoints>0;function pT(t){Fl={is:{...t}},delete t.mac,delete t.desktop;const e=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(t,{mobile:!0,ios:!0,platform:e,[e]:!0})}function vT(t){const e=t.toLowerCase(),n=gT(e),r=mT(e,n),s={};r.browser&&(s[r.browser]=!0,s.version=r.version,s.versionNumber=parseInt(r.versionNumber,10)),r.platform&&(s[r.platform]=!0);const i=s.android||s.ios||s.bb||s.blackberry||s.ipad||s.iphone||s.ipod||s.kindle||s.playbook||s.silk||s["windows phone"];return i===!0||e.indexOf("mobile")>-1?(s.mobile=!0,s.edga||s.edgios?(s.edge=!0,r.browser="edge"):s.crios?(s.chrome=!0,r.browser="chrome"):s.fxios&&(s.firefox=!0,r.browser="firefox")):s.desktop=!0,(s.ipod||s.ipad||s.iphone)&&(s.ios=!0),s["windows phone"]&&(s.winphone=!0,delete s["windows phone"]),(s.chrome||s.opr||s.safari||s.vivaldi||s.mobile===!0&&s.ios!==!0&&i!==!0)&&(s.webkit=!0),s.edg&&(r.browser="edgechromium",s.edgeChromium=!0),(s.safari&&s.blackberry||s.bb)&&(r.browser="blackberry",s.blackberry=!0),s.safari&&s.playbook&&(r.browser="playbook",s.playbook=!0),s.opr&&(r.browser="opera",s.opera=!0),s.safari&&s.android&&(r.browser="android",s.android=!0),s.safari&&s.kindle&&(r.browser="kindle",s.kindle=!0),s.safari&&s.silk&&(r.browser="silk",s.silk=!0),s.vivaldi&&(r.browser="vivaldi",s.vivaldi=!0),s.name=r.browser,s.platform=r.platform,e.indexOf("electron")>-1?s.electron=!0:document.location.href.indexOf("-extension://")>-1?s.bex=!0:(window.Capacitor!==void 0?(s.capacitor=!0,s.nativeMobile=!0,s.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(s.cordova=!0,s.nativeMobile=!0,s.nativeMobileWrapper="cordova"),ty===!0&&s.mac===!0&&(s.desktop===!0&&s.safari===!0||s.nativeMobile===!0&&s.android!==!0&&s.ios!==!0&&s.ipad!==!0)&&pT(s)),s}const Gf=navigator.userAgent||navigator.vendor||window.opera,yT={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Xe={userAgent:Gf,is:vT(Gf),has:{touch:ty},within:{iframe:window.self!==window.top}},Tc={install(t){const{$q:e}=t;$n.value===!0?(t.onSSRHydrated.push(()=>{$n.value=!1,Object.assign(e.platform,Xe),Fl=void 0}),e.platform=yr(this)):e.platform=this}};{let t;ko(Xe.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Xe.is.ios===!0&&window.navigator.vendor.toLowerCase().indexOf("apple"),$n.value===!0?Object.assign(Tc,Xe,Fl,yT):Object.assign(Tc,Xe)}var Vl=(t,e)=>{const n=yr(t);for(const r in t)ko(e,r,()=>n[r],s=>{n[r]=s});return e};const Ot={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Ot,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function to(){}function vL(t){return t.button===0}function wT(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function bT(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function Wa(t){t.stopPropagation()}function ir(t){t.cancelable!==!1&&t.preventDefault()}function Ht(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function yL(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",ir,Ot.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",ir,Ot.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function _T(t,e,n){const r=`__q_${e}_evt`;t[r]=t[r]!==void 0?t[r].concat(n):n,n.forEach(s=>{s[0].addEventListener(s[1],t[s[2]],Ot[s[3]])})}function IT(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(r=>{r[0].removeEventListener(r[1],t[r[2]],Ot[r[3]])}),t[n]=void 0)}function ny(t,e=250,n){let r;function s(){const i=arguments,o=()=>{r=void 0,n!==!0&&t.apply(this,i)};clearTimeout(r),n===!0&&r===void 0&&t.apply(this,i),r=setTimeout(o,e)}return s.cancel=()=>{clearTimeout(r)},s}const Au=["sm","md","lg","xl"],{passive:Wf}=Ot;var ET=Vl({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:to,setDebounce:to,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,r=n||window,s=document.scrollingElement||document.documentElement,i=n===void 0||Xe.is.mobile===!0?()=>[Math.max(window.innerWidth,s.clientWidth),Math.max(window.innerHeight,s.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-s.clientWidth,n.height*n.scale+window.innerHeight-s.clientHeight],o=t.config.screen!==void 0&&t.config.screen.bodyClasses===!0;this.__update=h=>{const[d,f]=i();if(f!==this.height&&(this.height=f),d!==this.width)this.width=d;else if(h!==!0)return;let m=this.sizes;this.gt.xs=d>=m.sm,this.gt.sm=d>=m.md,this.gt.md=d>=m.lg,this.gt.lg=d>=m.xl,this.lt.sm=d<m.sm,this.lt.md=d<m.md,this.lt.lg=d<m.lg,this.lt.xl=d<m.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,m=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",m!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${m}`)),this.name=m)};let a,l={},u=16;this.setSizes=h=>{Au.forEach(d=>{h[d]!==void 0&&(l[d]=h[d])})},this.setDebounce=h=>{u=h};const c=()=>{const h=getComputedStyle(document.body);h.getPropertyValue("--q-size-sm")&&Au.forEach(d=>{this.sizes[d]=parseInt(h.getPropertyValue(`--q-size-${d}`),10)}),this.setSizes=d=>{Au.forEach(f=>{d[f]&&(this.sizes[f]=d[f])}),this.__update(!0)},this.setDebounce=d=>{a!==void 0&&r.removeEventListener("resize",a,Wf),a=d>0?ny(this.__update,d):this.__update,r.addEventListener("resize",a,Wf)},this.setDebounce(u),Object.keys(l).length>0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};$n.value===!0?e.push(c):c()}});const gt=Vl({isActive:!1,mode:!1},{__media:void 0,set(t){gt.mode=t,t==="auto"?(gt.__media===void 0&&(gt.__media=window.matchMedia("(prefers-color-scheme: dark)"),gt.__updateMedia=()=>{gt.set("auto")},gt.__media.addListener(gt.__updateMedia)),t=gt.__media.matches):gt.__media!==void 0&&(gt.__media.removeListener(gt.__updateMedia),gt.__media=void 0),gt.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){gt.set(gt.isActive===!1)},install({$q:t,onSSRHydrated:e,ssrContext:n}){const{dark:r}=t.config;if(t.dark=this,this.__installed===!0&&r===void 0)return;this.isActive=r===!0;const s=r!==void 0?r:!1;if($n.value===!0){const i=a=>{this.__fromSSR=a},o=this.set;this.set=i,i(s),e.push(()=>{this.set=o,this.set(this.__fromSSR)})}else this.set(s)}}),ry=()=>!0;function TT(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function ST(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function kT(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return ry;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(TT).map(ST)),()=>e.includes(window.location.hash)}var Sc={__history:[],add:to,remove:to,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Xe.is;if(e!==!0&&n!==!0)return;const r=t.config[e===!0?"cordova":"capacitor"];if(r!==void 0&&r.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=ry),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const s=kT(Object.assign({backButtonExit:!0},r)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else s()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},kc={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Yf(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length>0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const pn=Vl({__langPack:{}},{getLocale:Yf,set(t=kc,e){const n={...t,rtl:t.rtl===!0,getLocale:Yf};{const r=document.documentElement;r.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",n.isoName),n.set=pn.set,Object.assign(pn.__langPack,n),pn.props=n,pn.isoName=n.isoName,pn.nativeName=n.nativeName}},install({$q:t,lang:e,ssrContext:n}){t.lang=pn.__langPack,this.__installed===!0?e!==void 0&&this.set(e):this.set(e||kc)}});function CT(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let sy=!1;function xT(t){sy=t.isComposing===!0}function iy(t){return sy===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function no(t,e){return iy(t)===!0?!1:[].concat(e).includes(t.keyCode)}function AT(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function DT({is:t,has:e,within:n},r){const s=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=AT(t);i!==void 0&&s.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;s.push(i),s.push("native-mobile"),t.ios===!0&&(r[i]===void 0||r[i].iosStatusBarPadding!==!1)&&s.push("q-ios-padding")}else t.electron===!0?s.push("electron"):t.bex===!0&&s.push("bex");return n.iframe===!0&&s.push("within-iframe"),s}function RT(){const t=document.body.className;let e=t;Fl!==void 0&&(e=e.replace("desktop","platform-ios mobile")),Xe.has.touch===!0&&(e=e.replace("no-touch","touch")),Xe.within.iframe===!0&&(e+=" within-iframe"),t!==e&&(document.body.className=e)}function OT(t){for(const e in t)CT(e,t[e])}var MT={install(t){if(this.__installed!==!0){if($n.value===!0)RT();else{const{$q:e}=t;e.config.brand!==void 0&&OT(e.config.brand);const n=DT(Xe,e.config);document.body.classList.add.apply(document.body.classList,n)}Xe.is.ios===!0&&document.body.addEventListener("touchstart",to),window.addEventListener("keydown",xT,!0)}}},NT={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}};const Ya=Vl({iconMapFn:null,__icons:{}},{set(t,e){const n={...t,rtl:t.rtl===!0};n.set=Ya.set,Object.assign(Ya.__icons,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__icons,ko(t,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):this.set(e||NT)}}),PT="_q_",wL="_q_l_",bL="_q_pc_",LT="_q_fo_",_L="_q_tabs_",Qa={};let oy=!1;function FT(){oy=!0}const VT=typeof Map=="function",BT=typeof Set=="function",$T=typeof ArrayBuffer=="function";function Du(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(Du(t[r],e[r])!==!0)return!1;return!0}if(VT===!0&&t.constructor===Map){if(t.size!==e.size)return!1;for(r=t.entries().next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=r.next()}for(r=t.entries().next();r.done!==!0;){if(Du(r.value[1],e.get(r.value[0]))!==!0)return!1;r=r.next()}return!0}if(BT===!0&&t.constructor===Set){if(t.size!==e.size)return!1;for(r=t.entries().next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=r.next()}return!0}if($T===!0&&t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t).filter(i=>t[i]!==void 0);if(n=s.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(r=n;r--!==0;){const i=s[r];if(Du(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function yn(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function ay(t){return Object.prototype.toString.call(t)==="[object Date]"}function IL(t){return typeof t=="number"&&isFinite(t)}const Qf=[Tc,MT,gt,ET,Sc,pn,Ya];function ly(t,e){const n=ey(t);n.config.globalProperties=e.config.globalProperties;const{reload:r,...s}=e._context;return Object.assign(n._context,s),n}function Xf(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function UT(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(PT,n.$q),Xf(n,Qf),e.components!==void 0&&Object.values(e.components).forEach(r=>{yn(r)===!0&&r.name!==void 0&&t.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{yn(r)===!0&&r.name!==void 0&&t.directive(r.name,r)}),e.plugins!==void 0&&Xf(n,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&Qf.includes(r)===!1)),$n.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(r=>{r()}),n.$q.onSSRHydrated=()=>{}})}var qT=function(t,e={}){const n={version:"2.7.7"};oy===!1?(e.config!==void 0&&Object.assign(Qa,e.config),n.config={...Qa},FT()):n.config=e.config||{},UT(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},jT={version:"2.7.7",install:qT,lang:pn,iconSet:Ya},HT=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const zT={};function KT(t,e){const n=QI("router-view");return $v(),qv(n)}var GT=HT(zT,[["render",KT]]);var WT=!1;/*!
  * pinia v2.0.22
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let uy;const Bl=t=>uy=t,cy=Symbol();function Cc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Vi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Vi||(Vi={}));function YT(){const t=Yp(!0),e=t.run(()=>ke({}));let n=[],r=[];const s=Sn({install(i){Bl(s),s._a=i,i.provide(cy,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!WT?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const hy=()=>{};function Jf(t,e,n,r=hy){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Ge()&&Nl(s),s}function ys(t,...e){t.slice().forEach(n=>{n(...e)})}function xc(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Cc(s)&&Cc(r)&&t.hasOwnProperty(n)&&!je(r)&&!Vn(r)?t[n]=xc(s,r):t[n]=r}return t}const QT=Symbol();function XT(t){return!Cc(t)||!t.hasOwnProperty(QT)}const{assign:Mn}=Object;function JT(t){return!!(je(t)&&t.effect)}function ZT(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=s?s():{});const c=SI(n.state.value[t]);return Mn(c,i,Object.keys(o||{}).reduce((h,d)=>(h[d]=Sn(x(()=>{Bl(n);const f=n._s.get(t);return o[d].call(f,f)})),h),{}))}return l=dy(t,u,e,n,r,!0),l.$reset=function(){const h=s?s():{};this.$patch(d=>{Mn(d,h)})},l}function dy(t,e,n={},r,s,i){let o;const a=Mn({actions:{}},n),l={deep:!0};let u,c,h=Sn([]),d=Sn([]),f;const m=r.state.value[t];!i&&!m&&(r.state.value[t]={}),ke({});let b;function p(E){let S;u=c=!1,typeof E=="function"?(E(r.state.value[t]),S={type:Vi.patchFunction,storeId:t,events:f}):(xc(r.state.value[t],E),S={type:Vi.patchObject,payload:E,storeId:t,events:f});const O=b=Symbol();vt().then(()=>{b===O&&(u=!0)}),c=!0,ys(h,S,r.state.value[t])}const w=hy;function y(){o.stop(),h=[],d=[],r._s.delete(t)}function _(E,S){return function(){Bl(r);const O=Array.from(arguments),F=[],B=[];function C(U){F.push(U)}function H(U){B.push(U)}ys(d,{args:O,name:E,store:M,after:C,onError:H});let W;try{W=S.apply(this&&this.$id===t?this:M,O)}catch(U){throw ys(B,U),U}return W instanceof Promise?W.then(U=>(ys(F,U),U)).catch(U=>(ys(B,U),Promise.reject(U))):(ys(F,W),W)}}const D={_p:r,$id:t,$onAction:Jf.bind(null,d),$patch:p,$reset:w,$subscribe(E,S={}){const O=Jf(h,E,S.detached,()=>F()),F=o.run(()=>Le(()=>r.state.value[t],B=>{(S.flush==="sync"?c:u)&&E({storeId:t,type:Vi.direct,events:f},B)},Mn({},l,S)));return O},$dispose:y},M=yr(Mn({},D));r._s.set(t,M);const I=r._e.run(()=>(o=Yp(),o.run(()=>e())));for(const E in I){const S=I[E];if(je(S)&&!JT(S)||Vn(S))i||(m&&XT(S)&&(je(S)?S.value=m[E]:xc(S,m[E])),r.state.value[t][E]=S);else if(typeof S=="function"){const O=_(E,S);I[E]=O,a.actions[E]=S}}return Mn(M,I),Mn(pe(M),I),Object.defineProperty(M,"$state",{get:()=>r.state.value[t],set:E=>{p(S=>{Mn(S,E)})}}),r._p.forEach(E=>{Mn(M,o.run(()=>E({store:M,app:r._a,pinia:r,options:a})))}),m&&i&&n.hydrate&&n.hydrate(M.$state,m),u=!0,c=!0,M}function eS(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const u=Ge();return a=a||u&&Wt(cy),a&&Bl(a),a=uy,a._s.has(r)||(i?dy(r,e,s,a):ZT(r,s,a)),a._s.get(r)}return o.$id=r,o}function tS(t){{t=pe(t);const e={};for(const n in t){const r=t[n];(je(r)||Vn(r))&&(e[n]=dv(t,n))}return e}}var Ru=()=>YT();/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Cs=typeof window!="undefined";function nS(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const De=Object.assign;function Ou(t,e){const n={};for(const r in e){const s=e[r];n[r]=an(s)?s.map(t):t(s)}return n}const Bi=()=>{},an=Array.isArray,rS=/\/$/,sS=t=>t.replace(rS,"");function Mu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=lS(r!=null?r:e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function iS(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Zf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function oS(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&zs(e.matched[r],n.matched[s])&&fy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function zs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function fy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!aS(t[n],e[n]))return!1;return!0}function aS(t,e){return an(t)?em(t,e):an(e)?em(e,t):t===e}function em(t,e){return an(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function lS(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s=n.length-1,i,o;for(i=0;i<r.length;i++)if(o=r[i],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var ro;(function(t){t.pop="pop",t.push="push"})(ro||(ro={}));var $i;(function(t){t.back="back",t.forward="forward",t.unknown=""})($i||($i={}));function uS(t){if(!t)if(Cs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),sS(t)}const cS=/^[^#]+#/;function hS(t,e){return t.replace(cS,"#")+e}function dS(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const $l=()=>({left:window.pageXOffset,top:window.pageYOffset});function fS(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=dS(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function tm(t,e){return(history.state?history.state.position-e:-1)+t}const Ac=new Map;function mS(t,e){Ac.set(t,e)}function gS(t){const e=Ac.get(t);return Ac.delete(t),e}let pS=()=>location.protocol+"//"+location.host;function my(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Zf(l,"")}return Zf(n,t)+r+s}function vS(t,e,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const f=my(t,location),m=n.value,b=e.value;let p=0;if(d){if(n.value=f,e.value=d,o&&o===m){o=null;return}p=b?d.position-b.position:0}else r(f);s.forEach(w=>{w(n.value,m,{delta:p,type:ro.pop,direction:p?p>0?$i.forward:$i.back:$i.unknown})})};function l(){o=n.value}function u(d){s.push(d);const f=()=>{const m=s.indexOf(d);m>-1&&s.splice(m,1)};return i.push(f),f}function c(){const{history:d}=window;!d.state||d.replaceState(De({},d.state,{scroll:$l()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:h}}function nm(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?$l():null}}function yS(t){const{history:e,location:n}=window,r={value:my(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:pS()+t+l;try{e[c?"replaceState":"pushState"](u,"",d),s.value=u}catch(f){console.error(f),n[c?"replace":"assign"](d)}}function o(l,u){const c=De({},e.state,nm(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,c,!0),r.value=l}function a(l,u){const c=De({},s.value,e.state,{forward:l,scroll:$l()});i(c.current,c,!0);const h=De({},nm(r.value,l,null),{position:c.position+1},u);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function wS(t){t=uS(t);const e=yS(t),n=vS(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=De({location:"",base:t,go:r,createHref:hS.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function bS(t){return typeof t=="string"||t&&typeof t=="object"}function gy(t){return typeof t=="string"||typeof t=="symbol"}const Wn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},py=Symbol("");var rm;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(rm||(rm={}));function Ks(t,e){return De(new Error,{type:t,[py]:!0},e)}function Dn(t,e){return t instanceof Error&&py in t&&(e==null||!!(t.type&e))}const sm="[^/]+?",_S={sensitive:!1,strict:!1,start:!0,end:!0},IS=/[.+*?^${}()[\]/\\]/g;function ES(t,e){const n=De({},_S,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let h=0;h<u.length;h++){const d=u[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(IS,"\\$&"),f+=40;else if(d.type===1){const{value:m,repeatable:b,optional:p,regexp:w}=d;i.push({name:m,repeatable:b,optional:p});const y=w||sm;if(y!==sm){f+=10;try{new RegExp(`(${y})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${m}" (${y}): `+D.message)}}let _=b?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;h||(_=p&&u.length<2?`(?:/${_})`:"/"+_),p&&(_+="?"),s+=_,f+=20,p&&(f+=-8),b&&(f+=-20),y===".*"&&(f+=-50)}c.push(f)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const c=u.match(o),h={};if(!c)return null;for(let d=1;d<c.length;d++){const f=c[d]||"",m=i[d-1];h[m.name]=f&&m.repeatable?f.split("/"):f}return h}function l(u){let c="",h=!1;for(const d of t){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const f of d)if(f.type===0)c+=f.value;else if(f.type===1){const{value:m,repeatable:b,optional:p}=f,w=m in u?u[m]:"";if(an(w)&&!b)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const y=an(w)?w.join("/"):w;if(!y)if(p)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);c+=y}}return c||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function TS(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function SS(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=TS(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(im(r))return 1;if(im(s))return-1}return s.length-r.length}function im(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const kS={type:0,value:""},CS=/[a-zA-Z0-9_]/;function xS(t){if(!t)return[[]];if(t==="/")return[[kS]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",c="";function h(){!u||(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:CS.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),s}function AS(t,e,n){const r=ES(xS(t.path),n),s=De(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function DS(t,e){const n=[],r=new Map;e=lm({strict:!1,end:!0,sensitive:!1},e);function s(c){return r.get(c)}function i(c,h,d){const f=!d,m=RS(c);m.aliasOf=d&&d.record;const b=lm(e,c),p=[m];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const D of _)p.push(De({},m,{components:d?d.record.components:m.components,path:D,aliasOf:d?d.record:m}))}let w,y;for(const _ of p){const{path:D}=_;if(h&&D[0]!=="/"){const M=h.record.path,I=M[M.length-1]==="/"?"":"/";_.path=h.record.path+(D&&I+D)}if(w=AS(_,h,b),d?d.alias.push(w):(y=y||w,y!==w&&y.alias.push(w),f&&c.name&&!am(w)&&o(c.name)),m.children){const M=m.children;for(let I=0;I<M.length;I++)i(M[I],w,d&&d.children[I])}d=d||w,l(w)}return y?()=>{o(y)}:Bi}function o(c){if(gy(c)){const h=r.get(c);h&&(r.delete(c),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(c);h>-1&&(n.splice(h,1),c.record.name&&r.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return n}function l(c){let h=0;for(;h<n.length&&SS(c,n[h])>=0&&(c.record.path!==n[h].record.path||!vy(c,n[h]));)h++;n.splice(h,0,c),c.record.name&&!am(c)&&r.set(c.record.name,c)}function u(c,h){let d,f={},m,b;if("name"in c&&c.name){if(d=r.get(c.name),!d)throw Ks(1,{location:c});b=d.record.name,f=De(om(h.params,d.keys.filter(y=>!y.optional).map(y=>y.name)),c.params&&om(c.params,d.keys.map(y=>y.name))),m=d.stringify(f)}else if("path"in c)m=c.path,d=n.find(y=>y.re.test(m)),d&&(f=d.parse(m),b=d.record.name);else{if(d=h.name?r.get(h.name):n.find(y=>y.re.test(h.path)),!d)throw Ks(1,{location:c,currentLocation:h});b=d.record.name,f=De({},h.params,c.params),m=d.stringify(f)}const p=[];let w=d;for(;w;)p.unshift(w.record),w=w.parent;return{name:b,path:m,params:f,matched:p,meta:MS(p)}}return t.forEach(c=>i(c)),{addRoute:i,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function om(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function RS(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:OS(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function OS(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function am(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function MS(t){return t.reduce((e,n)=>De(e,n.meta),{})}function lm(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function vy(t,e){return e.children.some(n=>n===t||vy(t,n))}const yy=/#/g,NS=/&/g,PS=/\//g,LS=/=/g,FS=/\?/g,wy=/\+/g,VS=/%5B/g,BS=/%5D/g,by=/%5E/g,$S=/%60/g,_y=/%7B/g,US=/%7C/g,Iy=/%7D/g,qS=/%20/g;function qh(t){return encodeURI(""+t).replace(US,"|").replace(VS,"[").replace(BS,"]")}function jS(t){return qh(t).replace(_y,"{").replace(Iy,"}").replace(by,"^")}function Dc(t){return qh(t).replace(wy,"%2B").replace(qS,"+").replace(yy,"%23").replace(NS,"%26").replace($S,"`").replace(_y,"{").replace(Iy,"}").replace(by,"^")}function HS(t){return Dc(t).replace(LS,"%3D")}function zS(t){return qh(t).replace(yy,"%23").replace(FS,"%3F")}function KS(t){return t==null?"":zS(t).replace(PS,"%2F")}function Xa(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function GS(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(wy," "),o=i.indexOf("="),a=Xa(o<0?i:i.slice(0,o)),l=o<0?null:Xa(i.slice(o+1));if(a in e){let u=e[a];an(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function um(t){let e="";for(let n in t){const r=t[n];if(n=HS(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(an(r)?r.map(i=>i&&Dc(i)):[r&&Dc(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function WS(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=an(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const YS=Symbol(""),cm=Symbol(""),Ul=Symbol(""),jh=Symbol(""),Rc=Symbol("");function vi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function Zn(t,e,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Ks(4,{from:n,to:e})):h instanceof Error?a(h):bS(h)?a(Ks(2,{from:e,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},u=t.call(r&&r.instances[s],e,n,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch(h=>a(h))})}function Nu(t,e,n,r){const s=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(QS(a)){const u=(a.__vccOpts||a)[e];u&&s.push(Zn(u,n,r,i,o))}else{let l=a();s.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const c=nS(u)?u.default:u;i.components[o]=c;const d=(c.__vccOpts||c)[e];return d&&Zn(d,n,r,i,o)()}))}}return s}function QS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function hm(t){const e=Wt(Ul),n=Wt(jh),r=x(()=>e.resolve(Ps(t.to))),s=x(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],h=n.matched;if(!c||!h.length)return-1;const d=h.findIndex(zs.bind(null,c));if(d>-1)return d;const f=dm(l[u-2]);return u>1&&dm(c)===f&&h[h.length-1].path!==f?h.findIndex(zs.bind(null,l[u-2])):d}),i=x(()=>s.value>-1&&ek(n.params,r.value.params)),o=x(()=>s.value>-1&&s.value===n.matched.length-1&&fy(n.params,r.value.params));function a(l={}){return ZS(l)?e[Ps(t.replace)?"replace":"push"](Ps(t.to)).catch(Bi):Promise.resolve()}return{route:r,href:x(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const XS=Fh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:hm,setup(t,{slots:e}){const n=yr(hm(t)),{options:r}=Wt(Ul),s=x(()=>({[fm(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[fm(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:A("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),JS=XS;function ZS(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ek(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!an(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function dm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const fm=(t,e,n)=>t!=null?t:e!=null?e:n,tk=Fh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Wt(Rc),s=x(()=>t.route||r.value),i=Wt(cm,0),o=x(()=>{let u=Ps(i);const{matched:c}=s.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),a=x(()=>s.value.matched[o.value]);Ia(cm,x(()=>o.value+1)),Ia(YS,a),Ia(Rc,s);const l=ke();return Le(()=>[l.value,a.value,t.name],([u,c,h],[d,f,m])=>{c&&(c.instances[h]=u,f&&f!==c&&u&&u===d&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!zs(c,f)||!d)&&(c.enterCallbacks[h]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=s.value,c=t.name,h=a.value,d=h&&h.components[c];if(!d)return mm(n.default,{Component:d,route:u});const f=h.props[c],m=f?f===!0?u.params:typeof f=="function"?f(u):f:null,p=A(d,De({},m,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return mm(n.default,{Component:p,route:u})||p}}});function mm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const nk=tk;function rk(t){const e=DS(t.routes,t),n=t.parseQuery||GS,r=t.stringifyQuery||um,s=t.history,i=vi(),o=vi(),a=vi(),l=II(Wn);let u=Wn;Cs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Ou.bind(null,N=>""+N),h=Ou.bind(null,KS),d=Ou.bind(null,Xa);function f(N,te){let G,ie;return gy(N)?(G=e.getRecordMatcher(N),ie=te):ie=N,e.addRoute(ie,G)}function m(N){const te=e.getRecordMatcher(N);te&&e.removeRoute(te)}function b(){return e.getRoutes().map(N=>N.record)}function p(N){return!!e.getRecordMatcher(N)}function w(N,te){if(te=De({},te||l.value),typeof N=="string"){const de=Mu(n,N,te.path),g=e.resolve({path:de.path},te),v=s.createHref(de.fullPath);return De(de,g,{params:d(g.params),hash:Xa(de.hash),redirectedFrom:void 0,href:v})}let G;if("path"in N)G=De({},N,{path:Mu(n,N.path,te.path).path});else{const de=De({},N.params);for(const g in de)de[g]==null&&delete de[g];G=De({},N,{params:h(N.params)}),te.params=h(te.params)}const ie=e.resolve(G,te),ne=N.hash||"";ie.params=c(d(ie.params));const Ee=iS(r,De({},N,{hash:jS(ne),path:ie.path})),ye=s.createHref(Ee);return De({fullPath:Ee,hash:ne,query:r===um?WS(N.query):N.query||{}},ie,{redirectedFrom:void 0,href:ye})}function y(N){return typeof N=="string"?Mu(n,N,l.value.path):De({},N)}function _(N,te){if(u!==N)return Ks(8,{from:te,to:N})}function D(N){return E(N)}function M(N){return D(De(y(N),{replace:!0}))}function I(N){const te=N.matched[N.matched.length-1];if(te&&te.redirect){const{redirect:G}=te;let ie=typeof G=="function"?G(N):G;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=y(ie):{path:ie},ie.params={}),De({query:N.query,hash:N.hash,params:"path"in ie?{}:N.params},ie)}}function E(N,te){const G=u=w(N),ie=l.value,ne=N.state,Ee=N.force,ye=N.replace===!0,de=I(G);if(de)return E(De(y(de),{state:typeof de=="object"?De({},ne,de.state):ne,force:Ee,replace:ye}),te||G);const g=G;g.redirectedFrom=te;let v;return!Ee&&oS(r,ie,G)&&(v=Ks(16,{to:g,from:ie}),Ie(ie,ie,!0,!1)),(v?Promise.resolve(v):O(g,ie)).catch(k=>Dn(k)?Dn(k,2)?k:q(k):R(k,g,ie)).then(k=>{if(k){if(Dn(k,2))return E(De({replace:ye},y(k.to),{state:typeof k.to=="object"?De({},ne,k.to.state):ne,force:Ee}),te||g)}else k=B(g,ie,!0,ye,ne);return F(g,ie,k),k})}function S(N,te){const G=_(N,te);return G?Promise.reject(G):Promise.resolve()}function O(N,te){let G;const[ie,ne,Ee]=sk(N,te);G=Nu(ie.reverse(),"beforeRouteLeave",N,te);for(const de of ie)de.leaveGuards.forEach(g=>{G.push(Zn(g,N,te))});const ye=S.bind(null,N,te);return G.push(ye),ws(G).then(()=>{G=[];for(const de of i.list())G.push(Zn(de,N,te));return G.push(ye),ws(G)}).then(()=>{G=Nu(ne,"beforeRouteUpdate",N,te);for(const de of ne)de.updateGuards.forEach(g=>{G.push(Zn(g,N,te))});return G.push(ye),ws(G)}).then(()=>{G=[];for(const de of N.matched)if(de.beforeEnter&&!te.matched.includes(de))if(an(de.beforeEnter))for(const g of de.beforeEnter)G.push(Zn(g,N,te));else G.push(Zn(de.beforeEnter,N,te));return G.push(ye),ws(G)}).then(()=>(N.matched.forEach(de=>de.enterCallbacks={}),G=Nu(Ee,"beforeRouteEnter",N,te),G.push(ye),ws(G))).then(()=>{G=[];for(const de of o.list())G.push(Zn(de,N,te));return G.push(ye),ws(G)}).catch(de=>Dn(de,8)?de:Promise.reject(de))}function F(N,te,G){for(const ie of a.list())ie(N,te,G)}function B(N,te,G,ie,ne){const Ee=_(N,te);if(Ee)return Ee;const ye=te===Wn,de=Cs?history.state:{};G&&(ie||ye?s.replace(N.fullPath,De({scroll:ye&&de&&de.scroll},ne)):s.push(N.fullPath,ne)),l.value=N,Ie(N,te,G,ye),q()}let C;function H(){C||(C=s.listen((N,te,G)=>{if(!Nt.listening)return;const ie=w(N),ne=I(ie);if(ne){E(De(ne,{replace:!0}),ie).catch(Bi);return}u=ie;const Ee=l.value;Cs&&mS(tm(Ee.fullPath,G.delta),$l()),O(ie,Ee).catch(ye=>Dn(ye,12)?ye:Dn(ye,2)?(E(ye.to,ie).then(de=>{Dn(de,20)&&!G.delta&&G.type===ro.pop&&s.go(-1,!1)}).catch(Bi),Promise.reject()):(G.delta&&s.go(-G.delta,!1),R(ye,ie,Ee))).then(ye=>{ye=ye||B(ie,Ee,!1),ye&&(G.delta&&!Dn(ye,8)?s.go(-G.delta,!1):G.type===ro.pop&&Dn(ye,20)&&s.go(-1,!1)),F(ie,Ee,ye)}).catch(Bi)}))}let W=vi(),U=vi(),se;function R(N,te,G){q(N);const ie=U.list();return ie.length?ie.forEach(ne=>ne(N,te,G)):console.error(N),Promise.reject(N)}function X(){return se&&l.value!==Wn?Promise.resolve():new Promise((N,te)=>{W.add([N,te])})}function q(N){return se||(se=!N,H(),W.list().forEach(([te,G])=>N?G(N):te()),W.reset()),N}function Ie(N,te,G,ie){const{scrollBehavior:ne}=t;if(!Cs||!ne)return Promise.resolve();const Ee=!G&&gS(tm(N.fullPath,0))||(ie||!G)&&history.state&&history.state.scroll||null;return vt().then(()=>ne(N,te,Ee)).then(ye=>ye&&fS(ye)).catch(ye=>R(ye,N,te))}const $e=N=>s.go(N);let Ue;const Ae=new Set,Nt={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,hasRoute:p,getRoutes:b,resolve:w,options:t,push:D,replace:M,go:$e,back:()=>$e(-1),forward:()=>$e(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:U.add,isReady:X,install(N){const te=this;N.component("RouterLink",JS),N.component("RouterView",nk),N.config.globalProperties.$router=te,Object.defineProperty(N.config.globalProperties,"$route",{enumerable:!0,get:()=>Ps(l)}),Cs&&!Ue&&l.value===Wn&&(Ue=!0,D(s.location).catch(ne=>{}));const G={};for(const ne in Wn)G[ne]=x(()=>l.value[ne]);N.provide(Ul,te),N.provide(jh,yr(G)),N.provide(Rc,l);const ie=N.unmount;Ae.add(N),N.unmount=function(){Ae.delete(N),Ae.size<1&&(u=Wn,C&&C(),C=null,l.value=Wn,Ue=!1,se=!1),ie()}}};return Nt}function ws(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function sk(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>zs(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>zs(u,l))||s.push(l))}return[n,r,s]}function EL(){return Wt(Ul)}function TL(){return Wt(jh)}const ik=function(){const e=document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),gm={},ok="/",Qt=function(e,n){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=`${ok}${r}`,r in gm)return;gm[r]=!0;const s=r.endsWith(".css"),i=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":ik,s||(o.as="script",o.crossOrigin=""),o.href=r,document.head.appendChild(o),s)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())},ak=[{path:"/",component:()=>Qt(()=>import("./MainLayoutFronted.442fe462.js"),["assets/MainLayoutFronted.442fe462.js","assets/MainLayoutFronted.991a83d3.css","assets/LoginAvatar.06b9dff3.js","assets/QBadge.b97fd85c.js","assets/selection.96396454.js","assets/QList.272928c8.js","assets/rtl.4b414a6d.js","assets/QBtnDropdown.2a5ffc26.js","assets/QMenu.a843bec7.js","assets/ClosePopup.2b50205f.js"]),children:[{path:"",name:"Home",component:()=>Qt(()=>import("./IndexPage.7ff5b2e5.js"),["assets/IndexPage.7ff5b2e5.js","assets/QPage.d0363454.js"])},{path:"sign-in",name:"SignIn",meta:{authRoute:!0},component:()=>Qt(()=>import("./SignIn.b5d9e70d.js"),["assets/SignIn.b5d9e70d.js","assets/QForm.4845c366.js","assets/QPage.d0363454.js","assets/notify.hook.52a25033.js"])},{path:"work-experience",name:"WorkExperience",component:()=>Qt(()=>import("./WorkExperience.6bbb5ab4.js"),["assets/WorkExperience.6bbb5ab4.js","assets/WorkExperience.9414beb6.css","assets/QPage.d0363454.js","assets/use-fullscreen.d71d4cf3.js","assets/notify.hook.52a25033.js","assets/QBadge.b97fd85c.js","assets/selection.96396454.js","assets/QTable.c4bdfd0f.js","assets/QList.272928c8.js","assets/rtl.4b414a6d.js","assets/QMenu.a843bec7.js"])}]},{path:"/admin",component:()=>Qt(()=>import("./MainLayoutBackend.d3cd17fa.js"),["assets/MainLayoutBackend.d3cd17fa.js","assets/LoginAvatar.06b9dff3.js","assets/QBadge.b97fd85c.js","assets/selection.96396454.js","assets/QList.272928c8.js","assets/ClosePopup.2b50205f.js"]),children:[{path:"",name:"HomeAdmin",meta:{protectedRoute:!0},component:()=>Qt(()=>import("./IndexPage.e0bdacdf.js"),["assets/IndexPage.e0bdacdf.js","assets/QPage.d0363454.js"])},{path:"work-experience",name:"WorkExperienceAdmin",meta:{protectedRoute:!0},component:()=>Qt(()=>import("./WorkExperience.6cc97249.js"),["assets/WorkExperience.6cc97249.js","assets/QPage.d0363454.js","assets/use-fullscreen.d71d4cf3.js","assets/notify.hook.52a25033.js","assets/QTable.c4bdfd0f.js","assets/QList.272928c8.js","assets/rtl.4b414a6d.js","assets/selection.96396454.js","assets/QMenu.a843bec7.js","assets/ClosePopup.2b50205f.js"])},{path:"new-experience",name:"NewExperience",meta:{protectedRoute:!0},component:()=>Qt(()=>import("./NewExperience.55c32902.js"),["assets/NewExperience.55c32902.js","assets/QBtnDropdown.2a5ffc26.js","assets/QMenu.a843bec7.js","assets/selection.96396454.js","assets/QForm.4845c366.js","assets/QPage.d0363454.js","assets/use-fullscreen.d71d4cf3.js","assets/notify.hook.52a25033.js","assets/FormExperience.23341649.js"])},{path:"edit-experience/:idDoc",name:"EditExperience",meta:{protectedRoute:!0},component:()=>Qt(()=>import("./EditExperience.30aee06e.js"),["assets/EditExperience.30aee06e.js","assets/QBtnDropdown.2a5ffc26.js","assets/QMenu.a843bec7.js","assets/selection.96396454.js","assets/QForm.4845c366.js","assets/QPage.d0363454.js","assets/use-fullscreen.d71d4cf3.js","assets/notify.hook.52a25033.js","assets/FormExperience.23341649.js"])},{path:"user-profile",name:"UserProfile",meta:{protectedRoute:!0},component:()=>Qt(()=>import("./UserProfile.80a1a2d8.js"),["assets/UserProfile.80a1a2d8.js","assets/QPage.d0363454.js"])}]},{path:"/:catchAll(.*)*",component:()=>Qt(()=>import("./ErrorNotFound.6e64de03.js"),[])}];function lk(t){return t.charAt(0).toUpperCase()+t.slice(1)}function uk(t,e,n){return n<=e?e:Math.min(n,Math.max(e,t))}function SL(t,e,n){if(n<=e)return e;const r=n-e+1;let s=e+(t-e)%r;return s<e&&(s=r+s),s===0?0:s}function Ye(t,e=2,n="0"){if(t==null)return t;const r=""+t;return r.length>=e?r:new Array(e-r.length+1).join(n)+r}const ta=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function ck(t){return dk(t)===0}function hk(t,e){return e<=6?31:e<=11||ck(t)?30:29}function dk(t){const e=ta.length;let n=ta[0],r,s,i,o,a;if(t<n||t>=ta[e-1])throw new Error("Invalid Jalaali year "+t);for(a=1;a<e&&(r=ta[a],s=r-n,!(t<r));a+=1)n=r;return o=t-n,s-o<6&&(o=o-s+fk(s+4,33)*33),i=pm(pm(o+1,33)-1,4),i===-1&&(i=4),i}function fk(t,e){return~~(t/e)}function pm(t,e){return t-~~(t/e)*e}const Ey=864e5,mk=36e5,Oc=6e4,Ty="YYYY-MM-DDTHH:mm:ss.SSSZ",gk=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,pk=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Pu={};function vk(t,e){const n="("+e.days.join("|")+")",r=t+n;if(Pu[r]!==void 0)return Pu[r];const s="("+e.daysShort.join("|")+")",i="("+e.months.join("|")+")",o="("+e.monthsShort.join("|")+")",a={};let l=0;const u=t.replace(pk,h=>{switch(l++,h){case"YY":return a.YY=l,"(-?\\d{1,2})";case"YYYY":return a.YYYY=l,"(-?\\d{1,4})";case"M":return a.M=l,"(\\d{1,2})";case"MM":return a.M=l,"(\\d{2})";case"MMM":return a.MMM=l,o;case"MMMM":return a.MMMM=l,i;case"D":return a.D=l,"(\\d{1,2})";case"Do":return a.D=l++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return a.D=l,"(\\d{2})";case"H":return a.H=l,"(\\d{1,2})";case"HH":return a.H=l,"(\\d{2})";case"h":return a.h=l,"(\\d{1,2})";case"hh":return a.h=l,"(\\d{2})";case"m":return a.m=l,"(\\d{1,2})";case"mm":return a.m=l,"(\\d{2})";case"s":return a.s=l,"(\\d{1,2})";case"ss":return a.s=l,"(\\d{2})";case"S":return a.S=l,"(\\d{1})";case"SS":return a.S=l,"(\\d{2})";case"SSS":return a.S=l,"(\\d{3})";case"A":return a.A=l,"(AM|PM)";case"a":return a.a=l,"(am|pm)";case"aa":return a.aa=l,"(a\\.m\\.|p\\.m\\.)";case"ddd":return s;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return a.Z=l,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return a.ZZ=l,"(Z|[+-]\\d{2}\\d{2})";case"X":return a.X=l,"(-?\\d+)";case"x":return a.x=l,"(-?\\d{4,})";default:return l--,h[0]==="["&&(h=h.substring(1,h.length-1)),h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:a,regex:new RegExp("^"+u)};return Pu[r]=c,c}function Sy(t,e){return t!==void 0?t:e!==void 0?e.date:kc.date}function vm(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;return n+Ye(s)+e+Ye(i)}function yk(t,e,n){let r=t.getFullYear(),s=t.getMonth();const i=t.getDate();return e.year!==void 0&&(r+=n*e.year,delete e.year),e.month!==void 0&&(s+=n*e.month,delete e.month),t.setDate(1),t.setMonth(2),t.setFullYear(r),t.setMonth(s),t.setDate(Math.min(i,zh(t))),e.date!==void 0&&(t.setDate(t.getDate()+n*e.date),delete e.date),t}function wk(t,e,n){const r=e.year!==void 0?e.year:t[`get${n}FullYear`](),s=e.month!==void 0?e.month-1:t[`get${n}Month`](),i=new Date(r,s+1,0).getDate(),o=Math.min(i,e.date!==void 0?e.date:t[`get${n}Date`]());return t[`set${n}Date`](1),t[`set${n}Month`](2),t[`set${n}FullYear`](r),t[`set${n}Month`](s),t[`set${n}Date`](o),delete e.year,delete e.month,delete e.date,t}function Hh(t,e,n){const r=ky(e),s=new Date(t),i=r.year!==void 0||r.month!==void 0||r.date!==void 0?yk(s,r,n):s;for(const o in r){const a=lk(o);i[`set${a}`](i[`get${a}`]()+n*r[o])}return i}function ky(t){const e={...t};return t.years!==void 0&&(e.year=t.years,delete e.years),t.months!==void 0&&(e.month=t.months,delete e.months),t.days!==void 0&&(e.date=t.days,delete e.days),t.day!==void 0&&(e.date=t.day,delete e.day),t.hour!==void 0&&(e.hours=t.hour,delete e.hour),t.minute!==void 0&&(e.minutes=t.minute,delete e.minute),t.second!==void 0&&(e.seconds=t.second,delete e.second),t.millisecond!==void 0&&(e.milliseconds=t.millisecond,delete e.millisecond),e}function Cy(t,e,n){const r=ky(e),s=n===!0?"UTC":"",i=new Date(t),o=r.year!==void 0||r.month!==void 0||r.date!==void 0?wk(i,r,s):i;for(const a in r){const l=a.charAt(0).toUpperCase()+a.slice(1);o[`set${s}${l}`](r[a])}return o}function bk(t,e,n){const r=_k(t,e,n),s=new Date(r.year,r.month===null?null:r.month-1,r.day===null?1:r.day,r.hour,r.minute,r.second,r.millisecond),i=s.getTimezoneOffset();return r.timezoneOffset===null||r.timezoneOffset===i?s:Hh(s,{minutes:r.timezoneOffset-i},1)}function _k(t,e,n,r,s){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(s!==void 0&&Object.assign(i,s),t==null||t===""||typeof t!="string")return i;e===void 0&&(e=Ty);const o=Sy(n,pn.props),a=o.months,l=o.monthsShort,{regex:u,map:c}=vk(e,o),h=t.match(u);if(h===null)return i;let d="";if(c.X!==void 0||c.x!==void 0){const f=parseInt(h[c.X!==void 0?c.X:c.x],10);if(isNaN(f)===!0||f<0)return i;const m=new Date(f*(c.X!==void 0?1e3:1));i.year=m.getFullYear(),i.month=m.getMonth()+1,i.day=m.getDate(),i.hour=m.getHours(),i.minute=m.getMinutes(),i.second=m.getSeconds(),i.millisecond=m.getMilliseconds()}else{if(c.YYYY!==void 0)i.year=parseInt(h[c.YYYY],10);else if(c.YY!==void 0){const f=parseInt(h[c.YY],10);i.year=f<0?f:2e3+f}if(c.M!==void 0){if(i.month=parseInt(h[c.M],10),i.month<1||i.month>12)return i}else c.MMM!==void 0?i.month=l.indexOf(h[c.MMM])+1:c.MMMM!==void 0&&(i.month=a.indexOf(h[c.MMMM])+1);if(c.D!==void 0){if(i.day=parseInt(h[c.D],10),i.year===null||i.month===null||i.day<1)return i;const f=r!=="persian"?new Date(i.year,i.month,0).getDate():hk(i.year,i.month);if(i.day>f)return i}c.H!==void 0?i.hour=parseInt(h[c.H],10)%24:c.h!==void 0&&(i.hour=parseInt(h[c.h],10)%12,(c.A&&h[c.A]==="PM"||c.a&&h[c.a]==="pm"||c.aa&&h[c.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),c.m!==void 0&&(i.minute=parseInt(h[c.m],10)%60),c.s!==void 0&&(i.second=parseInt(h[c.s],10)%60),c.S!==void 0&&(i.millisecond=parseInt(h[c.S],10)*10**(3-h[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(d=c.Z!==void 0?h[c.Z].replace(":",""):h[c.ZZ],i.timezoneOffset=(d[0]==="+"?-1:1)*(60*d.slice(1,3)+1*d.slice(3,5)))}return i.dateHash=Ye(i.year,6)+"/"+Ye(i.month)+"/"+Ye(i.day),i.timeHash=Ye(i.hour)+":"+Ye(i.minute)+":"+Ye(i.second)+d,i}function Ik(t){return typeof t=="number"?!0:isNaN(Date.parse(t))===!1}function Ek(t,e){return Cy(new Date,t,e)}function Tk(t){const e=new Date(t).getDay();return e===0?7:e}function Mc(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);const n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const r=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-r);const s=(e-n)/(Ey*7);return 1+Math.floor(s)}function Sk(t){return t.getFullYear()*1e4+t.getMonth()*100+t.getDate()}function Lu(t,e){const n=new Date(t);return e===!0?Sk(n):n.getTime()}function kk(t,e,n,r={}){const s=Lu(e,r.onlyDate),i=Lu(n,r.onlyDate),o=Lu(t,r.onlyDate);return(o>s||r.inclusiveFrom===!0&&o===s)&&(o<i||r.inclusiveTo===!0&&o===i)}function Ck(t,e){return Hh(t,e,1)}function xk(t,e){return Hh(t,e,-1)}function mn(t,e,n){const r=new Date(t),s=`set${n===!0?"UTC":""}`;switch(e){case"year":case"years":r[`${s}Month`](0);case"month":case"months":r[`${s}Date`](1);case"day":case"days":case"date":r[`${s}Hours`](0);case"hour":case"hours":r[`${s}Minutes`](0);case"minute":case"minutes":r[`${s}Seconds`](0);case"second":case"seconds":r[`${s}Milliseconds`](0)}return r}function Ak(t,e,n){const r=new Date(t),s=`set${n===!0?"UTC":""}`;switch(e){case"year":case"years":r[`${s}Month`](11);case"month":case"months":r[`${s}Date`](zh(r));case"day":case"days":case"date":r[`${s}Hours`](23);case"hour":case"hours":r[`${s}Minutes`](59);case"minute":case"minutes":r[`${s}Seconds`](59);case"second":case"seconds":r[`${s}Milliseconds`](999)}return r}function Dk(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(n=>{e=Math.max(e,new Date(n))}),e}function Rk(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(n=>{e=Math.min(e,new Date(n))}),e}function na(t,e,n){return(t.getTime()-t.getTimezoneOffset()*Oc-(e.getTime()-e.getTimezoneOffset()*Oc))/n}function xy(t,e,n="days"){const r=new Date(t),s=new Date(e);switch(n){case"years":case"year":return r.getFullYear()-s.getFullYear();case"months":case"month":return(r.getFullYear()-s.getFullYear())*12+r.getMonth()-s.getMonth();case"days":case"day":case"date":return na(mn(r,"day"),mn(s,"day"),Ey);case"hours":case"hour":return na(mn(r,"hour"),mn(s,"hour"),mk);case"minutes":case"minute":return na(mn(r,"minute"),mn(s,"minute"),Oc);case"seconds":case"second":return na(mn(r,"second"),mn(s,"second"),1e3)}}function Nc(t){return xy(t,mn(t,"year"),"days")+1}function Ok(t){return ay(t)===!0?"date":typeof t=="number"?"number":"string"}function Mk(t,e,n){const r=new Date(t);if(e){const s=new Date(e);if(r<s)return s}if(n){const s=new Date(n);if(r>s)return s}return r}function Nk(t,e,n){const r=new Date(t),s=new Date(e);if(n===void 0)return r.getTime()===s.getTime();switch(n){case"second":case"seconds":if(r.getSeconds()!==s.getSeconds())return!1;case"minute":case"minutes":if(r.getMinutes()!==s.getMinutes())return!1;case"hour":case"hours":if(r.getHours()!==s.getHours())return!1;case"day":case"days":case"date":if(r.getDate()!==s.getDate())return!1;case"month":case"months":if(r.getMonth()!==s.getMonth())return!1;case"year":case"years":if(r.getFullYear()!==s.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${n}`)}return!0}function zh(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function ym(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}const wm={YY(t,e,n){const r=this.YYYY(t,e,n)%100;return r>=0?Ye(r):"-"+Ye(Math.abs(r))},YYYY(t,e,n){return n!=null?n:t.getFullYear()},M(t){return t.getMonth()+1},MM(t){return Ye(t.getMonth()+1)},MMM(t,e){return e.monthsShort[t.getMonth()]},MMMM(t,e){return e.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return ym(this.Q(t))},D(t){return t.getDate()},Do(t){return ym(t.getDate())},DD(t){return Ye(t.getDate())},DDD(t){return Nc(t)},DDDD(t){return Ye(Nc(t),3)},d(t){return t.getDay()},dd(t,e){return this.dddd(t,e).slice(0,2)},ddd(t,e){return e.daysShort[t.getDay()]},dddd(t,e){return e.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return Mc(t)},ww(t){return Ye(Mc(t))},H(t){return t.getHours()},HH(t){return Ye(t.getHours())},h(t){const e=t.getHours();return e===0?12:e>12?e%12:e},hh(t){return Ye(this.h(t))},m(t){return t.getMinutes()},mm(t){return Ye(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return Ye(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return Ye(Math.floor(t.getMilliseconds()/10))},SSS(t){return Ye(t.getMilliseconds(),3)},A(t){return this.H(t)<12?"AM":"PM"},a(t){return this.H(t)<12?"am":"pm"},aa(t){return this.H(t)<12?"a.m.":"p.m."},Z(t,e,n,r){const s=r==null?t.getTimezoneOffset():r;return vm(s,":")},ZZ(t,e,n,r){const s=r==null?t.getTimezoneOffset():r;return vm(s)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function Pk(t,e,n,r,s){if(t!==0&&!t||t===1/0||t===-1/0)return;const i=new Date(t);if(isNaN(i))return;e===void 0&&(e=Ty);const o=Sy(n,pn.props);return e.replace(gk,(a,l)=>a in wm?wm[a](i,o,r,s):l===void 0?a:l.split("\\]").join("]"))}function Lk(t){return ay(t)===!0?new Date(t.getTime()):t}var Fk={isValid:Ik,extractDate:bk,buildDate:Ek,getDayOfWeek:Tk,getWeekOfYear:Mc,isBetweenDates:kk,addToDate:Ck,subtractFromDate:xk,adjustDate:Cy,startOfDate:mn,endOfDate:Ak,getMaxDate:Dk,getMinDate:Rk,getDateDiff:xy,getDayOfYear:Nc,inferDateFormat:Ok,getDateBetween:Mk,isSameDate:Nk,daysInMonth:zh,formatDate:Pk,clone:Lk};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Vk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Dy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ay(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw Error();const d=i<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const m=u<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Bk=function(t){const e=Ay(t);return Dy.encodeByteArray(e,!0)},Ry=function(t){return Bk(t).replace(/\./g,"")},$k=function(t){try{return Dy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Oy(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function qk(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function My(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ny(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jk(){return Ke().indexOf("Electron/")>=0}function Py(){const t=Ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Hk(){return Ke().indexOf("MSAppHost/")>=0}function zk(){return!qk()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ly(){return typeof indexedDB=="object"}function Kk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="FirebaseError";class xn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Gk,Object.setPrototypeOf(this,xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Co.prototype.create)}}class Co{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Wk(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new xn(s,a,r)}}function Wk(t,e){return t.replace(Yk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Yk=/\{\$([^}]+)}/g;function Qk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ja(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(bm(i)&&bm(o)){if(!Ja(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function bm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ai(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Di(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Xk(t,e){const n=new Jk(t,e);return n.subscribe.bind(n)}class Jk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Zk(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Fu),s.error===void 0&&(s.error=Fu),s.complete===void 0&&(s.complete=Fu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t){return t&&t._delegate?t._delegate:t}class mr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Uk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nC(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tC(t){return t===Ar?void 0:t}function nC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const sC={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},iC=xe.INFO,oC={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},aC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=oC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kh{constructor(e){this.name=e,this._logLevel=iC,this._logHandler=aC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const lC=(t,e)=>e.some(n=>t instanceof n);let _m,Im;function uC(){return _m||(_m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cC(){return Im||(Im=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fy=new WeakMap,Pc=new WeakMap,Vy=new WeakMap,Vu=new WeakMap,Gh=new WeakMap;function hC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ur(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Fy.set(n,t)}).catch(()=>{}),Gh.set(e,t),e}function dC(t){if(Pc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Pc.set(t,e)}let Lc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fC(t){Lc=t(Lc)}function mC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bu(this),e,...n);return Vy.set(r,e.sort?e.sort():[e]),ur(r)}:cC().includes(t)?function(...e){return t.apply(Bu(this),e),ur(Fy.get(this))}:function(...e){return ur(t.apply(Bu(this),e))}}function gC(t){return typeof t=="function"?mC(t):(t instanceof IDBTransaction&&dC(t),lC(t,uC())?new Proxy(t,Lc):t)}function ur(t){if(t instanceof IDBRequest)return hC(t);if(Vu.has(t))return Vu.get(t);const e=gC(t);return e!==t&&(Vu.set(t,e),Gh.set(e,t)),e}const Bu=t=>Gh.get(t);function pC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ur(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ur(o.result),l.oldVersion,l.newVersion,ur(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const vC=["get","getKey","getAll","getAllKeys","count"],yC=["put","add","delete","clear"],$u=new Map;function Em(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($u.get(e))return $u.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=yC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vC.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return $u.set(e,i),i}fC(t=>({...t,get:(e,n,r)=>Em(e,n)||t.get(e,n,r),has:(e,n)=>!!Em(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fc="@firebase/app",Tm="0.7.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new Kh("@firebase/app"),_C="@firebase/app-compat",IC="@firebase/analytics-compat",EC="@firebase/analytics",TC="@firebase/app-check-compat",SC="@firebase/app-check",kC="@firebase/auth",CC="@firebase/auth-compat",xC="@firebase/database",AC="@firebase/database-compat",DC="@firebase/functions",RC="@firebase/functions-compat",OC="@firebase/installations",MC="@firebase/installations-compat",NC="@firebase/messaging",PC="@firebase/messaging-compat",LC="@firebase/performance",FC="@firebase/performance-compat",VC="@firebase/remote-config",BC="@firebase/remote-config-compat",$C="@firebase/storage",UC="@firebase/storage-compat",qC="@firebase/firestore",jC="@firebase/firestore-compat",HC="firebase",zC="9.9.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="[DEFAULT]",KC={[Fc]:"fire-core",[_C]:"fire-core-compat",[EC]:"fire-analytics",[IC]:"fire-analytics-compat",[SC]:"fire-app-check",[TC]:"fire-app-check-compat",[kC]:"fire-auth",[CC]:"fire-auth-compat",[xC]:"fire-rtdb",[AC]:"fire-rtdb-compat",[DC]:"fire-fn",[RC]:"fire-fn-compat",[OC]:"fire-iid",[MC]:"fire-iid-compat",[NC]:"fire-fcm",[PC]:"fire-fcm-compat",[LC]:"fire-perf",[FC]:"fire-perf-compat",[VC]:"fire-rc",[BC]:"fire-rc-compat",[$C]:"fire-gcs",[UC]:"fire-gcs-compat",[qC]:"fire-fst",[jC]:"fire-fst-compat","fire-js":"fire-js",[HC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new Map,Vc=new Map;function GC(t,e){try{t.container.addComponent(e)}catch(n){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qr(t){const e=t.name;if(Vc.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;Vc.set(e,t);for(const n of Za.values())GC(n,t);return!0}function ql(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xr=new Co("app","Firebase",WC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=zC;function QC(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:By,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Xr.create("bad-app-name",{appName:String(r)});const s=Za.get(r);if(s){if(Ja(t,s.options)&&Ja(n,s.config))return s;throw Xr.create("duplicate-app",{appName:r})}const i=new rC(r);for(const a of Vc.values())i.addComponent(a);const o=new YC(t,n,i);return Za.set(r,o),o}function Wh(t=By){const e=Za.get(t);if(!e)throw Xr.create("no-app",{appName:t});return e}function _n(t,e,n){var r;let s=(r=KC[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(a.join(" "));return}Qr(new mr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firebase-heartbeat-database",JC=1,so="firebase-heartbeat-store";let Uu=null;function $y(){return Uu||(Uu=pC(XC,JC,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(so)}}}).catch(t=>{throw Xr.create("idb-open",{originalErrorMessage:t.message})})),Uu}async function ZC(t){var e;try{return(await $y()).transaction(so).objectStore(so).get(Uy(t))}catch(n){if(n instanceof xn)Yr.warn(n.message);else{const r=Xr.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});Yr.warn(r.message)}}}async function Sm(t,e){var n;try{const s=(await $y()).transaction(so,"readwrite");return await s.objectStore(so).put(e,Uy(t)),s.done}catch(r){if(r instanceof xn)Yr.warn(r.message);else{const s=Xr.create("idb-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message});Yr.warn(s.message)}}}function Uy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=1024,tx=30*24*60*60*1e3;class nx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=km();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=tx}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=km(),{heartbeatsToSend:n,unsentEntries:r}=rx(this._heartbeatsCache.heartbeats),s=Ry(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function km(){return new Date().toISOString().substring(0,10)}function rx(t,e=ex){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Cm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ly()?Kk().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await ZC(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Cm(t){return Ry(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){Qr(new mr("platform-logger",e=>new wC(e),"PRIVATE")),Qr(new mr("heartbeat",e=>new nx(e),"PRIVATE")),_n(Fc,Tm,t),_n(Fc,Tm,"esm2017"),_n("fire-js","")}ix("");var ox="firebase",ax="9.9.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n(ox,ax,"app");var lx=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Z,Yh=Yh||{},fe=lx||self;function el(){}function Bc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ao(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function ux(t){return Object.prototype.hasOwnProperty.call(t,qu)&&t[qu]||(t[qu]=++cx)}var qu="closure_uid_"+(1e9*Math.random()>>>0),cx=0;function hx(t,e,n){return t.call.apply(t.bind,arguments)}function dx(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function ct(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ct=hx:ct=dx,ct.apply(null,arguments)}function ra(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ft(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function wr(){this.s=this.s,this.o=this.o}var fx=0;wr.prototype.s=!1;wr.prototype.na=function(){!this.s&&(this.s=!0,this.M(),fx!=0)&&ux(this)};wr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},jy=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,s=typeof t=="string"?t.split(""):t;for(let i=0;i<r;i++)i in s&&e.call(n,s[i],i,t)};function mx(t){e:{var e=i1;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)if(s in r&&e.call(void 0,r[s],s,t)){e=s;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function xm(t){return Array.prototype.concat.apply([],arguments)}function Qh(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function tl(t){return/^[\s\xa0]*$/.test(t)}var Am=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Et(t,e){return t.indexOf(e)!=-1}function ju(t,e){return t<e?-1:t>e?1:0}var Tt;e:{var Dm=fe.navigator;if(Dm){var Rm=Dm.userAgent;if(Rm){Tt=Rm;break e}}Tt=""}function Xh(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Hy(t){const e={};for(const n in t)e[n]=t[n];return e}var Om="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zy(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Om.length;i++)n=Om[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Jh(t){return Jh[" "](t),t}Jh[" "]=el;function gx(t){var e=yx;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var px=Et(Tt,"Opera"),Gs=Et(Tt,"Trident")||Et(Tt,"MSIE"),Ky=Et(Tt,"Edge"),$c=Ky||Gs,Gy=Et(Tt,"Gecko")&&!(Et(Tt.toLowerCase(),"webkit")&&!Et(Tt,"Edge"))&&!(Et(Tt,"Trident")||Et(Tt,"MSIE"))&&!Et(Tt,"Edge"),vx=Et(Tt.toLowerCase(),"webkit")&&!Et(Tt,"Edge");function Wy(){var t=fe.document;return t?t.documentMode:void 0}var nl;e:{var Hu="",zu=function(){var t=Tt;if(Gy)return/rv:([^\);]+)(\)|;)/.exec(t);if(Ky)return/Edge\/([\d\.]+)/.exec(t);if(Gs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(vx)return/WebKit\/(\S+)/.exec(t);if(px)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(zu&&(Hu=zu?zu[1]:""),Gs){var Ku=Wy();if(Ku!=null&&Ku>parseFloat(Hu)){nl=String(Ku);break e}}nl=Hu}var yx={};function wx(){return gx(function(){let t=0;const e=Am(String(nl)).split("."),n=Am("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=ju(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||ju(s[2].length==0,i[2].length==0)||ju(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var Uc;if(fe.document&&Gs){var Mm=Wy();Uc=Mm||parseInt(nl,10)||void 0}else Uc=void 0;var bx=Uc,_x=function(){if(!fe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{fe.addEventListener("test",el,e),fe.removeEventListener("test",el,e)}catch{}return t}();function bt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};function io(t,e){if(bt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Gy){e:{try{Jh(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Ix[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&io.Z.h.call(this)}}ft(io,bt);var Ix={2:"touch",3:"pen",4:"mouse"};io.prototype.h=function(){io.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Do="closure_listenable_"+(1e6*Math.random()|0),Ex=0;function Tx(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=s,this.key=++Ex,this.ca=this.fa=!1}function jl(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Hl(t){this.src=t,this.g={},this.h=0}Hl.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=jc(t,e,r,s);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new Tx(e,this.src,i,!!r,s),e.fa=n,t.push(e)),e};function qc(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=qy(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(jl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function jc(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==r)return s}return-1}var Zh="closure_lm_"+(1e6*Math.random()|0),Gu={};function Yy(t,e,n,r,s){if(r&&r.once)return Xy(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Yy(t,e[i],n,r,s);return null}return n=nd(n),t&&t[Do]?t.N(e,n,Ao(r)?!!r.capture:!!r,s):Qy(t,e,n,!1,r,s)}function Qy(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Ao(s)?!!s.capture:!!s,a=td(t);if(a||(t[Zh]=a=new Hl(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=Sx(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_x||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Zy(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Sx(){function t(n){return e.call(t.src,t.listener,n)}var e=kx;return t}function Xy(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Xy(t,e[i],n,r,s);return null}return n=nd(n),t&&t[Do]?t.O(e,n,Ao(r)?!!r.capture:!!r,s):Qy(t,e,n,!0,r,s)}function Jy(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Jy(t,e[i],n,r,s);else r=Ao(r)?!!r.capture:!!r,n=nd(n),t&&t[Do]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=jc(i,n,r,s),-1<n&&(jl(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=td(t))&&(e=t.g[e.toString()],t=-1,e&&(t=jc(e,n,r,s)),(n=-1<t?e[t]:null)&&ed(n))}function ed(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Do])qc(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Zy(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=td(e))?(qc(n,t),n.h==0&&(n.src=null,e[Zh]=null)):jl(t)}}}function Zy(t){return t in Gu?Gu[t]:Gu[t]="on"+t}function kx(t,e){if(t.ca)t=!0;else{e=new io(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&ed(t),t=n.call(r,e)}return t}function td(t){return t=t[Zh],t instanceof Hl?t:null}var Wu="__closure_events_fn_"+(1e9*Math.random()>>>0);function nd(t){return typeof t=="function"?t:(t[Wu]||(t[Wu]=function(e){return t.handleEvent(e)}),t[Wu])}function it(){wr.call(this),this.i=new Hl(this),this.P=this,this.I=null}ft(it,wr);it.prototype[Do]=!0;it.prototype.removeEventListener=function(t,e,n,r){Jy(this,t,e,n,r)};function ht(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new bt(e,t);else if(e instanceof bt)e.target=e.target||t;else{var s=e;e=new bt(r,t),zy(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=sa(o,r,!0,e)&&s}if(o=e.g=t,s=sa(o,r,!0,e)&&s,s=sa(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=sa(o,r,!1,e)&&s}it.prototype.M=function(){if(it.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)jl(n[r]);delete t.g[e],t.h--}}this.I=null};it.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};it.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function sa(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&qc(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var rd=fe.JSON.stringify;function Cx(){var t=tw;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class xx{constructor(){this.h=this.g=null}add(e,n){const r=ew.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ew=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Ax,t=>t.reset());class Ax{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Dx(t){fe.setTimeout(()=>{throw t},0)}function sd(t,e){Hc||Rx(),zc||(Hc(),zc=!0),tw.add(t,e)}var Hc;function Rx(){var t=fe.Promise.resolve(void 0);Hc=function(){t.then(Ox)}}var zc=!1,tw=new xx;function Ox(){for(var t;t=Cx();){try{t.h.call(t.g)}catch(n){Dx(n)}var e=ew;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}zc=!1}function zl(t,e){it.call(this),this.h=t||1,this.g=e||fe,this.j=ct(this.kb,this),this.l=Date.now()}ft(zl,it);Z=zl.prototype;Z.da=!1;Z.S=null;Z.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ht(this,"tick"),this.da&&(id(this),this.start()))}};Z.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function id(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}Z.M=function(){zl.Z.M.call(this),id(this),delete this.g};function od(t,e,n){if(typeof t=="function")n&&(t=ct(t,n));else if(t&&typeof t.handleEvent=="function")t=ct(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:fe.setTimeout(t,e||0)}function nw(t){t.g=od(()=>{t.g=null,t.i&&(t.i=!1,nw(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Mx extends wr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nw(this)}M(){super.M(),this.g&&(fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oo(t){wr.call(this),this.h=t,this.g={}}ft(oo,wr);var Nm=[];function rw(t,e,n,r){Array.isArray(n)||(n&&(Nm[0]=n.toString()),n=Nm);for(var s=0;s<n.length;s++){var i=Yy(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function sw(t){Xh(t.g,function(e,n){this.g.hasOwnProperty(n)&&ed(e)},t),t.g={}}oo.prototype.M=function(){oo.Z.M.call(this),sw(this)};oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Kl(){this.g=!0}Kl.prototype.Aa=function(){this.g=!1};function Nx(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function Px(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Ds(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Fx(t,n)+(r?" "+r:"")})}function Lx(t,e){t.info(function(){return"TIMEOUT: "+e})}Kl.prototype.info=function(){};function Fx(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return rd(n)}catch{return e}}var cs={},Pm=null;function Gl(){return Pm=Pm||new it}cs.Ma="serverreachability";function iw(t){bt.call(this,cs.Ma,t)}ft(iw,bt);function ao(t){const e=Gl();ht(e,new iw(e))}cs.STAT_EVENT="statevent";function ow(t,e){bt.call(this,cs.STAT_EVENT,t),this.stat=e}ft(ow,bt);function Ct(t){const e=Gl();ht(e,new ow(e,t))}cs.Na="timingevent";function aw(t,e){bt.call(this,cs.Na,t),this.size=e}ft(aw,bt);function Ro(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return fe.setTimeout(function(){t()},e)}var Wl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},lw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ad(){}ad.prototype.h=null;function Lm(t){return t.h||(t.h=t.i())}function uw(){}var Oo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ld(){bt.call(this,"d")}ft(ld,bt);function ud(){bt.call(this,"c")}ft(ud,bt);var Kc;function Yl(){}ft(Yl,ad);Yl.prototype.g=function(){return new XMLHttpRequest};Yl.prototype.i=function(){return{}};Kc=new Yl;function Mo(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new oo(this),this.P=Vx,t=$c?125:void 0,this.W=new zl(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cw}function cw(){this.i=null,this.g="",this.h=!1}var Vx=45e3,Gc={},rl={};Z=Mo.prototype;Z.setTimeout=function(t){this.P=t};function Wc(t,e,n){t.K=1,t.v=Xl(Un(e)),t.s=n,t.U=!0,hw(t,null)}function hw(t,e){t.F=Date.now(),No(t),t.A=Un(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),yw(n.h,"t",r),t.C=0,n=t.l.H,t.h=new cw,t.g=Vw(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Mx(ct(t.Ia,t,t.g),t.O)),rw(t.V,t.g,"readystatechange",t.gb),e=t.H?Hy(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ao(),Nx(t.j,t.u,t.A,t.m,t.X,t.s)}Z.gb=function(t){t=t.target;const e=this.L;e&&Nn(t)==3?e.l():this.Ia(t)};Z.Ia=function(t){try{if(t==this.g)e:{const c=Nn(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>c)&&(c!=3||$c||this.g&&(this.h.h||this.g.ga()||$m(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?ao(3):ao(2)),Ql(this);var n=this.g.ba();this.N=n;t:if(dw(this)){var r=$m(this.g);t="";var s=r.length,i=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Br(this),Ui(this);var o="";break t}this.h.i=new fe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,Px(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tl(a)){var u=a;break t}}u=null}if(n=u)Ds(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yc(this,n);else{this.i=!1,this.o=3,Ct(12),Br(this),Ui(this);break e}}this.U?(fw(this,c,o),$c&&this.i&&c==3&&(rw(this.V,this.W,"tick",this.fb),this.W.start())):(Ds(this.j,this.m,o,null),Yc(this,o)),c==4&&Br(this),this.i&&!this.I&&(c==4?Nw(this.l,this):(this.i=!1,No(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ct(12)):(this.o=0,Ct(13)),Br(this),Ui(this)}}}catch{}finally{}};function dw(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function fw(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=Bx(t,n),s==rl){e==4&&(t.o=4,Ct(14),r=!1),Ds(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Gc){t.o=4,Ct(15),Ds(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ds(t.j,t.m,s,null),Yc(t,s);dw(t)&&s!=rl&&s!=Gc&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ct(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),yd(e),e.L=!0,Ct(11))):(Ds(t.j,t.m,n,"[Invalid Chunked Response]"),Br(t),Ui(t))}Z.fb=function(){if(this.g){var t=Nn(this.g),e=this.g.ga();this.C<e.length&&(Ql(this),fw(this,t,e),this.i&&t!=4&&No(this))}};function Bx(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?rl:(n=Number(e.substring(n,r)),isNaN(n)?Gc:(r+=1,r+n>e.length?rl:(e=e.substr(r,n),t.C=r+n,e)))}Z.cancel=function(){this.I=!0,Br(this)};function No(t){t.Y=Date.now()+t.P,mw(t,t.P)}function mw(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Ro(ct(t.eb,t),e)}function Ql(t){t.B&&(fe.clearTimeout(t.B),t.B=null)}Z.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Lx(this.j,this.A),this.K!=2&&(ao(),Ct(17)),Br(this),this.o=2,Ui(this)):mw(this,this.Y-t)};function Ui(t){t.l.G==0||t.I||Nw(t.l,t)}function Br(t){Ql(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,id(t.W),sw(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Yc(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Qc(n.i,t))){if(n.I=t.N,!t.J&&Qc(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)al(n),eu(n);else break e;vd(n),Ct(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&n.A==0&&!n.v&&(n.v=Ro(ct(n.ab,n),6e3));if(1>=_w(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else $r(n,11)}else if((t.J||n.g==t)&&al(n),!tl(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.U=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.J=u[1],n.la=u[2];const c=u[3];c!=null&&(n.ma=c,n.h.info("VER="+n.ma));const h=u[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var i=r.i;!i.g&&(Et(m,"spdy")||Et(m,"quic")||Et(m,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(dd(i,i.h),i.h=null))}if(r.D){const b=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(r.sa=b,Be(r.F,r.D,b))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=Fw(r,r.H?r.la:null,r.W),o.J){Iw(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(Ql(a),No(a)),r.g=o}else Ow(r);0<n.l.length&&tu(n)}else u[0]!="stop"&&u[0]!="close"||$r(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?$r(n,7):pd(n):u[0]!="noop"&&n.j&&n.j.wa(u),n.A=0)}}ao(4)}catch{}}function $x(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Bc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function cd(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Bc(t)||typeof t=="string")jy(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Bc(t)||typeof t=="string"){n=[];for(var r=t.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,t)n[r++]=s;r=$x(t),s=r.length;for(var i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}}function ii(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ii)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}Z=ii.prototype;Z.R=function(){hd(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};Z.T=function(){return hd(this),this.g.concat()};function hd(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Jr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)r=t.g[e],Jr(s,r)||(t.g[n++]=r,s[r]=1),e++;t.g.length=n}}Z.get=function(t,e){return Jr(this.h,t)?this.h[t]:e};Z.set=function(t,e){Jr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};Z.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],i=this.get(s);t.call(e,i,s,this)}};function Jr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var gw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ux(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Zr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Zr){this.g=e!==void 0?e:t.g,sl(this,t.j),this.s=t.s,il(this,t.i),ol(this,t.m),this.l=t.l,e=t.h;var n=new lo;n.i=e.i,e.g&&(n.g=new ii(e.g),n.h=e.h),Fm(this,n),this.o=t.o}else t&&(n=String(t).match(gw))?(this.g=!!e,sl(this,n[1]||"",!0),this.s=qi(n[2]||""),il(this,n[3]||"",!0),ol(this,n[4]),this.l=qi(n[5]||"",!0),Fm(this,n[6]||"",!0),this.o=qi(n[7]||"")):(this.g=!!e,this.h=new lo(null,this.g))}Zr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ri(e,Vm,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ri(e,Vm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Ri(n,n.charAt(0)=="/"?Kx:zx,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ri(n,Wx)),t.join("")};function Un(t){return new Zr(t)}function sl(t,e,n){t.j=n?qi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function il(t,e,n){t.i=n?qi(e,!0):e}function ol(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Fm(t,e,n){e instanceof lo?(t.h=e,Yx(t.h,t.g)):(n||(e=Ri(e,Gx)),t.h=new lo(e,t.g))}function Be(t,e,n){t.h.set(e,n)}function Xl(t){return Be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function qx(t){return t instanceof Zr?Un(t):new Zr(t,void 0)}function jx(t,e,n,r){var s=new Zr(null,void 0);return t&&sl(s,t),e&&il(s,e),n&&ol(s,n),r&&(s.l=r),s}function qi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ri(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Hx),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hx(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Vm=/[#\/\?@]/g,zx=/[#\?:]/g,Kx=/[#\?]/g,Gx=/[#\?@]/g,Wx=/#/g;function lo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function br(t){t.g||(t.g=new ii,t.h=0,t.i&&Ux(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Z=lo.prototype;Z.add=function(t,e){br(this),this.i=null,t=oi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function pw(t,e){br(t),e=oi(t,e),Jr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Jr(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&hd(t)))}function vw(t,e){return br(t),e=oi(t,e),Jr(t.g.h,e)}Z.forEach=function(t,e){br(this),this.g.forEach(function(n,r){jy(n,function(s){t.call(e,s,r,this)},this)},this)};Z.T=function(){br(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var s=t[r],i=0;i<s.length;i++)n.push(e[r]);return n};Z.R=function(t){br(this);var e=[];if(typeof t=="string")vw(this,t)&&(e=xm(e,this.g.get(oi(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=xm(e,t[n])}return e};Z.set=function(t,e){return br(this),this.i=null,t=oi(this,t),vw(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Z.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function yw(t,e,n){pw(t,e),0<n.length&&(t.i=null,t.g.set(oi(t,e),Qh(n)),t.h+=n.length)}Z.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],s=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=s;r[i]!==""&&(o+="="+encodeURIComponent(String(r[i]))),t.push(o)}}return this.i=t.join("&")};function oi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Yx(t,e){e&&!t.j&&(br(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(pw(this,r),yw(this,s,n))},t)),t.j=e}var Qx=class{constructor(t,e){this.h=t,this.g=e}};function ww(t){this.l=t||Xx,fe.PerformanceNavigationTiming?(t=fe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(fe.g&&fe.g.Ea&&fe.g.Ea()&&fe.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xx=10;function bw(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function _w(t){return t.h?1:t.g?t.g.size:0}function Qc(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function dd(t,e){t.g?t.g.add(e):t.h=e}function Iw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}ww.prototype.cancel=function(){if(this.i=Ew(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Ew(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Qh(t.i)}function fd(){}fd.prototype.stringify=function(t){return fe.JSON.stringify(t,void 0)};fd.prototype.parse=function(t){return fe.JSON.parse(t,void 0)};function Jx(){this.g=new fd}function Zx(t,e,n){const r=n||"";try{cd(t,function(s,i){let o=s;Ao(s)&&(o=rd(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function e1(t,e){const n=new Kl;if(fe.Image){const r=new Image;r.onload=ra(ia,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ra(ia,n,r,"TestLoadImage: error",!1,e),r.onabort=ra(ia,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ra(ia,n,r,"TestLoadImage: timeout",!1,e),fe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ia(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Po(t){this.l=t.$b||null,this.j=t.ib||!1}ft(Po,ad);Po.prototype.g=function(){return new Jl(this.l,this.j)};Po.prototype.i=function(t){return function(){return t}}({});function Jl(t,e){it.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=md,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ft(Jl,it);var md=0;Z=Jl.prototype;Z.open=function(t,e){if(this.readyState!=md)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,uo(this)};Z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||fe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};Z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=md};Z.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof fe.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tw(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function Tw(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}Z.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Lo(this):uo(this),this.readyState==3&&Tw(this)}};Z.Ua=function(t){this.g&&(this.response=this.responseText=t,Lo(this))};Z.Ta=function(t){this.g&&(this.response=t,Lo(this))};Z.ha=function(){this.g&&Lo(this)};function Lo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,uo(t)}Z.setRequestHeader=function(t,e){this.v.append(t,e)};Z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function uo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var t1=fe.JSON.parse;function Je(t){it.call(this),this.headers=new ii,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sw,this.K=this.L=!1}ft(Je,it);var Sw="",n1=/^https?$/i,r1=["POST","PUT"];Z=Je.prototype;Z.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Kc.g(),this.C=this.u?Lm(this.u):Lm(Kc),this.g.onreadystatechange=ct(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){Bm(this,i);return}t=n||"";const s=new ii(this.headers);r&&cd(r,function(i,o){s.set(o,i)}),r=mx(s.T()),n=fe.FormData&&t instanceof fe.FormData,!(0<=qy(r1,e))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(i,o){this.g.setRequestHeader(o,i)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xw(this),0<this.B&&((this.K=s1(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ct(this.pa,this)):this.A=od(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Bm(this,i)}};function s1(t){return Gs&&wx()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function i1(t){return t.toLowerCase()=="content-type"}Z.pa=function(){typeof Yh!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ht(this,"timeout"),this.abort(8))};function Bm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,kw(t),Zl(t)}function kw(t){t.D||(t.D=!0,ht(t,"complete"),ht(t,"error"))}Z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ht(this,"complete"),ht(this,"abort"),Zl(this))};Z.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zl(this,!0)),Je.Z.M.call(this)};Z.Fa=function(){this.s||(this.F||this.v||this.l?Cw(this):this.cb())};Z.cb=function(){Cw(this)};function Cw(t){if(t.h&&typeof Yh!="undefined"&&(!t.C[1]||Nn(t)!=4||t.ba()!=2)){if(t.v&&Nn(t)==4)od(t.Fa,0,t);else if(ht(t,"readystatechange"),Nn(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.H).match(gw)[1]||null;if(!s&&fe.self&&fe.self.location){var i=fe.self.location.protocol;s=i.substr(0,i.length-1)}r=!n1.test(s?s.toLowerCase():"")}n=r}if(n)ht(t,"complete"),ht(t,"success");else{t.m=6;try{var o=2<Nn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",kw(t)}}finally{Zl(t)}}}}function Zl(t,e){if(t.g){xw(t);const n=t.g,r=t.C[0]?el:null;t.g=null,t.C=null,e||ht(t,"ready");try{n.onreadystatechange=r}catch{}}}function xw(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(fe.clearTimeout(t.A),t.A=null)}function Nn(t){return t.g?t.g.readyState:0}Z.ba=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}};Z.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};Z.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),t1(e)}};function $m(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Sw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}Z.Da=function(){return this.m};Z.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function o1(t){let e="";return Xh(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function gd(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=o1(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Be(t,e,n))}function yi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Aw(t){this.za=0,this.l=[],this.h=new Kl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=yi("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=yi("baseRetryDelayMs",5e3,t),this.$a=yi("retryDelaySeedMs",1e4,t),this.Ya=yi("forwardChannelMaxRetries",2,t),this.ra=yi("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new ww(t&&t.concurrentRequestLimit),this.Ca=new Jx,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}Z=Aw.prototype;Z.ma=8;Z.G=1;function pd(t){if(Dw(t),t.G==3){var e=t.V++,n=Un(t.F);Be(n,"SID",t.J),Be(n,"RID",e),Be(n,"TYPE","terminate"),Fo(t,n),e=new Mo(t,t.h,e,void 0),e.K=2,e.v=Xl(Un(n)),n=!1,fe.navigator&&fe.navigator.sendBeacon&&(n=fe.navigator.sendBeacon(e.v.toString(),"")),!n&&fe.Image&&(new Image().src=e.v,n=!0),n||(e.g=Vw(e.l,null),e.g.ea(e.v)),e.F=Date.now(),No(e)}Lw(t)}Z.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function eu(t){t.g&&(yd(t),t.g.cancel(),t.g=null)}function Dw(t){eu(t),t.u&&(fe.clearTimeout(t.u),t.u=null),al(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&fe.clearTimeout(t.m),t.m=null)}function Yu(t,e){t.l.push(new Qx(t.Za++,e)),t.G==3&&tu(t)}function tu(t){bw(t.i)||t.m||(t.m=!0,sd(t.Ha,t),t.C=0)}function a1(t,e){return _w(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Ro(ct(t.Ha,t,e),Pw(t,t.C)),t.C++,!0)}Z.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new Mo(this,this.h,t,void 0);let i=this.s;if(this.P&&(i?(i=Hy(i),zy(i,this.P)):i=this.P),this.o===null&&(s.H=i),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Rw(this,s,e),n=Un(this.F),Be(n,"RID",t),Be(n,"CVER",22),this.D&&Be(n,"X-HTTP-Session-Id",this.D),Fo(this,n),this.o&&i&&gd(n,this.o,i),dd(this.i,s),this.Ra&&Be(n,"TYPE","init"),this.ja?(Be(n,"$req",e),Be(n,"SID","null"),s.$=!0,Wc(s,n,null)):Wc(s,n,e),this.G=2}}else this.G==3&&(t?Um(this,t):this.l.length==0||bw(this.i)||Um(this))};function Um(t,e){var n;e?n=e.m:n=t.V++;const r=Un(t.F);Be(r,"SID",t.J),Be(r,"RID",n),Be(r,"AID",t.U),Fo(t,r),t.o&&t.s&&gd(r,t.o,t.s),n=new Mo(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Rw(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),dd(t.i,n),Wc(n,r,e)}function Fo(t,e){t.j&&cd({},function(n,r){Be(e,r,n)})}function Rw(t,e,n){n=Math.min(t.l.length,n);var r=t.j?ct(t.j.Oa,t.j,t):null;e:{var s=t.l;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].h;const c=s[l].g;if(u-=i,0>u)i=Math.max(0,s[l].h-100),a=!1;else try{Zx(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function Ow(t){t.g||t.u||(t.Y=1,sd(t.Ga,t),t.A=0)}function vd(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Ro(ct(t.Ga,t),Pw(t,t.A)),t.A++,!0)}Z.Ga=function(){if(this.u=null,Mw(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Ro(ct(this.bb,this),t)}};Z.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ct(10),eu(this),Mw(this))};function yd(t){t.B!=null&&(fe.clearTimeout(t.B),t.B=null)}function Mw(t){t.g=new Mo(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Un(t.oa);Be(e,"RID","rpc"),Be(e,"SID",t.J),Be(e,"CI",t.N?"0":"1"),Be(e,"AID",t.U),Fo(t,e),Be(e,"TYPE","xmlhttp"),t.o&&t.s&&gd(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Xl(Un(e)),n.s=null,n.U=!0,hw(n,t)}Z.ab=function(){this.v!=null&&(this.v=null,eu(this),vd(this),Ct(19))};function al(t){t.v!=null&&(fe.clearTimeout(t.v),t.v=null)}function Nw(t,e){var n=null;if(t.g==e){al(t),yd(t),t.g=null;var r=2}else if(Qc(t.i,e))n=e.D,Iw(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=Gl(),ht(r,new aw(r,n)),tu(t)}else Ow(t);else if(s=e.o,s==3||s==0&&0<t.I||!(r==1&&a1(t,e)||r==2&&vd(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:$r(t,5);break;case 4:$r(t,10);break;case 3:$r(t,6);break;default:$r(t,2)}}}function Pw(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function $r(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=ct(t.jb,t);n||(n=new Zr("//www.google.com/images/cleardot.gif"),fe.location&&fe.location.protocol=="http"||sl(n,"https"),Xl(n)),e1(n.toString(),r)}else Ct(2);t.G=0,t.j&&t.j.va(e),Lw(t),Dw(t)}Z.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ct(2)):(this.h.info("Failed to ping google.com"),Ct(1))};function Lw(t){t.G=0,t.I=-1,t.j&&((Ew(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Qh(t.l),t.l.length=0),t.j.ua())}function Fw(t,e,n){let r=qx(n);if(r.i!="")e&&il(r,e+"."+r.i),ol(r,r.m);else{const s=fe.location;r=jx(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,n)}return t.aa&&Xh(t.aa,function(s,i){Be(r,i,s)}),e=t.D,n=t.sa,e&&n&&Be(r,e,n),Be(r,"VER",t.ma),Fo(t,r),r}function Vw(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Je(new Po({ib:!0})):new Je(t.qa),e.L=t.H,e}function Bw(){}Z=Bw.prototype;Z.xa=function(){};Z.wa=function(){};Z.va=function(){};Z.ua=function(){};Z.Oa=function(){};function ll(){if(Gs&&!(10<=Number(bx)))throw Error("Environmental error: no available transport.")}ll.prototype.g=function(t,e){return new $t(t,e)};function $t(t,e){it.call(this),this.g=new Aw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!tl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tl(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ai(this)}ft($t,it);$t.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),sd(ct(t.hb,t,e))),Ct(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Fw(t,null,t.W),tu(t)};$t.prototype.close=function(){pd(this.g)};$t.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Yu(this.g,e)}else this.v?(e={},e.__data__=rd(t),Yu(this.g,e)):Yu(this.g,t)};$t.prototype.M=function(){this.g.j=null,delete this.j,pd(this.g),delete this.g,$t.Z.M.call(this)};function $w(t){ld.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ft($w,ld);function Uw(){ud.call(this),this.status=1}ft(Uw,ud);function ai(t){this.g=t}ft(ai,Bw);ai.prototype.xa=function(){ht(this.g,"a")};ai.prototype.wa=function(t){ht(this.g,new $w(t))};ai.prototype.va=function(t){ht(this.g,new Uw)};ai.prototype.ua=function(){ht(this.g,"b")};ll.prototype.createWebChannel=ll.prototype.g;$t.prototype.send=$t.prototype.u;$t.prototype.open=$t.prototype.m;$t.prototype.close=$t.prototype.close;Wl.NO_ERROR=0;Wl.TIMEOUT=8;Wl.HTTP_ERROR=6;lw.COMPLETE="complete";uw.EventType=Oo;Oo.OPEN="a";Oo.CLOSE="b";Oo.ERROR="c";Oo.MESSAGE="d";it.prototype.listen=it.prototype.N;Je.prototype.listenOnce=Je.prototype.O;Je.prototype.getLastError=Je.prototype.La;Je.prototype.getLastErrorCode=Je.prototype.Da;Je.prototype.getStatus=Je.prototype.ba;Je.prototype.getResponseJson=Je.prototype.Qa;Je.prototype.getResponseText=Je.prototype.ga;Je.prototype.send=Je.prototype.ea;var l1=function(){return new ll},u1=function(){return Gl()},Qu=Wl,c1=lw,h1=cs,qm={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},d1=Po,oa=uw,f1=Je;const jm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let li="9.9.4";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new Kh("@firebase/firestore");function Xc(){return es.logLevel}function j(t,...e){if(es.logLevel<=xe.DEBUG){const n=e.map(wd);es.debug(`Firestore (${li}): ${t}`,...n)}}function St(t,...e){if(es.logLevel<=xe.ERROR){const n=e.map(wd);es.error(`Firestore (${li}): ${t}`,...n)}}function Jc(t,...e){if(es.logLevel<=xe.WARN){const n=e.map(wd);es.warn(`Firestore (${li}): ${t}`,...n)}}function wd(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${li}) INTERNAL ASSERTION FAILED: `+t;throw St(e),new Error(e)}function ge(t,e){t||oe()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class p1{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new on;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new on,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new on)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string"),new m1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new It(e)}}class v1{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s,this.type="FirstParty",this.user=It.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ge(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class y1{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s}getToken(){return Promise.resolve(new v1(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class w1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b1{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=i=>{i.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?s(i):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string"),this.A=n.token,new w1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_1(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function Ws(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function jw(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new He(0,0))}static max(){return new ce(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return co.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof co?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends co{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const I1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends co{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return I1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ee(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ee(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Re.fromString(e))}static fromName(e){return new Q(Re.fromString(e).popFirst(5))}static empty(){return new Q(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Re(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Zc(t){return t.fields.find(e=>e.kind===2)}function Dr(t){return t.fields.filter(e=>e.kind!==2)}Hw.UNKNOWN_ID=-1;class E1{constructor(e,n){this.fieldPath=e,this.kind=n}}class ul{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ul(0,Ut.min())}}function T1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new Ut(s,Q.empty(),e)}function zw(t){return new Ut(t.readTime,t.key,-1)}class Ut{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ut(ce.min(),Q.empty(),-1)}static max(){return new Ut(ce.max(),Q.empty(),-1)}}function bd(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hs(t){if(t.code!==P.FAILED_PRECONDITION||t.message!==Kw)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new T((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof T?n:T.resolve(n)}catch(n){return T.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):T.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):T.reject(n)}static resolve(e){return new T((n,r)=>{n(e)})}static reject(e){return new T((n,r)=>{r(e)})}static waitFor(e){return new T((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=T.resolve(!1);for(const r of e)n=n.next(s=>s?T.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new T((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new T((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new on,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new ji(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=_d(r.target.error);this.P.reject(new ji(e,s))}}static open(e,n,r,s){try{return new nu(n,e.transaction(s,r))}catch(i){throw new ji(n,i)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new k1(n)}}class Pn{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Pn.D(Ke())===12.2&&St("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),Nr(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Ly())return!1;if(Pn.N())return!0;const e=Ke(),n=Pn.D(e),r=0<n&&n<10,s=Pn.k(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static N(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.M)==="YES"}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ji(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ee(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ee(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ji(e,o))},s.onupgradeneeded=i=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.S.$(o,s.transaction,i.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.F(e);const a=nu.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(u=>(a.V(),u)).catch(u=>(a.abort(u),T.reject(u))).toPromise();return l.catch(()=>{}),await a.v,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(j("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class S1{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Nr(this.U.delete())}}class ji extends ee{constructor(e,n){super(P.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function _r(t){return t.name==="IndexedDbTransactionError"}class k1{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(j("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nr(r)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),Nr(this.store.add(e))}get(e){return Nr(this.store.get(e)).next(n=>(n===void 0&&(n=null),j("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),Nr(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),Nr(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const s=this.cursor(r),i=[];return this.H(s,(o,a)=>{i.push(a)}).next(()=>i)}{const s=this.store.getAll(r.range);return new T((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new T((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Y(e,n){j("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}tt(e){const n=this.cursor({});return new T((r,s)=>{n.onerror=i=>{const o=_d(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new T((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new S1(a),u=n(a.primaryKey,a.value,l);if(u instanceof T){const c=u.catch(h=>(l.done(),T.reject(h)));r.push(c)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>T.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Nr(t){return new T((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=_d(r.target.error);n(s)}})}let Hm=!1;function _d(t){const e=Pn.D(Ke());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hm||(Hm=!0,setTimeout(()=>{throw r},0)),r}}return t}class C1{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){j("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{j("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){_r(n)?j("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await hs(n)}await this.nt(1)})}}class x1{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let s=n,i=!0;return T.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(s,i)).next(a=>(j("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=zw(i);bd(o,r)>0&&(r=o)}),new Ut(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ww(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.at=-1;class Ze{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new aa(this.root,e,this.comparator,!0)}}class aa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:ut.RED,this.left=s!=null?s:ut.EMPTY,this.right=i!=null?i:ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(t,e,n,r,s){return this}insert(t,e,n){return new ut(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Km(this.data.getIterator())}getIteratorFrom(e){return new Km(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Oe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Oe(this.comparator);return n.data=e,n}}class Km{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new Oe(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ws(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new ot(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const A1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(ge(!!t),typeof t=="string"){let e=0;const n=A1.exec(t);if(ge(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qw(t){const e=t.mapValue.fields.__previous_value__;return Yw(e)?Qw(e):e}function ho(t){const e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,r,s,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class ns{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ns("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ns&&e.projectId===this.projectId&&e.database===this.database}}function ru(t){return t==null}function fo(t){return t===0&&1/t==-1/0}function R1(t){return typeof t=="number"&&Number.isInteger(t)&&!fo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ka={nullValue:"NULL_VALUE"};function rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yw(t)?4:Xw(t)?9007199254740991:10:oe()}function kn(t,e){if(t===e)return!0;const n=rs(t);if(n!==rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ho(t).isEqual(ho(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=gr(r.timestampValue),o=gr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ts(r.bytesValue).isEqual(ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return ze(r.geoPointValue.latitude)===ze(s.geoPointValue.latitude)&&ze(r.geoPointValue.longitude)===ze(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ze(r.integerValue)===ze(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=ze(r.doubleValue),o=ze(s.doubleValue);return i===o?fo(i)===fo(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Ws(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(zm(i)!==zm(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!kn(i[a],o[a])))return!1;return!0}(t,e);default:return oe()}}function mo(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function pr(t,e){if(t===e)return 0;const n=rs(t),r=rs(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=ze(s.integerValue||s.doubleValue),a=ze(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Gm(t.timestampValue,e.timestampValue);case 4:return Gm(ho(t),ho(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(s,i){const o=ts(s),a=ts(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=we(o[l],a[l]);if(u!==0)return u}return we(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=we(ze(s.latitude),ze(i.latitude));return o!==0?o:we(ze(s.longitude),ze(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=pr(o[l],a[l]);if(u)return u}return we(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===or.mapValue&&i===or.mapValue)return 0;if(s===or.mapValue)return 1;if(i===or.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=we(a[c],u[c]);if(h!==0)return h;const d=pr(o[a[c]],l[u[c]]);if(d!==0)return d}return we(a.length,u.length)}(t.mapValue,e.mapValue);default:throw oe()}}function Gm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=gr(t),r=gr(e),s=we(n.seconds,r.seconds);return s!==0?s:we(n.nanos,r.nanos)}function Fs(t){return eh(t)}function eh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=gr(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ts(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Q.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=eh(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${eh(r.fields[a])}`;return i+"}"}(t.mapValue):oe();var e,n}function Id(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function th(t){return!!t&&"integerValue"in t}function go(t){return!!t&&"arrayValue"in t}function Wm(t){return!!t&&"nullValue"in t}function Ym(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ca(t){return!!t&&"mapValue"in t}function Hi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Xw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function O1(t){return"nullValue"in t?ka:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Id(ns.empty(),Q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:oe()}function M1(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Id(ns.empty(),Q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?or:oe()}function Qm(t,e){const n=pr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Xm(t,e){const n=pr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.value=e}static empty(){return new yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ca(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hi(n)}setAll(e){let n=Qe.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Hi(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ca(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ca(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ds(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new yt(Hi(this.value))}}function Jw(t){const e=[];return ds(t.fields,(n,r)=>{const s=new Qe([n]);if(Ca(r)){const i=Jw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n,r,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new qe(e,0,ce.min(),ce.min(),yt.empty(),0)}static newFoundDocument(e,n,r){return new qe(e,1,n,ce.min(),r,0)}static newNoDocument(e,n){return new qe(e,2,n,ce.min(),yt.empty(),0)}static newUnknownDocument(e,n){return new qe(e,3,n,ce.min(),yt.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qe(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function Jm(t,e=null,n=[],r=[],s=null,i=null,o=null){return new N1(t,e,n,r,s,i,o)}function ss(t){const e=ve(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+Fs(s.value);var s}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fs(r)).join(",")),e.ht=n}return e.ht}function P1(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Fs(r.value)}`;var r}).join(", ")}]`),ru(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Fs(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Fs(n)).join(",")),`Target(${e})`}function Vo(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!j1(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!kn(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ng(t.startAt,e.startAt)&&ng(t.endAt,e.endAt)}function cl(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function hl(t,e){return t.filters.filter(n=>n instanceof wt&&n.field.isEqual(e))}function Zm(t,e,n){let r=ka,s=!0;for(const i of hl(t,e)){let o=ka,a=!0;switch(i.op){case"<":case"<=":o=O1(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=ka}Qm({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Qm({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function eg(t,e,n){let r=or,s=!0;for(const i of hl(t,e)){let o=or,a=!0;switch(i.op){case">=":case">":o=M1(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=or}Xm({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Xm({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}class wt extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,r):new L1(e,n,r):n==="array-contains"?new B1(e,r):n==="in"?new $1(e,r):n==="not-in"?new U1(e,r):n==="array-contains-any"?new q1(e,r):new wt(e,n,r)}static lt(e,n,r){return n==="in"?new F1(e,r):new V1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft(pr(n,this.value)):n!==null&&rs(this.value)===rs(n)&&this.ft(pr(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class L1 extends wt{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.ft(n)}}class F1 extends wt{constructor(e,n){super(e,"in",n),this.keys=Zw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class V1 extends wt{constructor(e,n){super(e,"not-in",n),this.keys=Zw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Zw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class B1 extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return go(n)&&mo(n.arrayValue,this.value)}}class $1 extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mo(this.value.arrayValue,n)}}class U1 extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!mo(this.value.arrayValue,n)}}class q1 extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!go(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mo(this.value.arrayValue,r))}}class Ys{constructor(e,n){this.position=e,this.inclusive=n}}class Vs{constructor(e,n="asc"){this.field=e,this.dir=n}}function j1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function tg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=pr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ng(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null,this.startAt,this.endAt}}function H1(t,e,n,r,s,i,o,a){return new Bo(t,e,n,r,s,i,o,a)}function su(t){return new Bo(t)}function rg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function tb(t){for(const e of t.filters)if(e.dt())return e.field;return null}function z1(t){return t.collectionGroup!==null}function po(t){const e=ve(t);if(e._t===null){e._t=[];const n=tb(e),r=eb(e);if(n!==null&&r===null)n.isKeyField()||e._t.push(new Vs(n)),e._t.push(new Vs(Qe.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Vs(Qe.keyField(),i))}}}return e._t}function ln(t){const e=ve(t);if(!e.wt)if(e.limitType==="F")e.wt=Jm(e.path,e.collectionGroup,po(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of po(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Vs(i.field,o))}const r=e.endAt?new Ys(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ys(e.startAt.position,e.startAt.inclusive):null;e.wt=Jm(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.wt}function nh(t,e,n){return new Bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function iu(t,e){return Vo(ln(t),ln(e))&&t.limitType===e.limitType}function nb(t){return`${ss(ln(t))}|lt:${t.limitType}`}function rh(t){return`Query(target=${P1(ln(t))}; limitType=${t.limitType})`}function Ed(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Q.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=tg(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,po(n),r)||n.endAt&&!function(s,i,o){const a=tg(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,po(n),r))}(t,e)}function K1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rb(t){return(e,n)=>{let r=!1;for(const s of po(t)){const i=G1(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function G1(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?pr(a,l):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fo(e)?"-0":e}}function ib(t){return{integerValue:""+t}}function W1(t,e){return R1(e)?ib(e):sb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this._=void 0}}function Y1(t,e,n){return t instanceof vo?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Qs?ab(t,e):t instanceof Xs?lb(t,e):function(r,s){const i=ob(r,s),o=sg(i)+sg(r.yt);return th(i)&&th(r.yt)?ib(o):sb(r.It,o)}(t,e)}function Q1(t,e,n){return t instanceof Qs?ab(t,e):t instanceof Xs?lb(t,e):n}function ob(t,e){return t instanceof yo?th(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class vo extends ou{}class Qs extends ou{constructor(e){super(),this.elements=e}}function ab(t,e){const n=ub(e);for(const r of t.elements)n.some(s=>kn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xs extends ou{constructor(e){super(),this.elements=e}}function lb(t,e){let n=ub(e);for(const r of t.elements)n=n.filter(s=>!kn(s,r));return{arrayValue:{values:n}}}class yo extends ou{constructor(e,n){super(),this.It=e,this.yt=n}}function sg(t){return ze(t.integerValue||t.doubleValue)}function ub(t){return go(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.field=e,this.transform=n}}function J1(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Qs&&r instanceof Qs||n instanceof Xs&&r instanceof Xs?Ws(n.elements,r.elements,kn):n instanceof yo&&r instanceof yo?kn(n.yt,r.yt):n instanceof vo&&r instanceof vo}(t.transform,e.transform)}class Z1{constructor(e,n){this.version=e,this.transformResults=n}}class xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class au{}function cb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lu(t.key,xt.none()):new ui(t.key,t.data,xt.none());{const n=t.data,r=yt.empty();let s=new Oe(Qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new zn(t.key,r,new Ft(s.toArray()),xt.none())}}function eA(t,e,n){t instanceof ui?function(r,s,i){const o=r.value.clone(),a=og(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof zn?function(r,s,i){if(!xa(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=og(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(hb(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function zi(t,e,n,r){return t instanceof ui?function(s,i,o,a){if(!xa(s.precondition,i))return o;const l=s.value.clone(),u=ag(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof zn?function(s,i,o,a){if(!xa(s.precondition,i))return o;const l=ag(s.fieldTransforms,a,i),u=i.data;return u.setAll(hb(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,i,o){return xa(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function tA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ob(r.transform,s||null);i!=null&&(n===null&&(n=yt.empty()),n.set(r.field,i))}return n||null}function ig(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Ws(n,r,(s,i)=>J1(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ui extends au{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zn extends au{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function hb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function og(t,e,n){const r=new Map;ge(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Q1(o,a,n[s]))}return r}function ag(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Y1(i,o,e))}return r}class lu extends au{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class db extends au{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,Te;function rA(t){switch(t){default:return oe();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function fb(t){if(t===void 0)return St("GRPC error has no .code"),P.UNKNOWN;switch(t){case We.OK:return P.OK;case We.CANCELLED:return P.CANCELLED;case We.UNKNOWN:return P.UNKNOWN;case We.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case We.INTERNAL:return P.INTERNAL;case We.UNAVAILABLE:return P.UNAVAILABLE;case We.UNAUTHENTICATED:return P.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case We.NOT_FOUND:return P.NOT_FOUND;case We.ALREADY_EXISTS:return P.ALREADY_EXISTS;case We.PERMISSION_DENIED:return P.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case We.ABORTED:return P.ABORTED;case We.OUT_OF_RANGE:return P.OUT_OF_RANGE;case We.UNIMPLEMENTED:return P.UNIMPLEMENTED;case We.DATA_LOSS:return P.DATA_LOSS;default:return oe()}}(Te=We||(We={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Ww(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new Ze(Q.comparator);function Lt(){return sA}const mb=new Ze(Q.comparator);function Oi(...t){let e=mb;for(const n of t)e=e.insert(n.key,n);return e}function gb(t){let e=mb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wn(){return Ki()}function pb(){return Ki()}function Ki(){return new Ir(t=>t.toString(),(t,e)=>t.isEqual(e))}const iA=new Ze(Q.comparator),oA=new Oe(Q.comparator);function _e(...t){let e=oA;for(const n of t)e=e.add(n);return e}const aA=new Oe(we);function vb(){return aA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,$o.createSynthesizedTargetChangeForCurrentChange(e,n)),new uu(ce.min(),r,vb(),Lt(),_e())}}class $o{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new $o(ot.EMPTY_BYTE_STRING,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n,r,s){this.Tt=e,this.removedTargetIds=n,this.key=r,this.Et=s}}class yb{constructor(e,n){this.targetId=e,this.At=n}}class wb{constructor(e,n,r=ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class lg{constructor(){this.Rt=0,this.bt=cg(),this.Pt=ot.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=_e(),n=_e(),r=_e();return this.bt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new $o(this.Pt,this.vt,e,n,r)}Nt(){this.Vt=!1,this.bt=cg()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class lA{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Lt(),this.qt=ug(),this.Kt=new Oe(we)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const r=this.zt(n);switch(e.state){case 0:this.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),r.Ct(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((r,s)=>{this.Ht(s)&&n(s)})}Yt(e){const n=e.targetId,r=e.At.count,s=this.Xt(n);if(s){const i=s.target;if(cl(i))if(r===0){const o=new Q(i.path);this.jt(n,o,qe.newNoDocument(o,ce.min()))}else ge(r===1);else this.Zt(n)!==r&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&cl(a.target)){const l=new Q(a.target.path);this.Ut.get(l)!==null||this.ee(o,l)||this.jt(o,l,qe.newNoDocument(l,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let r=_e();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(r=r.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const s=new uu(e,n,this.Kt,this.Ut,r);return this.Ut=Lt(),this.qt=ug(),this.Kt=new Oe(we),s}Qt(e,n){if(!this.Ht(e))return;const r=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,n)?s.kt(n,1):s.Mt(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let n=this.Lt.get(e);return n||(n=new lg,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new Oe(we),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new lg),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function ug(){return new Ze(Q.comparator)}function cg(){return new Ze(Q.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),cA=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class hA{constructor(e,n){this.databaseId=e,this.gt=n}}function wo(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bb(t,e){return t.gt?e.toBase64():e.toUint8Array()}function dA(t,e){return wo(t,e.toTimestamp())}function Vt(t){return ge(!!t),ce.fromTimestamp(function(e){const n=gr(e);return new He(n.seconds,n.nanos)}(t))}function Td(t,e){return function(n){return new Re(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function _b(t){const e=Re.fromString(t);return ge(xb(e)),e}function dl(t,e){return Td(t.databaseId,e.path)}function zr(t,e){const n=_b(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(Eb(n))}function sh(t,e){return Td(t.databaseId,e)}function Ib(t){const e=_b(t);return e.length===4?Re.emptyPath():Eb(e)}function ih(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Eb(t){return ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hg(t,e,n){return{name:dl(t,e),fields:n.value.mapValue.fields}}function fA(t,e,n){const r=zr(t,e.name),s=Vt(e.updateTime),i=new yt({mapValue:{fields:e.fields}}),o=qe.newFoundDocument(r,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function mA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,u){return l.gt?(ge(u===void 0||typeof u=="string"),ot.fromBase64String(u||"")):(ge(u===void 0||u instanceof Uint8Array),ot.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?P.UNKNOWN:fb(l.code);return new ee(u,l.message||"")}(o);n=new wb(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=zr(t,r.document.name),i=Vt(r.document.updateTime),o=new yt({mapValue:{fields:r.document.fields}}),a=qe.newFoundDocument(s,i,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Aa(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=zr(t,r.document),i=r.readTime?Vt(r.readTime):ce.min(),o=qe.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Aa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=zr(t,r.document),i=r.removedTargetIds||[];n=new Aa([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new nA(s),o=r.targetId;n=new yb(o,i)}}return n}function fl(t,e){let n;if(e instanceof ui)n={update:hg(t,e.key,e.value)};else if(e instanceof lu)n={delete:dl(t,e.key)};else if(e instanceof zn)n={update:hg(t,e.key,e.data),updateMask:_A(e.fieldMask)};else{if(!(e instanceof db))return oe();n={verify:dl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof vo)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Qs)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Xs)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof yo)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:dA(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function oh(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?xt.updateTime(Vt(s.updateTime)):s.exists!==void 0?xt.exists(s.exists):xt.none()}(e.currentDocument):xt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)ge(o.setToServerValue==="REQUEST_TIME"),a=new vo;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];a=new Qs(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];a=new Xs(u)}else"increment"in o?a=new yo(i,o.increment):oe();const l=Qe.fromServerFormat(o.fieldPath);return new X1(l,a)}(t,s)):[];if(e.update){e.update.name;const s=zr(t,e.update.name),i=new yt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new Ft(l.map(u=>Qe.fromServerFormat(u)))}(e.updateMask);return new zn(s,i,o,n,r)}return new ui(s,i,n,r)}if(e.delete){const s=zr(t,e.delete);return new lu(s,n)}if(e.verify){const s=zr(t,e.verify);return new db(s,n)}return oe()}function gA(t,e){return t&&t.length>0?(ge(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?Vt(r.updateTime):Vt(s);return i.isEqual(ce.min())&&(i=Vt(s)),new Z1(i,r.transformResults||[])}(n,e))):[]}function Tb(t,e){return{documents:[sh(t,e.path)]}}function Sb(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=sh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=sh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(Ym(h.value))return{unaryFilter:{field:_s(h.field),op:"IS_NAN"}};if(Wm(h.value))return{unaryFilter:{field:_s(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(Ym(h.value))return{unaryFilter:{field:_s(h.field),op:"IS_NOT_NAN"}};if(Wm(h.value))return{unaryFilter:{field:_s(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_s(h.field),op:yA(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:_s(c.field),direction:vA(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,u){return l.gt||ru(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function kb(t){let e=Ib(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ge(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=Cb(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Vs(Rs(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,ru(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new Ys(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new Ys(d,h)}(n.endAt)),H1(e,s,o,i,a,"F",l,u)}function pA(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return oe()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Cb(t){return t?t.unaryFilter!==void 0?[bA(t)]:t.fieldFilter!==void 0?[wA(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Cb(e)).reduce((e,n)=>e.concat(n)):oe():[]}function vA(t){return uA[t]}function yA(t){return cA[t]}function _s(t){return{fieldPath:t.canonicalString()}}function Rs(t){return Qe.fromServerFormat(t.fieldPath)}function wA(t){return wt.create(Rs(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(t.fieldFilter.op),t.fieldFilter.value)}function bA(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Rs(t.unaryFilter.field);return wt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Rs(t.unaryFilter.field);return wt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rs(t.unaryFilter.field);return wt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Rs(t.unaryFilter.field);return wt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}function _A(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dg(e)),e=IA(t.get(n),e);return dg(e)}function IA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function dg(t){return t+""}function bn(t){const e=t.length;if(ge(e>=2),e===2)return ge(t.charAt(0)===""&&t.charAt(1)===""),Re.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&oe(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:oe()}i=o+2}return new Re(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t,e){return[t,At(e)]}function Ab(t,e,n){return[t,At(e),n]}const EA={},TA=["prefixPath","collectionGroup","readTime","documentId"],SA=["prefixPath","collectionGroup","documentId"],kA=["collectionGroup","readTime","prefixPath","documentId"],CA=["canonicalId","targetId"],xA=["targetId","path"],AA=["path","targetId"],DA=["collectionId","parent"],RA=["indexId","uid"],OA=["uid","sequenceNumber"],MA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NA=["indexId","uid","orderedDocumentKey"],PA=["userId","collectionPath","documentId"],LA=["userId","collectionPath","largestBatchId"],FA=["userId","collectionGroup","largestBatchId"],Db=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],VA=[...Db,"documentOverlays"],Rb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ob=Rb,BA=[...Ob,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends Gw{constructor(e,n){super(),this.ie=e,this.currentSequenceNumber=n}}function at(t,e){const n=ve(t);return Pn.O(n.ie,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pb();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=cb(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Ws(this.mutations,e.mutations,(n,r)=>ig(n,r))&&Ws(this.baseMutations,e.baseMutations,(n,r)=>ig(n,r))}}class kd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ge(e.mutations.length===r.length);let s=iA;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new kd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=ot.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.re=e}}function $A(t,e){let n;if(e.document)n=fA(t.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Q.fromSegments(e.noDocument.path),s=os(e.noDocument.readTime);n=qe.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return oe();{const r=Q.fromSegments(e.unknownDocument.path),s=os(e.unknownDocument.version);n=qe.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(r){const s=new He(r[0],r[1]);return ce.fromTimestamp(s)}(e.readTime)),n}function mg(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ml(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:dl(s,i.key),fields:i.data.value.mapValue.fields,updateTime:wo(s,i.version.toTimestamp())}}(t.re,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:is(e.version)};else{if(!e.isUnknownDocument())return oe();r.unknownDocument={path:n.path.toArray(),version:is(e.version)}}return r}function ml(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function is(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function os(t){const e=new He(t.seconds,t.nanoseconds);return ce.fromTimestamp(e)}function Pr(t,e){const n=(e.baseMutations||[]).map(i=>oh(t.re,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>oh(t.re,i)),s=He.fromMillis(e.localWriteTimeMs);return new Sd(e.batchId,s,n,r)}function Mi(t){const e=os(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?os(t.lastLimboFreeSnapshotVersion):ce.min();let r;var s;return t.query.documents!==void 0?(ge((s=t.query).documents.length===1),r=ln(su(Ib(s.documents[0])))):r=function(i){return ln(kb(i))}(t.query),new cr(r,t.targetId,0,t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function Nb(t,e){const n=is(e.snapshotVersion),r=is(e.lastLimboFreeSnapshotVersion);let s;s=cl(e.target)?Tb(t.re,e.target):Sb(t.re,e.target);const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ss(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Pb(t){const e=kb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nh(e,e.limit,"L"):e}function Xu(t,e){return new Cd(e.largestBatchId,oh(t.re,e.overlayMutation))}function gg(t,e){const n=e.path.lastSegment();return[t,At(e.path.popLast()),n]}function pg(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:is(r.readTime),documentKey:At(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{getBundleMetadata(e,n){return vg(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:os(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return vg(e).put({bundleId:(r=n).id,createTime:is(Vt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return yg(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:Pb(s.bundledQuery),readTime:os(s.readTime)};var s})}saveNamedQuery(e,n){return yg(e).put(function(r){return{name:r.name,readTime:is(Vt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function vg(t){return at(t,"bundles")}function yg(t){return at(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.It=e,this.userId=n}static oe(e,n){const r=n.uid||"";return new cu(e,r)}getOverlay(e,n){return wi(e).get(gg(this.userId,n)).next(r=>r?Xu(this.It,r):null)}getOverlays(e,n){const r=wn();return T.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Cd(n,o);s.push(this.ue(e,a))}),T.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(At(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(wi(e).Y("collectionPathOverlayIndex",a))}),T.waitFor(i)}getOverlaysForCollection(e,n,r){const s=wn(),i=At(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return wi(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Xu(this.It,l);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=wn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return wi(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=Xu(this.It,u);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>i)}ue(e,n){return wi(e).put(function(r,s,i){const[o,a,l]=gg(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:l,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:fl(r.re,i.mutation)}}(this.It,this.userId,n))}}function wi(t){return at(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){}ce(e,n){this.ae(e,n),n.he()}ae(e,n){if("nullValue"in e)this.le(n,5);else if("booleanValue"in e)this.le(n,10),n.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(n,15),n.fe(ze(e.integerValue));else if("doubleValue"in e){const r=ze(e.doubleValue);isNaN(r)?this.le(n,13):(this.le(n,15),fo(r)?n.fe(0):n.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(n,20),typeof r=="string"?n.de(r):(n.de(`${r.seconds||""}`),n.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,n),this.we(n);else if("bytesValue"in e)this.le(n,30),n.me(ts(e.bytesValue)),this.we(n);else if("referenceValue"in e)this.ge(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(n,45),n.fe(r.latitude||0),n.fe(r.longitude||0)}else"mapValue"in e?Xw(e)?this.le(n,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,n),this.we(n)):"arrayValue"in e?(this.pe(e.arrayValue,n),this.we(n)):oe()}_e(e,n){this.le(n,25),this.Ie(e,n)}Ie(e,n){n.de(e)}ye(e,n){const r=e.fields||{};this.le(n,55);for(const s of Object.keys(r))this._e(s,n),this.ae(r[s],n)}pe(e,n){const r=e.values||[];this.le(n,50);for(const s of r)this.ae(s,n)}ge(e,n){this.le(n,37),Q.fromName(e).path.forEach(r=>{this.le(n,60),this.Ie(r,n)})}le(e,n){e.fe(n)}we(e){e.fe(2)}}Lr.Te=new Lr;function qA(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function wg(t){const e=64-function(n){let r=0;for(let s=0;s<8;++s){const i=qA(255&n[s]);if(r+=i,i!==8)break}return r}(t);return Math.ceil(e/8)}class jA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ae(r.value),r=n.next();this.Re()}be(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Pe(r.value),r=n.next();this.ve()}Ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=n.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=n.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const n=this.Ce(e),r=wg(n);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Ne(e){const n=this.Ce(e),r=wg(n);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ae(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}Pe(e){const n=255&e;n===0?(this.Fe(0),this.Fe(255)):n===255?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class HA{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class zA{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class bi{constructor(){this.Be=new jA,this.Le=new HA(this.Be),this.Ue=new zA(this.Be)}seed(e){this.Be.seed(e)}qe(e){return e===0?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fr(this.indexId,this.documentKey,this.arrayValue,r)}}function kr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=bg(t.arrayValue,e.arrayValue),n!==0?n:(n=bg(t.directionalValue,e.directionalValue),n!==0?n:Q.comparator(t.documentKey,e.documentKey)))}function bg(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const n of e.filters){const r=n;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const n=Zc(e);if(n!==void 0&&!this.ze(n))return!1;const r=Dr(e);let s=0,i=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(this.je!==void 0){const o=r[s];if(!this.He(this.je,o)||!this.Je(this.Ge[i++],o))return!1;++s}for(;s<r.length;++s){const o=r[s];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}ze(e){for(const n of this.Qe)if(this.He(n,e))return!0;return!1}He(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Je(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.Ye=new xd}addToCollectionParentIndex(e,n){return this.Ye.add(n),T.resolve()}getCollectionParents(e,n){return T.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return T.resolve()}deleteFieldIndex(e,n){return T.resolve()}getDocumentsMatchingTarget(e,n){return T.resolve(null)}getIndexType(e,n){return T.resolve(0)}getFieldIndexes(e,n){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,n){return T.resolve(Ut.min())}getMinOffsetFromCollectionGroup(e,n){return T.resolve(Ut.min())}updateCollectionGroup(e,n,r){return T.resolve()}updateIndexEntries(e,n){return T.resolve()}}class xd{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Oe(Re.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Oe(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new Uint8Array(0);class WA{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new xd,this.Ze=new Ir(r=>ss(r),(r,s)=>Vo(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const i={collectionId:r,parent:At(s)};return _g(e).put(i)}return T.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[jw(n),""],!1,!0);return _g(e).W(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(bn(o.parent))}return r})}addFieldIndex(e,n){const r=ua(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Ii(e);return i.next(a=>{o.put(pg(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=ua(e),s=Ii(e),i=_i(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=_i(e);let s=!0;const i=new Map;return T.forEach(this.tn(n),o=>this.en(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=_e();const a=[];return T.forEach(i,(l,u)=>{var c;j("IndexedDbIndexManager",`Using index ${c=l,`id=${c.indexId}|cg=${c.collectionGroup}|f=${c.fields.map(_=>`${_.fieldPath}:${_.kind}`).join(",")}`} to execute ${ss(n)}`);const h=function(_,D){const M=Zc(D);if(M===void 0)return null;for(const I of hl(_,M.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(u,l),d=function(_,D){const M=new Map;for(const I of Dr(D))for(const E of hl(_,I.fieldPath))switch(E.op){case"==":case"in":M.set(I.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return M.set(I.fieldPath.canonicalString(),E.value),Array.from(M.values())}return null}(u,l),f=function(_,D){const M=[];let I=!0;for(const E of Dr(D)){const S=E.kind===0?Zm(_,E.fieldPath,_.startAt):eg(_,E.fieldPath,_.startAt);M.push(S.value),I&&(I=S.inclusive)}return new Ys(M,I)}(u,l),m=function(_,D){const M=[];let I=!0;for(const E of Dr(D)){const S=E.kind===0?eg(_,E.fieldPath,_.endAt):Zm(_,E.fieldPath,_.endAt);M.push(S.value),I&&(I=S.inclusive)}return new Ys(M,I)}(u,l),b=this.nn(l,u,f),p=this.nn(l,u,m),w=this.sn(l,u,d),y=this.rn(l.indexId,h,b,f.inclusive,p,m.inclusive,w);return T.forEach(y,_=>r.J(_,n.limit).next(D=>{D.forEach(M=>{const I=Q.fromSegments(M.documentKey);o.has(I)||(o=o.add(I),a.push(I))})}))}).next(()=>a)}return T.resolve(null)})}tn(e){let n=this.Ze.get(e);return n||(n=[e],this.Ze.set(e,n),n)}rn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const d=n?this.on(n[h/u]):la,f=this.un(e,d,r[h%u],s),m=this.cn(e,d,i[h%u],o),b=a.map(p=>this.un(e,d,p,!0));c.push(...this.createRange(f,m,b))}return c}un(e,n,r,s){const i=new Fr(e,Q.empty(),n,r);return s?i:i.Ke()}cn(e,n,r,s){const i=new Fr(e,Q.empty(),n,r);return s?i.Ke():i}en(e,n){const r=new KA(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;return T.forEach(this.tn(n),s=>this.en(e,s).next(i=>{i?r!==0&&i.fields.length<function(o){let a=new Oe(Qe.comparator),l=!1;for(const u of o.filters){const c=u;c.field.isKeyField()||(c.op==="array-contains"||c.op==="array-contains-any"?l=!0:a=a.add(c.field))}for(const u of o.orderBy)u.field.isKeyField()||(a=a.add(u.field));return a.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,n){const r=new bi;for(const s of Dr(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.qe(s.kind);Lr.Te.ce(i,o)}return r.$e()}on(e){const n=new bi;return Lr.Te.ce(e,n.qe(0)),n.$e()}hn(e,n){const r=new bi;return Lr.Te.ce(Id(this.databaseId,n),r.qe(function(s){const i=Dr(s);return i.length===0?0:i[i.length-1].kind}(e))),r.$e()}sn(e,n,r){if(r===null)return[];let s=[];s.push(new bi);let i=0;for(const o of Dr(e)){const a=r[i++];for(const l of s)if(this.ln(n,o.fieldPath)&&go(a))s=this.fn(s,o,a);else{const u=l.qe(o.kind);Lr.Te.ce(a,u)}}return this.dn(s)}nn(e,n,r){return this.sn(e,n,r.position)}dn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].$e();return n}fn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new bi;l.seed(a.$e()),Lr.Te.ce(o,l.qe(n.kind)),i.push(l)}return i}ln(e,n){return!!e.filters.find(r=>r instanceof wt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=ua(e),s=Ii(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(i=>{const o=[];return T.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(u,c){const h=c?new ul(c.sequenceNumber,new Ut(os(c.readTime),new Q(bn(c.documentKey)),c.largestBatchId)):ul.empty(),d=u.fields.map(([f,m])=>new E1(Qe.fromServerFormat(f),m));return new Hw(u.indexId,u.collectionGroup,d,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:we(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=ua(e),i=Ii(e);return this._n(e).next(o=>s.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>T.forEach(a,l=>i.put(pg(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return T.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?T.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),T.forEach(a,l=>this.wn(e,s,l).next(u=>{const c=this.mn(i,l);return u.isEqual(c)?T.resolve():this.gn(e,i,l,u,c)}))))})}yn(e,n,r,s){return _i(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,n.key),documentKey:n.key.path.toArray()})}pn(e,n,r,s){return _i(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=_i(e);let i=new Oe(kr);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,n)])},(o,a)=>{i=i.add(new Fr(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}mn(e,n){let r=new Oe(kr);const s=this.an(n,e);if(s==null)return r;const i=Zc(n);if(i!=null){const o=e.data.field(i.fieldPath);if(go(o))for(const a of o.arrayValue.values||[])r=r.add(new Fr(n.indexId,e.key,this.on(a),s))}else r=r.add(new Fr(n.indexId,e.key,la,s));return r}gn(e,n,r,s,i){j("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,u,c,h){const d=a.getIterator(),f=l.getIterator();let m=bs(d),b=bs(f);for(;m||b;){let p=!1,w=!1;if(m&&b){const y=u(m,b);y<0?w=!0:y>0&&(p=!0)}else m!=null?w=!0:p=!0;p?(c(b),b=bs(f)):w?(h(m),m=bs(d)):(m=bs(d),b=bs(f))}}(s,i,kr,a=>{o.push(this.yn(e,n,r,a))},a=>{o.push(this.pn(e,n,r,a))}),T.waitFor(o)}_n(e){let n=1;return Ii(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>kr(o,a)).filter((o,a,l)=>!a||kr(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=kr(o,e),l=kr(o,n);if(a===0)s[0]=e.Ke();else if(a>0&&l<0)s.push(o),s.push(o.Ke());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2)i.push(IDBKeyRange.bound([s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,la,[]],[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,la,[]]));return i}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ig)}getMinOffset(e,n){return T.mapArray(this.tn(n),r=>this.en(e,r).next(s=>s||oe())).next(Ig)}}function _g(t){return at(t,"collectionParents")}function _i(t){return at(t,"indexEntries")}function ua(t){return at(t,"indexConfiguration")}function Ii(t){return at(t,"indexState")}function Ig(t){ge(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;bd(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Ut(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Rt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},(c,h,d)=>(a++,d.delete()));i.push(l.next(()=>{ge(a===1)}));const u=[];for(const c of n.mutations){const h=Ab(e,c.key.path,n.batchId);i.push(s.delete(h)),u.push(c.key)}return T.waitFor(i).next(()=>u)}function gl(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw oe();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(41943040,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);class hu{constructor(e,n,r,s){this.userId=e,this.It=n,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,n,r,s){ge(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new hu(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yn(e).Z({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=xs(e),o=Yn(e);return o.add({}).next(a=>{ge(typeof a=="number");const l=new Sd(a,n,r,s),u=function(d,f,m){const b=m.baseMutations.map(w=>fl(d.re,w)),p=m.mutations.map(w=>fl(d.re,w));return{userId:f,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:b,mutations:p}}(this.It,this.userId,l),c=[];let h=new Oe((d,f)=>we(d.canonicalString(),f.canonicalString()));for(const d of s){const f=Ab(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(u)),c.push(i.put(f,EA))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.In[a]=l.keys()}),T.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Yn(e).get(n).next(r=>r?(ge(r.userId===this.userId),Pr(this.It,r)):null)}Tn(e,n){return this.In[n]?T.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.In[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Yn(e).Z({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(ge(a.batchId>=r),i=Pr(this.It,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Yn(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yn(e).W("userMutationsIndex",n).next(r=>r.map(s=>Pr(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Da(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return xs(e).Z({range:s},(o,a,l)=>{const[u,c,h]=o,d=bn(c);if(u===this.userId&&n.path.isEqual(d))return Yn(e).get(h).next(f=>{if(!f)throw oe();ge(f.userId===this.userId),i.push(Pr(this.It,f))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(we);const s=[];return n.forEach(i=>{const o=Da(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=xs(e).Z({range:a},(u,c,h)=>{const[d,f,m]=u,b=bn(f);d===this.userId&&i.path.isEqual(b)?r=r.add(m):h.done()});s.push(l)}),T.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Da(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Oe(we);return xs(e).Z({range:o},(l,u,c)=>{const[h,d,f]=l,m=bn(d);h===this.userId&&r.isPrefixOf(m)?m.length===s&&(a=a.add(f)):c.done()}).next(()=>this.En(e,a))}En(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Yn(e).get(i).next(o=>{if(o===null)throw oe();ge(o.userId===this.userId),r.push(Pr(this.It,o))}))}),T.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return Lb(e.ie,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),T.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return T.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return xs(e).Z({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=bn(i[1]);s.push(l)}else a.done()}).next(()=>{ge(s.length===0)})})}containsKey(e,n){return Fb(e,this.userId,n)}Rn(e){return Vb(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Fb(t,e,n){const r=Da(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return xs(t).Z({range:i,X:!0},(a,l,u)=>{const[c,h,d]=a;c===e&&h===s&&(o=!0),u.done()}).next(()=>o)}function Yn(t){return at(t,"mutations")}function xs(t){return at(t,"documentMutations")}function Vb(t){return at(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new as(0)}static vn(){return new as(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.referenceDelegate=e,this.It=n}allocateTargetId(e){return this.Vn(e).next(n=>{const r=new as(n.highestTargetId);return n.highestTargetId=r.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>ce.fromTimestamp(new He(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Sn(e,s)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(n,r),this.Sn(e,r))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Is(e).delete(n.targetId)).next(()=>this.Vn(e)).next(r=>(ge(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Is(e).Z((o,a)=>{const l=Mi(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>T.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Is(e).Z((r,s)=>{const i=Mi(s);n(i)})}Vn(e){return Tg(e).get("targetGlobalKey").next(n=>(ge(n!==null),n))}Sn(e,n){return Tg(e).put("targetGlobalKey",n)}Dn(e,n){return Is(e).put(Nb(this.It,n))}Cn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ss(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Is(e).Z({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const u=Mi(a);Vo(n,u.target)&&(i=u,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=er(e);return n.forEach(o=>{const a=At(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),T.waitFor(s)}removeMatchingKeys(e,n,r){const s=er(e);return T.forEach(n,i=>{const o=At(i.path);return T.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=er(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=er(e);let i=_e();return s.Z({range:r,X:!0},(o,a,l)=>{const u=bn(o[1]),c=new Q(u);i=i.add(c)}).next(()=>i)}containsKey(e,n){const r=At(n.path),s=IDBKeyRange.bound([r],[jw(r)],!1,!0);let i=0;return er(e).Z({index:"documentTargetsIndex",X:!0,range:s},([o,a],l,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}se(e,n){return Is(e).get(n).next(r=>r?Mi(r):null)}}function Is(t){return at(t,"targets")}function Tg(t){return at(t,"targetGlobal")}function er(t){return at(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg([t,e],[n,r]){const s=we(t,n);return s===0?we(e,r):s}class QA{constructor(e){this.xn=e,this.buffer=new Oe(Sg),this.Nn=0}kn(){return++this.Nn}Mn(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Sg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.On=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return this.On!==null}Fn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.On=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_r(n)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await hs(n)}await this.Fn(3e5)})}}class JA{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return T.resolve(Kt.at);const r=new QA(n);return this.$n.forEachTarget(e,s=>r.Mn(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.Mn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.$n.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),T.resolve(Eg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Eg):this.Un(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,n){let r,s,i,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Xc()<=xe.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),T.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.db=e,this.garbageCollector=function(r,s){return new JA(r,s)}(this,n)}Bn(e){const n=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}qn(e){let n=0;return this.Ln(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(r,s)=>n(s))}addReference(e,n,r){return ca(e,r)}removeReference(e,n,r){return ca(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ca(e,n)}Gn(e,n){return function(r,s){let i=!1;return Vb(r).tt(o=>Fb(r,o,s).next(a=>(a&&(i=!0),T.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Kn(e,(o,a)=>{if(a<=n){const l=this.Gn(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ce.min()),er(e).delete([0,At(o.path)])))});s.push(l)}}).next(()=>T.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ca(e,n)}Kn(e,n){const r=er(e);let s,i=Kt.at;return r.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==Kt.at&&n(new Q(bn(s)),i),i=u,s=l):i=Kt.at}).next(()=>{i!==Kt.at&&n(new Q(bn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ca(t,e){return er(t).put(function(n,r){return{targetId:0,path:At(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.changes=new Ir(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?T.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Cr(e).put(r)}removeEntry(e,n,r){return Cr(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],ml(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Qn(e,r)))}getEntry(e,n){let r=qe.newInvalidDocument(n);return Cr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ei(n))},(s,i)=>{r=this.jn(n,i)}).next(()=>r)}Wn(e,n){let r={size:0,document:qe.newInvalidDocument(n)};return Cr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ei(n))},(s,i)=>{r={document:this.jn(n,i),size:gl(i)}}).next(()=>r)}getEntries(e,n){let r=Lt();return this.zn(e,n,(s,i)=>{const o=this.jn(s,i);r=r.insert(s,o)}).next(()=>r)}Hn(e,n){let r=Lt(),s=new Ze(Q.comparator);return this.zn(e,n,(i,o)=>{const a=this.jn(i,o);r=r.insert(i,a),s=s.insert(i,gl(o))}).next(()=>({documents:r,Jn:s}))}zn(e,n,r){if(n.isEmpty())return T.resolve();let s=new Oe(xg);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ei(s.first()),Ei(s.last())),o=s.getIterator();let a=o.getNext();return Cr(e).Z({index:"documentKeyIndex",range:i},(l,u,c)=>{const h=Q.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&xg(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.j(Ei(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const s=[n.popLast().toArray(),n.lastSegment(),ml(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],i=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cr(e).W(IDBKeyRange.bound(s,i,!0)).next(o=>{let a=Lt();for(const l of o){const u=this.jn(Q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(u.key,u)}return a})}getAllFromCollectionGroup(e,n,r,s){let i=Lt();const o=Cg(n,r),a=Cg(n,Ut.max());return Cr(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.jn(Q.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(h.key,h),i.size===s&&c.done()}).next(()=>i)}newChangeBuffer(e){return new tD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return kg(e).get("remoteDocumentGlobalKey").next(n=>(ge(!!n),n))}Qn(e,n){return kg(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const r=$A(this.It,n);if(!(r.isNoDocument()&&r.version.isEqual(ce.min())))return r}return qe.newInvalidDocument(e)}}function $b(t){return new eD(t)}class tD extends Bb{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new Ir(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Oe((i,o)=>we(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Xn.get(i);if(n.push(this.Yn.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=mg(this.Yn.It,o);s=s.add(i.path.popLast()),r+=gl(l)-a.size,n.push(this.Yn.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=mg(this.Yn.It,o.convertToNoDocument(ce.min()));n.push(this.Yn.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Yn.updateMetadata(e,r)),T.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(r=>(this.Xn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:r,Jn:s})=>(s.forEach((i,o)=>{this.Xn.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function kg(t){return at(t,"remoteDocumentGlobal")}function Cr(t){return at(t,"remoteDocumentsV14")}function Ei(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Cg(t,e){const n=e.documentKey.path.toArray();return[t,ml(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function xg(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=we(n[i],r[i]),s)return s;return s=we(n.length,r.length),s||(s=we(n[n.length-2],r[r.length-2]),s||we(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.getBaseDocument(e,n,r))).next(s=>(r!==null&&zi(r.mutation,s,Ft.empty(),He.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const s=wn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Oi();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=wn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Lt();const o=Ki(),a=Ki();return n.forEach((l,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof zn)?i=i.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),zi(c.mutation,u,c.mutation.getFieldMask(),He.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new nD(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ki();let s=new Ze((o,a)=>o-a),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Ft.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(s.get(a.batchId)||_e()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=pb();c.forEach(d=>{if(!i.has(d)){const f=cb(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return T.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):z1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):T.resolve(wn());let a=-1,l=i;return o.next(u=>T.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?T.resolve():this.getBaseDocument(e,c,h).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,_e())).next(c=>({batchId:a,changes:gb(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=Oi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Oi();return this.indexManager.getCollectionParents(e,s).next(o=>T.forEach(o,a=>{const l=function(u,c){return new Bo(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(i=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,qe.newInvalidDocument(u)))});let o=Oi();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&zi(u.mutation,l,Ft.empty(),He.now()),Ed(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):T.resolve(qe.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return T.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:Vt(r.createTime)}),T.resolve()}getNamedQuery(e,n){return T.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(r){return{name:r.name,query:Pb(r.bundledQuery),readTime:Vt(r.readTime)}}(n)),T.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.overlays=new Ze(Q.comparator),this.es=new Map}getOverlay(e,n){return T.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wn();return T.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ue(e,n,i)}),T.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.es.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(r)),T.resolve()}getOverlaysForCollection(e,n,r){const s=wn(),i=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return T.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ze((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=wn(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=wn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return T.resolve(a)}ue(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Cd(n,r));let i=this.es.get(n);i===void 0&&(i=_e(),this.es.set(n,i)),this.es.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(){this.ns=new Oe(nt.ss),this.rs=new Oe(nt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new nt(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new nt(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new Q(new Re([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.rs.forEachInRange([r,s],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new Q(new Re([])),r=new nt(n,e),s=new nt(n,e+1);let i=_e();return this.rs.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.ns.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return Q.comparator(e.key,n.key)||we(e._s,n._s)}static os(e,n){return we(e._s,n._s)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Oe(nt.ss)}checkEmpty(e){return T.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Sd(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.gs=this.gs.add(new nt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,n){return T.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ps(r),i=s<0?0:s;return T.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([r,s],o=>{const a=this.ys(o._s);i.push(a)}),T.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(we);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{r=r.add(a._s)})}),T.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new nt(new Q(i),0);let a=new Oe(we);return this.gs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l._s)),!0)},o),T.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const s=this.ys(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ge(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return T.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new nt(n,0),s=this.gs.firstAfterOrEqual(r);return T.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,T.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.Es=e,this.docs=new Ze(Q.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return T.resolve(r?r.document.mutableCopy():qe.newInvalidDocument(n))}getEntries(e,n){let r=Lt();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():qe.newInvalidDocument(s))}),T.resolve(r)}getAllFromCollection(e,n,r){let s=Lt();const i=new Q(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||bd(zw(l),r)<=0||(s=s.insert(l.key,l.mutableCopy()))}return T.resolve(s)}getAllFromCollectionGroup(e,n,r,s){oe()}As(e,n){return T.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aD(this)}getSize(e){return T.resolve(this.size)}}class aD extends Bb{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),T.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.persistence=e,this.Rs=new Ir(n=>ss(n),Vo),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ad,this.targetCount=0,this.vs=as.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,s)=>n(s)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),T.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new as(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,T.resolve()}updateTargetData(e,n){return this.Dn(n),T.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),T.waitFor(i).next(()=>s)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return T.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),T.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),T.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),T.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return T.resolve(r)}containsKey(e,n){return T.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Kt(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new lD(this),this.indexManager=new GA,this.remoteDocumentCache=function(r){return new oD(r)}(r=>this.referenceDelegate.xs(r)),this.It=new Mb(n),this.Ns=new rD(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new iD(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const s=new uD(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(i=>this.referenceDelegate.Ms(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Os(e,n){return T.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class uD extends Gw{constructor(e){super(),this.currentSequenceNumber=e}}class du{constructor(e){this.persistence=e,this.Fs=new Ad,this.$s=null}static Bs(e){return new du(e)}get Ls(){if(this.$s)return this.$s;throw oe()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),T.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),T.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),T.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ls.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Ms(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.Ls,r=>{const s=Q.fromPath(r);return this.Us(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return T.or([()=>T.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Os(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.It=e}$(e,n,r,s){const i=new nu("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fg,{unique:!0}),a.createObjectStore("documentMutations")}(e),Ag(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=T.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),Ag(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ce.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fg,{unique:!0});const c=l.store("mutations"),h=u.map(d=>c.put(d));return T.waitFor(h)})}(e,i))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.qs(i))),r<6&&s>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(i)))),r<7&&s>=7&&(o=o.next(()=>this.Gs(i))),r<8&&s>=8&&(o=o.next(()=>this.Qs(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.js(i))),r<11&&s>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:PA});l.createIndex("collectionPathOverlayIndex",LA,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",FA,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:TA});l.createIndex("documentKeyIndex",SA),l.createIndex("collectionGroupIndex",kA)}(e)).next(()=>this.Ws(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.zs(e,i))),r<15&&s>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:RA}).createIndex("sequenceNumberIndex",OA,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:MA}).createIndex("documentKeyIndex",NA,{unique:!1})}(e))),o}Ks(e){let n=0;return e.store("remoteDocuments").Z((r,s)=>{n+=gl(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(s=>T.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>T.forEach(a,l=>{ge(l.userId===i.userId);const u=Pr(this.It,l);return Lb(e,i.userId,u).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.Z((o,a)=>{const l=new Re(o),u=function(c){return[0,At(c)]}(l);i.push(n.get(u).next(c=>c?T.resolve():(h=>n.put({targetId:0,path:At(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>T.waitFor(i))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:DA});const r=n.store("collectionParents"),s=new xd,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:At(l)})}};return n.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new Re(o);return i(l.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([o,a,l],u)=>{const c=bn(a);return i(c.popLast())}))}js(e){const n=e.store("targets");return n.Z((r,s)=>{const i=Mi(s),o=Nb(this.It,i);return n.put(o)})}Ws(e,n){const r=n.store("remoteDocuments"),s=[];return r.Z((i,o)=>{const a=n.store("remoteDocumentsV14"),l=(u=o,u.document?new Q(Re.fromString(u.document.name).popFirst(5)):u.noDocument?Q.fromSegments(u.noDocument.path):u.unknownDocument?Q.fromSegments(u.unknownDocument.path):oe()).path.toArray();var u;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>T.waitFor(s))}zs(e,n){const r=n.store("mutations"),s=$b(this.It),i=new qb(du.Bs,this.It.re);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:_e();Pr(this.It,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),T.forEach(a,(l,u)=>{const c=new It(u),h=cu.oe(this.It,c),d=i.getIndexManager(c),f=hu.oe(c,this.It,d,i.referenceDelegate);return new Ub(s,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new ah(n,Kt.at),l).next()})})}}function Ag(t){t.createObjectStore("targetDocuments",{keyPath:xA}).createIndex("documentTargetsIndex",AA,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CA,{unique:!0}),t.createObjectStore("targetGlobal")}const Ju="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dd{constructor(e,n,r,s,i,o,a,l,u,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Hs=i,this.window=o,this.document=a,this.Js=u,this.Ys=c,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=d=>Promise.resolve(),!Dd.C())throw new ee(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZA(this,s),this.ii=n+"main",this.It=new Mb(l),this.ri=new Pn(this.ii,this.Xs,new cD(this.It)),this.Cs=new YA(this.referenceDelegate,this.It),this.remoteDocumentCache=$b(this.It),this.Ns=new UA,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,c===!1&&St("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(P.FAILED_PRECONDITION,Ju);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Kt(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){return this.si=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(async()=>{this.started&&await this.ui()}))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ha(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(_r(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Ti(e).get("owner").next(n=>T.resolve(this.mi(n)))}gi(e){return ha(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=at(n,"clientMetadata");return r.W().next(s=>{const i=this.Ii(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return T.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.oi)for(const n of e)this.oi.removeItem(this.Ti(n.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?T.resolve(!0):Ti(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new ee(P.FAILED_PRECONDITION,Ju);return!1}}return!(!this.networkEnabled||!this.inForeground)||ha(e).W().next(r=>this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new ah(e,Kt.at);return this._i(n).next(()=>this.gi(n))}),this.ri.close(),this.Pi()}Ii(e,n){return e.filter(r=>this.pi(r.updateTimeMs,n)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>ha(e).W().next(n=>this.Ii(n,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return hu.oe(e,this.It,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new WA(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return cu.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,n,r){j("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(o=this.Xs)===15?BA:o===14?Ob:o===13?Rb:o===12?VA:o===11?Db:void oe();var o;let a;return this.ri.runTransaction(e,s,i,l=>(a=new ah(l,this.Ss?this.Ss.next():Kt.at),n==="readwrite-primary"?this.fi(a).next(u=>!!u||this.di(a)).next(u=>{if(!u)throw St(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ee(P.FAILED_PRECONDITION,Kw);return r(a)}).next(u=>this.wi(a).next(()=>u)):this.Vi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(e){return Ti(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ee(P.FAILED_PRECONDITION,Ju)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ti(e).put("owner",n)}static C(){return Pn.C()}_i(e){const n=Ti(e);return n.get("owner").next(r=>this.mi(r)?(j("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):T.resolve())}pi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(St(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ci(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground=this.document.visibilityState==="visible")}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Zs=()=>{this.Ai(),zk()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const r=((n=this.oi)===null||n===void 0?void 0:n.getItem(this.Ti(e)))!==null;return j("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return St("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){St("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ti(t){return at(t,"owner")}function ha(t){return at(t,"clientMetadata")}function hD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=s}static Ci(e,n){let r=_e(),s=_e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.ki(e,n).next(i=>i||this.Mi(e,n,s,r)).next(i=>i||this.Oi(e,n))}ki(e,n){if(rg(n))return T.resolve(null);let r=ln(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=nh(n,null,"F"),r=ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=_e(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Fi(n,a);return this.$i(n,u,o,l.readTime)?this.ki(e,nh(n,null,"F")):this.Bi(e,u,n,l)}))})))}Mi(e,n,r,s){return rg(n)||s.isEqual(ce.min())?this.Oi(e,n):this.Ni.getDocuments(e,r).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,r,s)?this.Oi(e,n):(Xc()<=xe.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rh(n)),this.Bi(e,o,n,T1(s,-1)))})}Fi(e,n){let r=new Oe(rb(e));return n.forEach((s,i)=>{Ed(e,i)&&(r=r.add(i))}),r}$i(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Oi(e,n){return Xc()<=xe.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",rh(n)),this.Ni.getDocumentsMatchingQuery(e,n,Ut.min())}Bi(e,n,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n,r,s){this.persistence=e,this.Li=n,this.It=s,this.Ui=new Ze(we),this.qi=new Ir(i=>ss(i),Vo),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ub(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function Hb(t,e,n,r){return new dD(t,e,n,r)}async function zb(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=_e();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function fD(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=T.resolve();return h.forEach(f=>{d=d.next(()=>u.getEntry(a,f)).next(m=>{const b=l.docVersions.get(f);ge(b!==null),m.version.compareTo(b)<0&&(c.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),u.addEntry(m)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=_e();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Kb(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function mD(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});s=n.Ui;const a=[];e.targetChanges.forEach((c,h)=>{const d=s.get(h);if(!d)return;a.push(n.Cs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(i,c.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?f=f.withResumeToken(ot.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),s=s.insert(h,f),function(m,b,p){return m.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(d,f,c)&&a.push(n.Cs.updateTargetData(i,f))});let l=Lt(),u=_e();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(gD(i,o,e.documentUpdates).next(c=>{l=c.Wi,u=c.zi})),!r.isEqual(ce.min())){const c=n.Cs.getLastRemoteSnapshotVersion(i).next(h=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return T.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ui=s,i))}function gD(t,e,n){let r=_e(),s=_e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Lt();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Wi:o,zi:s}})}function pD(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vD(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Cs.getTargetData(r,e).next(i=>i?(s=i,T.resolve(s)):n.Cs.allocateTargetId(r).next(o=>(s=new cr(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ui.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(r.targetId,r),n.qi.set(e,r.targetId)),r})}async function lh(t,e,n){const r=ve(t),s=r.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!_r(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}function Dg(t,e,n){const r=ve(t);let s=ce.min(),i=_e();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=ve(a),h=c.qi.get(u);return h!==void 0?T.resolve(c.Ui.get(h)):c.Cs.getTargetData(l,u)}(r,o,ln(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:_e())).next(a=>(yD(r,K1(e),a),{documents:a,Hi:i})))}function yD(t,e,n){let r=ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ki.set(e,r)}class Rg{constructor(){this.activeTargetIds=vb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gb{constructor(){this.Lr=new Rg,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,r){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Rg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,r,s,i){const o=this.ao(e,n);j("RestConnection","Sending: ",o,r);const a={};return this.ho(a,s,i),this.lo(e,o,a,r).then(l=>(j("RestConnection","Received: ",l),l),l=>{throw Jc("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}fo(e,n,r,s,i,o){return this.co(e,n,r,s,i)}ho(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+li,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}ao(e,n){const r=bD[e];return`${this.oo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,n,r,s){return new Promise((i,o)=>{const a=new f1;a.listenOnce(c1.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Qu.NO_ERROR:const u=a.getResponseJson();j("Connection","XHR received:",JSON.stringify(u)),i(u);break;case Qu.TIMEOUT:j("Connection",'RPC "'+e+'" timed out'),o(new ee(P.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:const c=a.getStatus();if(j("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const m=f.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(m)>=0?m:P.UNKNOWN}(h.status);o(new ee(d,h.message))}else o(new ee(P.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ee(P.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{j("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(s);a.send(n,"POST",l,r,15)})}_o(e,n,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=l1(),o=u1(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new d1({})),this.ho(a.initMessageHeaders,n,r),Oy()||Ny()||jk()||Py()||Hk()||My()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=s.join("");j("Connection","Creating WebChannel: "+l,a);const u=i.createWebChannel(l,a);let c=!1,h=!1;const d=new _D({Hr:m=>{h?j("Connection","Not sending because WebChannel is closed:",m):(c||(j("Connection","Opening WebChannel transport."),u.open(),c=!0),j("Connection","WebChannel sending:",m),u.send(m))},Jr:()=>u.close()}),f=(m,b,p)=>{m.listen(b,w=>{try{p(w)}catch(y){setTimeout(()=>{throw y},0)}})};return f(u,oa.EventType.OPEN,()=>{h||j("Connection","WebChannel transport opened.")}),f(u,oa.EventType.CLOSE,()=>{h||(h=!0,j("Connection","WebChannel transport closed"),d.io())}),f(u,oa.EventType.ERROR,m=>{h||(h=!0,Jc("Connection","WebChannel transport errored:",m),d.io(new ee(P.UNAVAILABLE,"The operation could not be completed")))}),f(u,oa.EventType.MESSAGE,m=>{var b;if(!h){const p=m.data[0];ge(!!p);const w=p,y=w.error||((b=w[0])===null||b===void 0?void 0:b.error);if(y){j("Connection","WebChannel received error:",y);const _=y.status;let D=function(I){const E=We[I];if(E!==void 0)return fb(E)}(_),M=y.message;D===void 0&&(D=P.INTERNAL,M="Unknown error status: "+_+" with message "+y.message),h=!0,d.io(new ee(D,M)),u.close()}else j("Connection","WebChannel received:",p),d.ro(p)}}),f(o,h1.STAT_EVENT,m=>{m.stat===qm.PROXY?j("Connection","Detected buffering proxy"):m.stat===qm.NOPROXY&&j("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.so()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(){return typeof window!="undefined"?window:null}function Ra(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){return new hA(t,!0)}class Wb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Hs=e,this.timerId=n,this.wo=r,this.mo=s,this.yo=i,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,n-r);s>0&&j("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){this.Io!==null&&(this.Io.skipDelay(),this.Io=null)}cancel(){this.Io!==null&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n,r,s,i,o,a,l){this.Hs=e,this.Po=r,this.vo=s,this.Vo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Wb(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Mo()}async stop(){this.No()&&await this.close(0)}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(St(n.toString()),St("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===n&&this.Go(r,s)},r=>{e(()=>{const s=new ee(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Mo(){this.state=5,this.xo.Ao(async()=>{this.state=0,this.start()})}Qo(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TD extends Yb{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.It=i}jo(e,n){return this.Vo._o("Listen",e,n)}onMessage(e){this.xo.reset();const n=mA(this.It,e),r=function(s){if(!("targetChange"in s))return ce.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?ce.min():i.readTime?Vt(i.readTime):ce.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=ih(this.It),n.addTarget=function(s,i){let o;const a=i.target;return o=cl(a)?{documents:Tb(s,a)}:{query:Sb(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=bb(s,i.resumeToken):i.snapshotVersion.compareTo(ce.min())>0&&(o.readTime=wo(s,i.snapshotVersion.toTimestamp())),o}(this.It,e);const r=pA(this.It,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=ih(this.It),n.removeTarget=e,this.Bo(n)}}class SD extends Yb{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.Vo._o("Write",e,n)}onMessage(e){if(ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=gA(e.writeResults,e.commitTime),r=Vt(e.commitTime);return this.listener.Zo(r,n)}return ge(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ih(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fl(this.It,r))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.Vo=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new ee(P.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.Vo.co(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(P.UNKNOWN,s.toString())})}fo(e,n,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.Vo.fo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(P.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class CD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(St(n),this.ou=!1):j("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{r.enqueueAndForget(async()=>{fs(this)&&(j("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ve(a);l._u.add(4),await Uo(l),l.gu.set("Unknown"),l._u.delete(4),await mu(l)}(this))})}),this.gu=new CD(r,s)}}async function mu(t){if(fs(t))for(const e of t.wu)await e(!0)}async function Uo(t){for(const e of t.wu)await e(!1)}function Qb(t,e){const n=ve(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Nd(n)?Md(n):ci(n).ko()&&Od(n,e))}function Xb(t,e){const n=ve(t),r=ci(n);n.du.delete(e),r.ko()&&Jb(n,e),n.du.size===0&&(r.ko()?r.Fo():fs(n)&&n.gu.set("Unknown"))}function Od(t,e){t.yu.Ot(e.targetId),ci(t).zo(e)}function Jb(t,e){t.yu.Ot(e),ci(t).Ho(e)}function Md(t){t.yu=new lA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),ci(t).start(),t.gu.uu()}function Nd(t){return fs(t)&&!ci(t).No()&&t.du.size>0}function fs(t){return ve(t)._u.size===0}function Zb(t){t.yu=void 0}async function AD(t){t.du.forEach((e,n)=>{Od(t,e)})}async function DD(t,e){Zb(t),Nd(t)?(t.gu.hu(e),Md(t)):t.gu.set("Unknown")}async function RD(t,e,n){if(t.gu.set("Online"),e instanceof wb&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.du.delete(o),r.yu.removeTarget(o))}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pl(t,r)}else if(e instanceof Aa?t.yu.Gt(e):e instanceof yb?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(ce.min()))try{const r=await Kb(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.yu.te(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.du.get(l);u&&s.du.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=s.du.get(a);if(!l)return;s.du.set(a,l.withResumeToken(ot.EMPTY_BYTE_STRING,l.snapshotVersion)),Jb(s,a);const u=new cr(l.target,a,1,l.sequenceNumber);Od(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){j("RemoteStore","Failed to raise snapshot:",r),await pl(t,r)}}async function pl(t,e,n){if(!_r(e))throw e;t._u.add(1),await Uo(t),t.gu.set("Offline"),n||(n=()=>Kb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await mu(t)})}function e0(t,e){return e().catch(n=>pl(t,n,e))}async function qo(t){const e=ve(t),n=vr(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;OD(e);)try{const s=await pD(e.localStore,r);if(s===null){e.fu.length===0&&n.Fo();break}r=s.batchId,MD(e,s)}catch(s){await pl(e,s)}t0(e)&&n0(e)}function OD(t){return fs(t)&&t.fu.length<10}function MD(t,e){t.fu.push(e);const n=vr(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function t0(t){return fs(t)&&!vr(t).No()&&t.fu.length>0}function n0(t){vr(t).start()}async function ND(t){vr(t).eu()}async function PD(t){const e=vr(t);for(const n of t.fu)e.Xo(n.mutations)}async function LD(t,e,n){const r=t.fu.shift(),s=kd.from(r,e,n);await e0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qo(t)}async function FD(t,e){e&&vr(t).Yo&&await async function(n,r){if(s=r.code,rA(s)&&s!==P.ABORTED){const i=n.fu.shift();vr(n).Oo(),await e0(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await qo(n)}var s}(t,e),t0(t)&&n0(t)}async function Mg(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const r=fs(n);n._u.add(3),await Uo(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await mu(n)}async function VD(t,e){const n=ve(t);e?(n._u.delete(2),await mu(n)):e||(n._u.add(2),await Uo(n),n.gu.set("Unknown"))}function ci(t){return t.pu||(t.pu=function(e,n,r){const s=ve(e);return s.su(),new TD(n,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(t.datastore,t.asyncQueue,{Yr:AD.bind(null,t),Zr:DD.bind(null,t),Wo:RD.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Oo(),Nd(t)?Md(t):t.gu.set("Unknown")):(await t.pu.stop(),Zb(t))})),t.pu}function vr(t){return t.Iu||(t.Iu=function(e,n,r){const s=ve(e);return s.su(),new SD(n,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(t.datastore,t.asyncQueue,{Yr:ND.bind(null,t),Zr:FD.bind(null,t),tu:PD.bind(null,t),Zo:LD.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Oo(),await qo(t)):(await t.Iu.stop(),t.fu.length>0&&(j("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new on,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Pd(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ld(t,e){if(St("AsyncQueue",`${e}: ${t}`),_r(t))return new ee(P.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Oi(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new Bs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.Tu=new Ze(Q.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(n):e.type===1&&r.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):oe():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Js{constructor(e,n,r,s,i,o,a,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,r,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new Js(e,n,Bs.emptySet(n),i,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.Au=void 0,this.listeners=[]}}class $D{constructor(){this.queries=new Ir(e=>nb(e),iu),this.onlineState="Unknown",this.Ru=new Set}}async function r0(t,e){const n=ve(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new BD),s)try{i.Au=await n.onListen(r)}catch(o){const a=Ld(o,`Initialization of query '${rh(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&Fd(n)}async function s0(t,e){const n=ve(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function UD(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(s)&&(r=!0);o.Au=s}}r&&Fd(n)}function qD(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Fd(t){t.Ru.forEach(e=>{e.next()})}class i0{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Js(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=Js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.key=e}}class a0{constructor(e){this.key=e}}class jD{constructor(e,n){this.query=e,this.Lu=n,this.Uu=null,this.current=!1,this.qu=_e(),this.mutatedKeys=_e(),this.Ku=rb(e),this.Gu=new Bs(this.Ku)}get Qu(){return this.Lu}ju(e,n){const r=n?n.Wu:new Ng,s=n?n.Gu:this.Gu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,h)=>{const d=s.get(c),f=Ed(this.query,h)?h:null,m=!!d&&this.mutatedKeys.has(d.key),b=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let p=!1;d&&f?d.data.isEqual(f.data)?m!==b&&(r.track({type:3,doc:f}),p=!0):this.zu(d,f)||(r.track({type:2,doc:f}),p=!0,(l&&this.Ku(f,l)>0||u&&this.Ku(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),p=!0):d&&!f&&(r.track({type:1,doc:d}),p=!0,(l||u)&&(a=!0)),p&&(f?(o=o.add(f),i=b?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{Gu:o,Wu:r,$i:a,mutatedKeys:i}}zu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const i=e.Wu.Eu();i.sort((u,c)=>function(h,d){const f=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return f(h)-f(d)}(u.type,c.type)||this.Ku(u.doc,c.doc)),this.Hu(r);const o=n?this.Ju():[],a=this.qu.size===0&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,i.length!==0||l?{snapshot:new Js(this.query,e.Gu,s,i,e.mutatedKeys,a===0,l,!1),Yu:o}:{Yu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Ng,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(n=>this.Lu=this.Lu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Lu=this.Lu.delete(n)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=_e(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const n=[];return e.forEach(r=>{this.qu.has(r)||n.push(new a0(r))}),this.qu.forEach(r=>{e.has(r)||n.push(new o0(r))}),n}Zu(e){this.Lu=e.Hi,this.qu=_e();const n=this.ju(e.documents);return this.applyChanges(n,!0)}tc(){return Js.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,this.Uu===0)}}class HD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zD{constructor(e){this.key=e,this.ec=!1}}class KD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new Ir(a=>nb(a),iu),this.ic=new Map,this.rc=new Set,this.oc=new Ze(Q.comparator),this.uc=new Map,this.cc=new Ad,this.ac={},this.hc=new Map,this.lc=as.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return this.fc===!0}}async function GD(t,e){const n=rR(t);let r,s;const i=n.sc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.tc();else{const o=await vD(n.localStore,ln(e));n.isPrimaryClient&&Qb(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await WD(n,e,r,a==="current")}return s}async function WD(t,e,n,r){t.dc=(c,h,d)=>async function(f,m,b,p){let w=m.view.ju(b);w.$i&&(w=await Dg(f.localStore,m.query,!1).then(({documents:D})=>m.view.ju(D,w)));const y=p&&p.targetChanges.get(m.targetId),_=m.view.applyChanges(w,f.isPrimaryClient,y);return Lg(f,m.targetId,_.Yu),_.snapshot}(t,c,h,d);const s=await Dg(t.localStore,e,!0),i=new jD(e,s.Hi),o=i.ju(s.documents),a=$o.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),l=i.applyChanges(o,t.isPrimaryClient,a);Lg(t,n,l.Yu);const u=new HD(e,n,i);return t.sc.set(e,u),t.ic.has(n)?t.ic.get(n).push(e):t.ic.set(n,[e]),l.snapshot}async function YD(t,e){const n=ve(t),r=n.sc.get(e),s=n.ic.get(r.targetId);if(s.length>1)return n.ic.set(r.targetId,s.filter(i=>!iu(i,e))),void n.sc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await lh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Xb(n.remoteStore,r.targetId),uh(n,r.targetId)}).catch(hs)):(uh(n,r.targetId),await lh(n.localStore,r.targetId,!0))}async function QD(t,e,n){const r=d0(t);try{const s=await function(i,o){const a=ve(i),l=He.now(),u=o.reduce((d,f)=>d.add(f.key),_e());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=Lt(),m=_e();return a.Gi.getEntries(d,u).next(b=>{f=b,f.forEach((p,w)=>{w.isValidDocument()||(m=m.add(p))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(b=>{c=b;const p=[];for(const w of o){const y=tA(w,c.get(w.key).overlayedDocument);y!=null&&p.push(new zn(w.key,y,Jw(y.value.mapValue),xt.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,p,o)}).next(b=>{h=b;const p=b.applyToLocalDocumentSet(c,m);return a.documentOverlayCache.saveOverlays(d,b.batchId,p)})}).then(()=>({batchId:h.batchId,changes:gb(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.ac[i.currentUser.toKey()];l||(l=new Ze(we)),l=l.insert(o,a),i.ac[i.currentUser.toKey()]=l}(r,s.batchId,n),await jo(r,s.changes),await qo(r.remoteStore)}catch(s){const i=Ld(s,"Failed to persist write");n.reject(i)}}async function l0(t,e){const n=ve(t);try{const r=await mD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.uc.get(i);o&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ec=!0:s.modifiedDocuments.size>0?ge(o.ec):s.removedDocuments.size>0&&(ge(o.ec),o.ec=!1))}),await jo(n,r,e)}catch(r){await hs(r)}}function Pg(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.sc.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=ve(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.bu(o)&&(l=!0)}),l&&Fd(a)}(r.eventManager,e),s.length&&r.nc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XD(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.uc.get(e),i=s&&s.key;if(i){let o=new Ze(Q.comparator);o=o.insert(i,qe.newNoDocument(i,ce.min()));const a=_e().add(i),l=new uu(ce.min(),new Map,new Oe(we),o,a);await l0(r,l),r.oc=r.oc.remove(i),r.uc.delete(e),Vd(r)}else await lh(r.localStore,e,!1).then(()=>uh(r,e,n)).catch(hs)}async function JD(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await fD(n.localStore,e);c0(n,r,null),u0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jo(n,s)}catch(s){await hs(s)}}async function ZD(t,e,n){const r=ve(t);try{const s=await function(i,o){const a=ve(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ge(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);c0(r,e,n),u0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jo(r,s)}catch(s){await hs(s)}}function u0(t,e){(t.hc.get(e)||[]).forEach(n=>{n.resolve()}),t.hc.delete(e)}function c0(t,e,n){const r=ve(t);let s=r.ac[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function uh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ic.get(e))t.sc.delete(r),n&&t.nc._c(r,n);t.ic.delete(e),t.isPrimaryClient&&t.cc.ls(e).forEach(r=>{t.cc.containsKey(r)||h0(t,r)})}function h0(t,e){t.rc.delete(e.path.canonicalString());const n=t.oc.get(e);n!==null&&(Xb(t.remoteStore,n),t.oc=t.oc.remove(e),t.uc.delete(n),Vd(t))}function Lg(t,e,n){for(const r of n)r instanceof o0?(t.cc.addReference(r.key,e),eR(t,r)):r instanceof a0?(j("SyncEngine","Document no longer in limbo: "+r.key),t.cc.removeReference(r.key,e),t.cc.containsKey(r.key)||h0(t,r.key)):oe()}function eR(t,e){const n=e.key,r=n.path.canonicalString();t.oc.get(n)||t.rc.has(r)||(j("SyncEngine","New document in limbo: "+n),t.rc.add(r),Vd(t))}function Vd(t){for(;t.rc.size>0&&t.oc.size<t.maxConcurrentLimboResolutions;){const e=t.rc.values().next().value;t.rc.delete(e);const n=new Q(Re.fromString(e)),r=t.lc.next();t.uc.set(r,new zD(n)),t.oc=t.oc.insert(n,r),Qb(t.remoteStore,new cr(ln(su(n.path)),r,2,Kt.at))}}async function jo(t,e,n){const r=ve(t),s=[],i=[],o=[];r.sc.isEmpty()||(r.sc.forEach((a,l)=>{o.push(r.dc(l,e,n).then(u=>{if(u){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u.fromCache?"not-current":"current"),s.push(u);const c=Rd.Ci(l.targetId,u);i.push(c)}}))}),await Promise.all(o),r.nc.Wo(s),await async function(a,l){const u=ve(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>T.forEach(l,h=>T.forEach(h.Si,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>T.forEach(h.Di,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!_r(c))throw c;j("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.Ui.get(h),f=d.snapshotVersion,m=d.withLastLimboFreeSnapshotVersion(f);u.Ui=u.Ui.insert(h,m)}}}(r.localStore,i))}async function tR(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const r=await zb(n.localStore,e);n.currentUser=e,function(s,i){s.hc.forEach(o=>{o.forEach(a=>{a.reject(new ee(P.CANCELLED,i))})}),s.hc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jo(n,r.ji)}}function nR(t,e){const n=ve(t),r=n.uc.get(e);if(r&&r.ec)return _e().add(r.key);{let s=_e();const i=n.ic.get(e);if(!i)return s;for(const o of i){const a=n.sc.get(o);s=s.unionWith(a.view.Qu)}return s}}function rR(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=l0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XD.bind(null,e),e.nc.Wo=UD.bind(null,e.eventManager),e.nc._c=qD.bind(null,e.eventManager),e}function d0(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZD.bind(null,e),e}class f0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=fu(e.databaseInfo.databaseId),this.sharedClientState=this.mc(e),this.persistence=this.gc(e),await this.persistence.start(),this.localStore=this.yc(e),this.gcScheduler=this.Ic(e,this.localStore),this.indexBackfillerScheduler=this.Tc(e,this.localStore)}Ic(e,n){return null}Tc(e,n){return null}yc(e){return Hb(this.persistence,new jb,e.initialUser,this.It)}gc(e){return new qb(du.Bs,this.It)}mc(e){return new Gb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sR extends f0{constructor(e,n,r){super(),this.Ec=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ec.initialize(this,e),await d0(this.Ec.syncEngine),await qo(this.Ec.remoteStore),await this.persistence.li(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}yc(e){return Hb(this.persistence,new jb,e.initialUser,this.It)}Ic(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new XA(r,e.asyncQueue,n)}Tc(e,n){const r=new x1(n,this.persistence);return new C1(e.asyncQueue,r)}gc(e){const n=hD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new Dd(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,ED(),Ra(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Gb}}class m0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tR.bind(null,this.syncEngine),await VD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $D}createDatastore(e){const n=fu(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new ID(s));var s;return function(i,o,a,l){return new kD(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>Pg(this.syncEngine,a,0),o=Og.C()?new Og:new wD,new xD(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,u){const c=new KD(r,s,i,o,a,l);return u&&(c.fc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ve(e);j("RemoteStore","RemoteStore shutting down."),n._u.add(5),await Uo(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):St("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=It.UNAUTHENTICATED,this.clientId=qw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{j("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(j("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ee(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new on;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ld(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function p0(t,e){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await zb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function v0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oR(t);j("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Mg(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Mg(e.remoteStore,i)),t.onlineComponents=e}async function oR(t){return t.offlineComponents||(j("FirestoreClient","Using default OfflineComponentProvider"),await p0(t,new f0)),t.offlineComponents}async function y0(t){return t.onlineComponents||(j("FirestoreClient","Using default OnlineComponentProvider"),await v0(t,new m0)),t.onlineComponents}function aR(t){return y0(t).then(e=>e.syncEngine)}async function w0(t){const e=await y0(t),n=e.eventManager;return n.onListen=GD.bind(null,e.syncEngine),n.onUnlisten=YD.bind(null,e.syncEngine),n}function lR(t,e,n={}){const r=new on;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new g0({next:h=>{i.enqueueAndForget(()=>s0(s,c));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new ee(P.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new ee(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new i0(su(o.path),u,{includeMetadataChanges:!0,Nu:!0});return r0(s,c)}(await w0(t),t.asyncQueue,e,n,r)),r.promise}function uR(t,e,n={}){const r=new on;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new g0({next:h=>{i.enqueueAndForget(()=>s0(s,c)),h.fromCache&&a.source==="server"?l.reject(new ee(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new i0(o,u,{includeMetadataChanges:!0,Nu:!0});return r0(s,c)}(await w0(t),t.asyncQueue,e,n,r)),r.promise}const Fg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t,e,n){if(!n)throw new ee(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cR(t,e,n,r){if(e===!0&&r===!0)throw new ee(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vg(t){if(!Q.isDocumentKey(t))throw new ee(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bg(t){if(Q.isDocumentKey(t))throw new ee(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bd(t);throw new ee(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $g({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ee(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ee(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $g(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new g1;switch(n.type){case"gapi":const r=n.client;return new y1(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ee(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Fg.get(e);n&&(j("ComponentProvider","Removing Datastore"),Fg.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}}class Ho{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ho(this.firestore,e,this._query)}}class hr extends Ho{constructor(e,n,r){super(e,n,su(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Q(e))}withConverter(e){return new hr(this.firestore,e,this._path)}}function kL(t,e,...n){if(t=dt(t),b0("collection","path",e),t instanceof $d){const r=Re.fromString(e,...n);return Bg(r),new hr(t,null,r)}{if(!(t instanceof Mt||t instanceof hr))throw new ee(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Bg(r),new hr(t.firestore,null,r)}}function CL(t,e,...n){if(t=dt(t),arguments.length===1&&(e=qw.R()),b0("doc","path",e),t instanceof $d){const r=Re.fromString(e,...n);return Vg(r),new Mt(t,null,new Q(r))}{if(!(t instanceof Mt||t instanceof hr))throw new ee(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Vg(r),new Mt(t.firestore,t instanceof hr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Wb(this,"async_queue_retry"),this.jc=()=>{const n=Ra();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.bo()};const e=Ra();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const n=Ra();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const n=new on;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}async Hc(){if(this.Bc.length!==0){try{await this.Bc[0](),this.Bc.shift(),this.xo.reset()}catch(e){if(!_r(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Bc.length>0&&this.xo.Ao(()=>this.Hc())}}zc(e){const n=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{this.qc=r,this.Kc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw St("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Kc=!1,r))));return this.$c=n,n}enqueueAfterDelay(e,n,r){this.Wc(),this.Qc.indexOf(e)>-1&&(n=0);const s=Pd.createAndSchedule(this,e,n,r,i=>this.Jc(i));return this.Uc.push(s),s}Wc(){this.qc&&oe()}verifyOperationInProgress(){}async Yc(){let e;do e=this.$c,await e;while(e!==this.$c)}Xc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}class ms extends $d{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new hR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_0(this),this._firestoreClient.terminate()}}function dR(t,e){const n=typeof t=="object"?t:Wh(),r=typeof t=="string"?t:e||"(default)";return ql(n,"firestore").getImmediate({identifier:r})}function gu(t){return t._firestoreClient||_0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function _0(t){var e;const n=t._freezeSettings(),r=function(s,i,o,a){return new D1(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new iR(t._authCredentials,t._appCheckCredentials,t._queue,r)}function fR(t,e){gR(t=Cn(t,ms));const n=gu(t),r=t._freezeSettings(),s=new m0;return mR(n,s,new sR(s,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function mR(t,e,n){const r=new on;return t.asyncQueue.enqueue(async()=>{try{await p0(t,n),await v0(t,e),r.resolve()}catch(s){const i=s;if(!function(o){return o.name==="FirebaseError"?o.code===P.FAILED_PRECONDITION||o.code===P.UNIMPLEMENTED:typeof DOMException!="undefined"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(i))throw i;Jc("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}}).then(()=>r.promise)}function gR(t){if(t._initialized||t._terminated)throw new ee(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(ot.fromBase64String(e))}catch(n){throw new ee(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zs(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=/^__.*__$/;class vR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ui(e,this.data,n,this.fieldTransforms)}}class I0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function E0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class jd{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ea(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new jd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.sa({path:r,ra:!1});return s.oa(e),s}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.sa({path:r,ra:!1});return s.ea(),s}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return vl(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(e.length===0)throw this.aa("Document fields must not be empty");if(E0(this.na)&&pR.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class yR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=r||fu(e)}fa(e,n,r,s=!1){return new jd({na:e,methodName:n,la:r,path:Qe.emptyPath(),ra:!1,ha:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function T0(t){const e=t._freezeSettings(),n=fu(t._databaseId);return new yR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wR(t,e,n,r,s,i={}){const o=t.fa(i.merge||i.mergeFields?2:0,e,n,s);Hd("Data must be an object, but it was:",o,r);const a=S0(r,o);let l,u;if(i.merge)l=new Ft(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const d=ch(e,h,n);if(!o.contains(d))throw new ee(P.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);C0(c,d)||c.push(d)}l=new Ft(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new vR(new yt(a),l,u)}class vu extends Ud{_toFieldTransform(e){if(e.na!==2)throw e.na===1?e.aa(`${this._methodName}() can only appear at the top level of your update data`):e.aa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vu}}function bR(t,e,n,r){const s=t.fa(1,e,n);Hd("Data must be an object, but it was:",s,r);const i=[],o=yt.empty();ds(r,(l,u)=>{const c=zd(e,l,n);u=dt(u);const h=s.ua(c);if(u instanceof vu)i.push(c);else{const d=yu(u,h);d!=null&&(i.push(c),o.set(c,d))}});const a=new Ft(i);return new I0(o,a,s.fieldTransforms)}function _R(t,e,n,r,s,i){const o=t.fa(1,e,n),a=[ch(e,r,n)],l=[s];if(i.length%2!=0)throw new ee(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(ch(e,i[d])),l.push(i[d+1]);const u=[],c=yt.empty();for(let d=a.length-1;d>=0;--d)if(!C0(u,a[d])){const f=a[d];let m=l[d];m=dt(m);const b=o.ua(f);if(m instanceof vu)u.push(f);else{const p=yu(m,b);p!=null&&(u.push(f),c.set(f,p))}}const h=new Ft(u);return new I0(c,h,o.fieldTransforms)}function yu(t,e){if(k0(t=dt(t)))return Hd("Unsupported field value:",e,t),S0(t,e);if(t instanceof Ud)return function(n,r){if(!E0(r.na))throw r.aa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ra&&e.na!==4)throw e.aa("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=yu(o,r.ca(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=dt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return W1(r.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=He.fromDate(n);return{timestampValue:wo(r.It,s)}}if(n instanceof He){const s=new He(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:wo(r.It,s)}}if(n instanceof qd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Zs)return{bytesValue:bb(r.It,n._byteString)};if(n instanceof Mt){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.aa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Td(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.aa(`Unsupported field value: ${Bd(n)}`)}(t,e)}function S0(t,e){const n={};return Ww(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(t,(r,s)=>{const i=yu(s,e.ia(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function k0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof qd||t instanceof Zs||t instanceof Mt||t instanceof Ud)}function Hd(t,e,n){if(!k0(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Bd(n);throw r==="an object"?e.aa(t+" a custom object"):e.aa(t+" "+r)}}function ch(t,e,n){if((e=dt(e))instanceof pu)return e._internalPath;if(typeof e=="string")return zd(t,e);throw vl("Field path arguments must be of type string or ",t,!1,void 0,n)}const IR=new RegExp("[~\\*/\\[\\]]");function zd(t,e,n){if(e.search(IR)>=0)throw vl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pu(...e.split("."))._internalPath}catch{throw vl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ee(P.INVALID_ARGUMENT,a+t+l)}function C0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ER(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ER extends x0{data(){return super.data()}}function Kd(t,e){return typeof e=="string"?zd(t,e):e instanceof pu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A0 extends x0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Kd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Oa extends A0{data(e={}){return super.data(e)}}class TR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ni(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Oa(this._firestore,this._userDataWriter,r.key,r,new Ni(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Oa(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ni(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:i++}))}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Oa(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ni(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:SR(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function SR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CR{}function xL(t,...e){for(const n of e)t=n._apply(t);return t}class xR extends CR{constructor(e,n){super(),this.wa=e,this.ya=n,this.type="orderBy"}_apply(e){const n=function(r,s,i){if(r.startAt!==null)throw new ee(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ee(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Vs(s,i);return function(a,l){if(eb(a)===null){const u=tb(a);u!==null&&AR(a,u,l.field)}}(r,o),o}(e._query,this.wa,this.ya);return new Ho(e.firestore,e.converter,function(r,s){const i=r.explicitOrderBy.concat([s]);return new Bo(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function AL(t,e="asc"){const n=e,r=Kd("orderBy",t);return new xR(r,n)}function AR(t,e,n){if(!n.isEqual(e))throw new ee(P.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{convertValue(e,n="none"){switch(rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){const r={};return ds(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new qd(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ho(e));default:return null}}convertTimestamp(e){const n=gr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);ge(xb(r));const s=new ns(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||St(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){t=Cn(t,Mt);const e=Cn(t.firestore,ms);return lR(gu(e),t._key).then(n=>OR(e,t,n))}class D0 extends DR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function RL(t){t=Cn(t,Ho);const e=Cn(t.firestore,ms),n=gu(e),r=new D0(e);return kR(t._query),uR(n,t._query).then(s=>new TR(e,r,t,s))}function OL(t,e,n){t=Cn(t,Mt);const r=Cn(t.firestore,ms),s=RR(t.converter,e,n);return Gd(r,[wR(T0(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xt.none())])}function ML(t,e,n,...r){t=Cn(t,Mt);const s=Cn(t.firestore,ms),i=T0(s);let o;return o=typeof(e=dt(e))=="string"||e instanceof pu?_R(i,"updateDoc",t._key,e,n,r):bR(i,"updateDoc",t._key,e),Gd(s,[o.toMutation(t._key,xt.exists(!0))])}function NL(t){return Gd(Cn(t.firestore,ms),[new lu(t._key,xt.none())])}function Gd(t,e){return function(n,r){const s=new on;return n.asyncQueue.enqueueAndForget(async()=>QD(await aR(n),r,s)),s.promise}(gu(t),e)}function OR(t,e,n){const r=n.docs.get(e._key),s=new D0(t);return new A0(t,s,e._key,r,new Ni(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){li=n})(si),Qr(new mr("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new ms(new p1(n.getProvider("auth-internal")),new b1(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ee(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ns(a.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),_n(jm,"3.4.15",t),_n(jm,"3.4.15","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="firebasestorage.googleapis.com",MR="storageBucket",NR=2*60*1e3,PR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends xn{constructor(e,n){super(Zu(e),`Firebase Storage: ${n} (${Zu(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,An.prototype)}_codeEquals(e){return Zu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function Zu(t){return"storage/"+t}function LR(){const t="An unknown error occurred, please check the error payload for server response.";return new An("unknown",t)}function FR(){return new An("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function VR(){return new An("canceled","User canceled the upload/download.")}function BR(t){return new An("invalid-url","Invalid URL '"+t+"'.")}function $R(t){return new An("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function Ug(t){return new An("invalid-argument",t)}function O0(){return new An("app-deleted","The Firebase app was deleted.")}function UR(t){return new An("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=tn.makeFromUrl(e,n)}catch{return new tn(e,"")}if(r.path==="")return r;throw $R(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(D){D.path_=decodeURIComponent(D.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${s}/o${d}`,"i"),m={bucket:1,path:3},b=n===R0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,p="([^?#]*)",w=new RegExp(`^https?://${b}/${s}/${p}`,"i"),_=[{regex:a,indices:l,postModify:i},{regex:f,indices:m,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let D=0;D<_.length;D++){const M=_[D],I=M.regex.exec(e);if(I){const E=I[M.indices.bucket];let S=I[M.indices.path];S||(S=""),r=new tn(E,S),M.postModify(r);break}}if(r==null)throw BR(e);return r}}class qR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...p){u||(u=!0,e.apply(null,p))}function h(p){s=setTimeout(()=>{s=null,t(f,l())},p)}function d(){i&&clearTimeout(i)}function f(p,...w){if(u){d();return}if(p){d(),c.call(null,p,...w);return}if(l()||o){d(),c.call(null,p,...w);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,h(_)}let m=!1;function b(p){m||(m=!0,d(),!u&&(s!==null?(p||(a=2),clearTimeout(s),h(0)):p||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,b(!0)},n),b}function HR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t){return t!==void 0}function qg(t,e,n,r){if(r<e)throw Ug(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ug(`Invalid value for '${t}'. Expected ${n} or less.`)}function KR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(yl||(yl={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r,s,i,o,a,l,u,c,h){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,f)=>{this.resolve_=d,this.reject_=f,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new da(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===yl.NO_ERROR,l=i.getStatus();if(!a||this.isRetryStatusCode_(l)){const c=i.getErrorCode()===yl.ABORT;r(!1,new da(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new da(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());zR(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=LR();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?O0():VR();o(l)}else{const l=FR();o(l)}};this.canceled_?n(!1,new da(!1,null,!0)):this.backoffId_=jR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&HR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,i=this.additionalRetryCodes_.indexOf(e)!==-1;return n||s||i}}class da{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function WR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function YR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function QR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JR(t,e,n,r,s,i){const o=KR(t.urlParams),a=t.url+o,l=Object.assign({},t.headers);return QR(l,e),WR(l,n),YR(l,i),XR(l,r),new GR(a,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this._service=e,n instanceof tn?this._location=n:this._location=tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wl(e,n)}get root(){const e=new tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eO(this._location.path)}get storage(){return this._service}get parent(){const e=ZR(this._location.path);if(e===null)return null;const n=new tn(this._location.bucket,e);return new wl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UR(e)}}function jg(t,e){const n=e==null?void 0:e[MR];return n==null?null:tn.makeFromBucketSpec(n,t)}class tO{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=R0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NR,this._maxUploadRetryTime=PR,this._requests=new Set,s!=null?this._bucket=tn.makeFromBucketSpec(s,this._host):this._bucket=jg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tn.makeFromBucketSpec(this._url,e):this._bucket=jg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wl(this,e)}_makeRequest(e,n,r,s){if(this._deleted)return new qR(O0());{const i=JR(e,this._appId,r,s,n,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Hg="@firebase/storage",zg="0.9.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="storage";function nO(t=Wh(),e){return t=dt(t),ql(t,M0).getImmediate({identifier:e})}function rO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new tO(n,r,s,e,si)}function sO(){Qr(new mr(M0,rO,"PUBLIC").setMultipleInstances(!0)),_n(Hg,zg,""),_n(Hg,zg,"esm2017")}sO();function Wd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function N0(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iO=N0,P0=new Co("auth","Firebase",N0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=new Kh("@firebase/auth");function Ma(t,...e){Kg.logLevel<=xe.ERROR&&Kg.error(`Auth (${si}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,...e){throw Yd(t,...e)}function In(t,...e){return Yd(t,...e)}function oO(t,e,n){const r=Object.assign(Object.assign({},iO()),{[e]:n});return new Co("auth","Firebase",r).create(e,{appName:t.name})}function Yd(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return P0.create(t,...e)}function ue(t,e,...n){if(!t)throw Yd(e,...n)}function Ln(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ma(e),new Error(e)}function qn(t,e){t||Ln(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Map;function Fn(t){qn(t instanceof Function,"Expected a class definition");let e=Gg.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gg.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t,e){const n=ql(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ja(i,e!=null?e:{}))return s;un(s,"already-initialized")}return n.initialize({options:e})}function lO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uO(){return Wg()==="http:"||Wg()==="https:"}function Wg(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uO()||My()||"connection"in navigator)?navigator.onLine:!0}function hO(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=Oy()||Ny()}get(){return cO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new zo(3e4,6e4);function Ko(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hi(t,e,n,r,s={}){return F0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=xo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),L0.fetch()(V0(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function F0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},dO),e);try{const s=new mO(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw fa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw fa(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw oO(t,c,u);un(t,c)}}catch(s){if(s instanceof xn)throw s;un(t,"network-request-failed")}}async function wu(t,e,n,r,s={}){const i=await hi(t,e,n,r,s);return"mfaPendingCredential"in i&&un(t,"multi-factor-auth-required",{_serverResponse:i}),i}function V0(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Qd(t.config,s):`${t.config.apiScheme}://${s}`}class mO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(In(this.auth,"network-request-failed")),fO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=In(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(t,e){return hi(t,"POST","/v1/accounts:delete",e)}async function pO(t,e){return hi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vO(t,e=!1){const n=dt(t),r=await n.getIdToken(e),s=Xd(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Gi(ec(s.auth_time)),issuedAtTime:Gi(ec(s.iat)),expirationTime:Gi(ec(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ec(t){return Number(t)*1e3}function Xd(t){var e;const[n,r,s]=t.split(".");if(n===void 0||r===void 0||s===void 0)return Ma("JWT malformed, contained fewer than 3 sections"),null;try{const i=$k(r);return i?JSON.parse(i):(Ma("Failed to decode base64 JWT payload"),null)}catch(i){return Ma("Caught error parsing JWT payload as JSON",(e=i)===null||e===void 0?void 0:e.toString()),null}}function yO(t){const e=Xd(t);return ue(e,"internal-error"),ue(typeof e.exp!="undefined","internal-error"),ue(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xn&&wO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(n){((e=n)===null||e===void 0?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gi(this.lastLoginAt),this.creationTime=Gi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await bo(t,pO(n,{idToken:r}));ue(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?EO(i.providerUserInfo):[],a=IO(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new B0(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function _O(t){const e=dt(t);await bl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IO(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function EO(t){return t.map(e=>{var{providerId:n}=e,r=Wd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e){const n=await F0(t,{},async()=>{const r=xo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=V0(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",L0.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken!="undefined","internal-error"),ue(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):yO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ue(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await TO(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new _o;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,e){ue(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Kr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Wd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new B0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await bo(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vO(this,e)}reload(){return _O(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await bo(this,gO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,p=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:D,isAnonymous:M,providerData:I,stsTokenManager:E}=n;ue(_&&E,e,"internal-error");const S=_o.fromJSON(this.name,E);ue(typeof _=="string",e,"internal-error"),Qn(h,e.name),Qn(d,e.name),ue(typeof D=="boolean",e,"internal-error"),ue(typeof M=="boolean",e,"internal-error"),Qn(f,e.name),Qn(m,e.name),Qn(b,e.name),Qn(p,e.name),Qn(w,e.name),Qn(y,e.name);const O=new Kr({uid:_,auth:e,email:d,emailVerified:D,displayName:h,isAnonymous:M,photoURL:m,phoneNumber:f,tenantId:b,stsTokenManager:S,createdAt:w,lastLoginAt:y});return I&&Array.isArray(I)&&(O.providerData=I.map(F=>Object.assign({},F))),p&&(O._redirectEventId=p),O}static async _fromIdTokenResponse(e,n,r=!1){const s=new _o;s.updateFromServerResponse(n);const i=new Kr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await bl(i),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$0.type="NONE";const Yg=$0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t,e,n){return`firebase:${t}:${e}:${n}`}class $s{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Na(this.userKey,s.apiKey,i),this.fullPersistenceKey=Na("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $s(Fn(Yg),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Fn(Yg);const o=Na(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=Kr._fromJSON(e,c);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new $s(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new $s(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z0(e))return"Blackberry";if(K0(e))return"Webos";if(Jd(e))return"Safari";if((e.includes("chrome/")||q0(e))&&!e.includes("edge/"))return"Chrome";if(H0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function U0(t=Ke()){return/firefox\//i.test(t)}function Jd(t=Ke()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q0(t=Ke()){return/crios\//i.test(t)}function j0(t=Ke()){return/iemobile/i.test(t)}function H0(t=Ke()){return/android/i.test(t)}function z0(t=Ke()){return/blackberry/i.test(t)}function K0(t=Ke()){return/webos/i.test(t)}function bu(t=Ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SO(t=Ke()){var e;return bu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kO(){return Py()&&document.documentMode===10}function G0(t=Ke()){return bu(t)||H0(t)||K0(t)||z0(t)||/windows phone/i.test(t)||j0(t)}function CO(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t,e=[]){let n;switch(t){case"Browser":n=Qg(Ke());break;case"Worker":n=`${Qg(Ke())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${si}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){var n;if(this.auth.currentUser===e)return;const r=[];try{for(const s of this.queue)await s(e),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(n=s)===null||n===void 0?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xg(this),this.idTokenSubscription=new Xg(this),this.beforeStateQueue=new xO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await $s.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l==null?void 0:l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){var n;try{await bl(e)}catch(r){if(((n=r)===null||n===void 0?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?dt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Co("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await $s.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Zd(t){return dt(t)}class Xg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xk(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}async function DO(t,e){return hi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(t,e){return wu(t,"POST","/v1/accounts:signInWithPassword",Ko(t,e))}async function OO(t,e){return hi(t,"POST","/v1/accounts:sendOobCode",Ko(t,e))}async function MO(t,e){return OO(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e){return wu(t,"POST","/v1/accounts:signInWithEmailLink",Ko(t,e))}async function PO(t,e){return wu(t,"POST","/v1/accounts:signInWithEmailLink",Ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends ef{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Io(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Io(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return RO(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return NO(e,{email:this._email,oobCode:this._password});default:un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return DO(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return PO(e,{idToken:n,email:this._email,oobCode:this._password});default:un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t,e){return wu(t,"POST","/v1/accounts:signInWithIdp",Ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="http://localhost";class ls extends ef{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Wd(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ls(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Us(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Us(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Us(e,n)}buildRequest(){const e={requestUri:LO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VO(t){const e=Ai(Di(t)).link,n=e?Ai(Di(e)).deep_link_id:null,r=Ai(Di(t)).deep_link_id;return(r?Ai(Di(r)).link:null)||r||n||e||t}class tf{constructor(e){var n,r,s,i,o,a;const l=Ai(Di(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=FO((s=l.mode)!==null&&s!==void 0?s:null);ue(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=VO(e);try{return new tf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.providerId=di.PROVIDER_ID}static credential(e,n){return Io._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tf.parseLink(n);return ue(r,"argument-error"),Io._fromEmailAndCode(e,r.code,r.tenantId)}}di.PROVIDER_ID="password";di.EMAIL_PASSWORD_SIGN_IN_METHOD="password";di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends Y0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Go{constructor(){super("facebook.com")}static credential(e){return ls._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Go{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ls._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return nr.credential(n,r)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Go{constructor(){super("github.com")}static credential(e){return ls._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Go{constructor(){super("twitter.com")}static credential(e,n){return ls._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Kr._fromIdTokenResponse(e,r,s),o=Jg(r);return new ei({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Jg(r);return new ei({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Jg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends xn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,_l.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new _l(e,n,r,s)}}function Q0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?_l._fromErrorAndOperation(t,i,e,r):i})}async function BO(t,e,n=!1){const r=await bo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ei._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(t,e,n=!1){var r;const{auth:s}=t,i="reauthenticate";try{const o=await bo(t,Q0(s,i,e,t),n);ue(o.idToken,s,"internal-error");const a=Xd(o.idToken);ue(a,s,"internal-error");const{sub:l}=a;return ue(t.uid===l,s,"user-mismatch"),ei._forOperation(t,i,o)}catch(o){throw((r=o)===null||r===void 0?void 0:r.code)==="auth/user-not-found"&&un(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X0(t,e,n=!1){const r="signIn",s=await Q0(t,r,e),i=await ei._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function UO(t,e){return X0(Zd(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e,n){var r;ue(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ue(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ue(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ue(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,e,n){const r=dt(t),s={requestType:"PASSWORD_RESET",email:e};n&&qO(r,s,n),await MO(r,s)}function HO(t,e,n){return UO(dt(t),di.credential(e,n))}function zO(t,e,n,r){return dt(t).onAuthStateChanged(e,n,r)}function KO(t){return dt(t).signOut()}const Il="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Il,"1"),this.storage.removeItem(Il),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(){const t=Ke();return Jd(t)||bu(t)}const WO=1e3,YO=10;class Z0 extends J0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=GO()&&CO(),this.fallbackToPolling=G0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);kO()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YO):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},WO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z0.type="LOCAL";const QO=Z0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_ extends J0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}e_.type="SESSION";const t_=e_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _u(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await XO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_u.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=nf("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(c),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function ZO(t){En().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(){return typeof En().WorkerGlobalScope!="undefined"&&typeof En().importScripts=="function"}async function eM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nM(){return n_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="firebaseLocalStorageDb",rM=1,El="firebaseLocalStorage",s_="fbase_key";class Wo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Iu(t,e){return t.transaction([El],e?"readwrite":"readonly").objectStore(El)}function sM(){const t=indexedDB.deleteDatabase(r_);return new Wo(t).toPromise()}function dh(){const t=indexedDB.open(r_,rM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(El,{keyPath:s_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(El)?e(r):(r.close(),await sM(),e(await dh()))})})}async function Zg(t,e,n){const r=Iu(t,!0).put({[s_]:e,value:n});return new Wo(r).toPromise()}async function iM(t,e){const n=Iu(t,!1).get(e),r=await new Wo(n).toPromise();return r===void 0?null:r.value}function ep(t,e){const n=Iu(t,!0).delete(e);return new Wo(n).toPromise()}const oM=800,aM=3;class i_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_u._getInstance(nM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eM(),!this.activeServiceWorker)return;this.sender=new JO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dh();return await Zg(e,Il,"1"),await ep(e,Il),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ep(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Iu(s,!1).getAll();return new Wo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i_.type="LOCAL";const lM=i_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function cM(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=In("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uM().appendChild(r)})}function hM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new zo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t,e){return e?Fn(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends ef{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Us(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Us(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Us(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fM(t){return X0(t.auth,new rf(t),t.bypassAuthState)}function mM(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),$O(n,new rf(t),t.bypassAuthState)}async function gM(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),BO(n,new rf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fM;case"linkViaPopup":case"linkViaRedirect":return gM;case"reauthViaPopup":case"reauthViaRedirect":return mM;default:un(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=new zo(2e3,1e4);class Os extends o_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Os.currentPopupAction&&Os.currentPopupAction.cancel(),Os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(In(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,pM.get())};e()}}Os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="pendingRedirect",Pa=new Map;class yM extends o_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pa.get(this.auth._key());if(!e){try{const r=await wM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pa.set(this.auth._key(),e)}return this.bypassAuthState||Pa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wM(t,e){const n=IM(e),r=_M(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bM(t,e){Pa.set(t._key(),e)}function _M(t){return Fn(t._redirectPersistence)}function IM(t){return Na(vM,t.config.apiKey,t.name)}async function EM(t,e,n=!1){const r=Zd(t),s=dM(r,e),o=await new yM(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=10*60*1e3;class SM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!a_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(In(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TM&&this.cachedEventUids.clear(),this.cachedEventUids.has(tp(e))}saveEventToCache(e){this.cachedEventUids.add(tp(e)),this.lastProcessedEventTime=Date.now()}}function tp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function a_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return a_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(t,e={}){return hi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AM=/^https?/;async function DM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CM(t);for(const n of e)try{if(RM(n))return}catch{}un(t,"unauthorized-domain")}function RM(t){const e=hh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!AM.test(n))return!1;if(xM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new zo(3e4,6e4);function np(){const t=En().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function MM(t){return new Promise((e,n)=>{var r,s,i;function o(){np(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{np(),n(In(t,"network-request-failed"))},timeout:OM.get()})}if(!((s=(r=En().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=En().gapi)===null||i===void 0)&&i.load)o();else{const a=hM("iframefcb");return En()[a]=()=>{gapi.load?o():n(In(t,"network-request-failed"))},cM(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw La=null,e})}let La=null;function NM(t){return La=La||MM(t),La}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new zo(5e3,15e3),LM="__/auth/iframe",FM="emulator/auth/iframe",VM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $M(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qd(e,FM):`https://${t.config.authDomain}/${LM}`,r={apiKey:e.apiKey,appName:t.name,v:si},s=BM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${xo(r).slice(1)}`}async function UM(t){const e=await NM(t),n=En().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:$M(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=In(t,"network-request-failed"),a=En().setTimeout(()=>{i(o)},PM.get());function l(){En().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jM=500,HM=600,zM="_blank",KM="http://localhost";class rp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GM(t,e,n,r=jM,s=HM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},qM),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Ke().toLowerCase();n&&(a=q0(u)?zM:n),U0(u)&&(e=e||KM,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,m])=>`${d}${f}=${m},`,"");if(SO(u)&&a!=="_self")return WM(e||"",a),new rp(null);const h=window.open(e||"",a,c);ue(h,t,"popup-blocked");try{h.focus()}catch{}return new rp(h)}function WM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM="__/auth/handler",QM="emulator/auth/handler";function sp(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:si,eventId:s};if(e instanceof Y0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Qk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(i||{}))o[l]=u}if(e instanceof Go){const l=e.getScopes().filter(u=>u!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${XM(t)}?${xo(a).slice(1)}`}function XM({config:t}){return t.emulator?Qd(t,QM):`https://${t.authDomain}/${YM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="webStorageSupport";class JM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=t_,this._completeRedirectFn=EM,this._overrideRedirectResult=bM}async _openPopup(e,n,r,s){var i;qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=sp(e,n,r,hh(),s);return GM(e,o,nf())}async _openRedirect(e,n,r,s){return await this._originValidation(e),ZO(sp(e,n,r,hh(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UM(e),r=new SM(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tc,{type:tc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[tc];o!==void 0&&n(!!o),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return G0()||Jd()||bu()}}const ZM=JM;var ip="@firebase/auth",op="0.20.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var s;e(((s=r)===null||s===void 0?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function nN(t){Qr(new mr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:i,authDomain:o}=r.options;return((a,l)=>{ue(i&&!i.includes(":"),"invalid-api-key",{appName:a.name}),ue(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const u={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W0(t)},c=new AO(a,l,u);return lO(c,n),c})(r,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qr(new mr("auth-internal",e=>{const n=Zd(e.getProvider("auth").getImmediate());return(r=>new eN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(ip,op,tN(t)),_n(ip,op,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t=Wh()){const e=ql(t,"auth");return e.isInitialized()?e.getImmediate():aO(t,{popupRedirectResolver:ZM,persistence:[lM,QO,t_]})}nN("Browser");const sN={apiKey:"AIzaSyBer3u9UeKq6rr3ThZ-YA84JAyK0dWIXW8",authDomain:"webferrol-app.firebaseapp.com",projectId:"webferrol-app",storageBucket:"webferrol-app.appspot.com",messagingSenderId:"333482588665",appId:"1:333482588665:web:92ed7fba0d6376a9b1a528",measurementId:"G-0DVHLVC3CQ"},l_=QC(sN),iN=dR(l_);nO(l_);fR(iN).catch(t=>{t.code=="failed-precondition"||t.code=="unimplemented"});const ma=rN(),ap={"auth/too-many-requests":"Demasiados intentos vuelva a intentarlo m\xE1s tarde","auth/user-not-found":"Usuario NO registrado o contrase\xF1a no v\xE1lida","auth/invalid-password":"Usuario NO registrado o contrase\xF1a no v\xE1lida","auth/wrong-password":"Usuario NO registrado o contrase\xF1a no v\xE1lida","auth/missing-email":"La direcci\xF3n de correo electr\xF3nico no es v\xE1lida","auth/invalid-email":"La direcci\xF3n de correo electr\xF3nico no es v\xE1lida","permission-denied":"Permisos insuficientes o colecci\xF3n inexistente"},lp=eS("users",{state:()=>({user:null,loading:[!1,!1],error:null,ok:null}),actions:{setUser(t){this.user=t},async signIn({email:t,password:e,accept:n}){this.loading[0]=!0;try{if(n!==!0)throw new Error("Debes marcar la casilla de verificaci\xF3n");const r=await HO(ma,t,e);this.setUser(r.user)}catch(r){this.error=ap[r.code]||r.message}finally{this.loading[0]=!1}},async onAuthState(){if(this.user===null)return new Promise((t,e)=>{zO(ma,r=>{r?(this.setUser(r),t(r)):t(null)},r=>e(r))()})},async onSendPasswordResetEmail(t){try{this.loading[1]=!0,await jO(ma,t),this.ok=`Se ha enviado a su cuenta de correo ${t} las instrucciones para crear una nueva contrase\xF1a. Si no lo encuentra compruebe su bandeja de SPAN`}catch(e){this.error=ap[e.code]||e.message}finally{this.loading[1]=!1}},async handleSignOut(){try{await KO(ma),this.user=null}catch(t){console.log(t)}}},getters:{getLastLoginAt:t=>{var e,n;if(((n=(e=t.user)==null?void 0:e.metadata)==null?void 0:n.lastLoginAt)!==void 0){const r=Number(t.user.metadata.lastLoginAt);return Fk.formatDate(r,"DD-MM-YYYY HH:mm:ss")}return""},getLastSignInTime:t=>{var e,n;return((n=(e=t.user)==null?void 0:e.metadata)==null?void 0:n.lastSignInTime)!==void 0?t.user.metadata.lastSignInTime:""}}});var nc=async function(){const{onAuthState:t}=lp(),{user:e}=tS(lp());await t();const r=rk({scrollBehavior:()=>({left:0,top:0}),routes:ak,history:wS("/")});return r.beforeEach((s,i,o)=>{var a,l;s.meta.protectedRoute===!0&&((a=e.value)==null?void 0:a.uid)===void 0?o("/sign-in"):s.meta.authRoute===!0&&((l=e.value)==null?void 0:l.uid)!==void 0?o("/"):o()}),r};async function oN(t,e){const n=t(GT);n.use(jT,e);const r=typeof Ru=="function"?await Ru({}):Ru;n.use(r);const s=Sn(typeof nc=="function"?await nc({store:r}):nc);return r.use(({store:i})=>{i.router=s}),{app:n,store:r,router:s}}const aN=Object.prototype.toString,rc=Object.prototype.hasOwnProperty,u_={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(t=>{u_["[object "+t+"]"]=t.toLowerCase()});function Fa(t){return t===null?String(t):u_[aN.call(t)]||"object"}function up(t){if(!t||Fa(t)!=="object"||t.constructor&&!rc.call(t,"constructor")&&!rc.call(t.constructor.prototype,"isPrototypeOf"))return!1;let e;for(e in t);return e===void 0||rc.call(t,e)}function c_(){let t,e,n,r,s,i,o=arguments[0]||{},a=1,l=!1;const u=arguments.length;for(typeof o=="boolean"&&(l=o,o=arguments[1]||{},a=2),Object(o)!==o&&Fa(o)!=="function"&&(o={}),u===a&&(o=this,a--);a<u;a++)if((t=arguments[a])!==null)for(e in t)n=o[e],r=t[e],o!==r&&(l&&r&&(up(r)||(s=Fa(r)==="array"))?(s?(s=!1,i=n&&Fa(n)==="array"?n:[]):i=n&&up(n)?n:{},o[e]=c_(l,i,r)):r!==void 0&&(o[e]=r));return o}let cp,fh;const hp=[];function lN(t){t.title&&(t.title=t.titleTemplate?t.titleTemplate(t.title):t.title,delete t.titleTemplate),[["meta","content"],["link","href"]].forEach(e=>{const n=t[e[0]],r=e[1];for(const s in n){const i=n[s];i.template&&(Object.keys(i).length===1?delete n[s]:(i[r]=i.template(i[r]||""),delete i.template))}})}function uN(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in t)if(t[n]!==e[n])return!0}function dp(t){return["class","style"].includes(t)===!1}function fp(t){return["lang","dir"].includes(t)===!1}function cN(t,e){const n={},r={};return t===void 0?{add:e,remove:r}:(t.title!==e.title&&(n.title=e.title),["meta","link","script","htmlAttr","bodyAttr"].forEach(s=>{const i=t[s],o=e[s];if(r[s]=[],i==null){n[s]=o;return}n[s]={};for(const a in i)o.hasOwnProperty(a)===!1&&r[s].push(a);for(const a in o)i.hasOwnProperty(a)===!1?n[s][a]=o[a]:uN(i[a],o[a])===!0&&(r[s].push(a),n[s][a]=o[a])}),{add:n,remove:r})}function hN({add:t,remove:e}){t.title&&(document.title=t.title),Object.keys(e).length>0&&(["meta","link","script"].forEach(n=>{e[n].forEach(r=>{document.head.querySelector(`${n}[data-qmeta="${r}"]`).remove()})}),e.htmlAttr.filter(fp).forEach(n=>{document.documentElement.removeAttribute(n)}),e.bodyAttr.filter(dp).forEach(n=>{document.body.removeAttribute(n)})),["meta","link","script"].forEach(n=>{const r=t[n];for(const s in r){const i=document.createElement(n);for(const o in r[s])o!=="innerHTML"&&i.setAttribute(o,r[s][o]);i.setAttribute("data-qmeta",s),n==="script"&&(i.innerHTML=r[s].innerHTML||""),document.head.appendChild(i)}}),Object.keys(t.htmlAttr).filter(fp).forEach(n=>{document.documentElement.setAttribute(n,t.htmlAttr[n]||"")}),Object.keys(t.bodyAttr).filter(dp).forEach(n=>{document.body.setAttribute(n,t.bodyAttr[n]||"")})}function dN(){const t={title:"",titleTemplate:null,meta:{},link:{},script:{},htmlAttr:{},bodyAttr:{}};for(let e=0;e<hp.length;e++){const{active:n,val:r}=hp[e];n===!0&&c_(!0,t,r)}lN(t),hN(cN(fh,t)),fh=t}function PL(){clearTimeout(cp),cp=setTimeout(dN,50)}var fN={install(t){this.__installed!==!0&&$n.value===!0&&(fh=window.__Q_META__,document.getElementById("qmeta-init").remove())}};const mh={xs:18,sm:24,md:32,lg:38,xl:46},fi={size:String};function mi(t,e=mh){return x(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}const mt=t=>Sn(Fh(t)),mN=t=>Sn(t);function nn(t,e){return t!==void 0&&t()||e}function LL(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function Ur(t,e){return t!==void 0?e.concat(t()):e}function h_(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function FL(t,e,n,r,s,i){e.key=r+s;const o=A(t,e,n);return s===!0?Dv(o,i()):o}const mp="0 0 24 24",gp=t=>t,sc=t=>`ionicons ${t}`,d_={"mdi-":t=>`mdi ${t}`,"icon-":gp,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":sc,"ion-ios":sc,"ion-logo":sc,"iconfont ":gp,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`},f_={o_:"-outlined",r_:"-round",s_:"-sharp"},m_={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},gN=new RegExp("^("+Object.keys(d_).join("|")+")"),pN=new RegExp("^("+Object.keys(f_).join("|")+")"),pp=new RegExp("^("+Object.keys(m_).join("|")+")"),vN=/^[Mm]\s?[-+]?\.?\d/,yN=/^img:/,wN=/^svguse:/,bN=/^ion-/,_N=/^(fa-(solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;var jn=mt({name:"QIcon",props:{...fi,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=Ge(),r=mi(t),s=x(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=x(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const c=n.iconMapFn(a);if(c!==void 0)if(c.icon!==void 0){if(a=c.icon,a==="none"||!a)return{none:!0}}else return{cls:c.cls,content:c.content!==void 0?c.content:" "}}if(vN.test(a)===!0){const[c,h=mp]=a.split("|");return{svg:!0,viewBox:h,nodes:c.split("&&").map(d=>{const[f,m,b]=d.split("@@");return A("path",{style:m,d:f,transform:b})})}}if(yN.test(a)===!0)return{img:!0,src:a.substring(4)};if(wN.test(a)===!0){const[c,h=mp]=a.split("|");return{svguse:!0,src:c.substring(7),viewBox:h}}let l=" ";const u=a.match(gN);if(u!==null)o=d_[u[1]](a);else if(_N.test(a)===!0)o=a;else if(bN.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(pp.test(a)===!0){o="notranslate material-symbols";const c=a.match(pp);c!==null&&(a=a.substring(6),o+=m_[c[1]]),l=a}else{o="notranslate material-icons";const c=a.match(pN);c!==null&&(a=a.substring(2),o+=f_[c[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:s.value,style:r.value,"aria-hidden":"true",role:"presentation"};return i.value.none===!0?A(t.tag,o,nn(e.default)):i.value.img===!0?A("span",o,Ur(e.default,[A("img",{src:i.value.src})])):i.value.svg===!0?A("span",o,Ur(e.default,[A("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?A("span",o,Ur(e.default,[A("svg",{viewBox:i.value.viewBox},[A("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),A(t.tag,o,Ur(e.default,[i.value.content])))}}}),IN=mt({name:"QAvatar",props:{...fi,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=mi(t),r=x(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),s=x(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[A(jn,{name:t.icon})]:void 0;return A("div",{class:r.value,style:n.value},[A("div",{class:"q-avatar__content row flex-center overflow-hidden",style:s.value},h_(e.default,i))])}}});const EN={size:{type:[Number,String],default:"1em"},color:String};function TN(t){return{cSize:x(()=>t.size in mh?`${mh[t.size]}px`:t.size),classes:x(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}var Eo=mt({name:"QSpinner",props:{...EN,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=TN(t);return()=>A("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[A("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function gh(t,e){const n=t.style;for(const r in e)n[r]=e[r]}function SN(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=je(t)===!0?t.value:t;if(e)return e.$el||e}function kN(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function CN(t,e=250){let n=!1,r;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),r=t.apply(this,arguments)),r}}function vp(t,e,n,r){n.modifiers.stop===!0&&Wa(t);const s=n.modifiers.color;let i=n.modifiers.center;i=i===!0||r===!0;const o=document.createElement("span"),a=document.createElement("span"),l=wT(t),{left:u,top:c,width:h,height:d}=e.getBoundingClientRect(),f=Math.sqrt(h*h+d*d),m=f/2,b=`${(h-f)/2}px`,p=i?b:`${l.left-u-m}px`,w=`${(d-f)/2}px`,y=i?w:`${l.top-c-m}px`;a.className="q-ripple__inner",gh(a,{height:`${f}px`,width:`${f}px`,transform:`translate3d(${p},${y},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${s?" text-"+s:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const _=()=>{o.remove(),clearTimeout(D)};n.abort.push(_);let D=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${b},${w},0) scale3d(1,1,1)`,a.style.opacity=.2,D=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,D=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(_),1)},275)},250)},50)}function yp(t,{modifiers:e,value:n,arg:r}){const s=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:s.early===!0,stop:s.stop===!0,center:s.center===!0,color:s.color||r,keyCodes:[].concat(s.keyCodes||13)}}var xN=mN({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const r={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(s){r.enabled===!0&&s.qSkipRipple!==!0&&s.type===(r.modifiers.early===!0?"pointerdown":"click")&&vp(s,t,r,s.qKeyEvent===!0)},keystart:CN(s=>{r.enabled===!0&&s.qSkipRipple!==!0&&no(s,r.modifiers.keyCodes)===!0&&s.type===`key${r.modifiers.early===!0?"down":"up"}`&&vp(s,t,r,!0)},300)};yp(r,e),t.__qripple=r,_T(r,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&yp(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),IT(e,"main"),delete t._qripple)}});const g_={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},AN=Object.keys(g_),p_={align:{type:String,validator:t=>AN.includes(t)}};function v_(t){return x(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${g_[e]}`})}function Va(t){if(Object(t.$parent)===t.$parent)return t.$parent;for(t=t.$.parent;Object(t)===t;){if(Object(t.proxy)===t.proxy)return t.proxy;t=t.parent}}function y_(t){return t.appContext.config.globalProperties.$router!==void 0}function wp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function bp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function DN(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(Array.isArray(s)===!1||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function _p(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function RN(t,e){return Array.isArray(t)===!0?_p(t,e):Array.isArray(e)===!0?_p(e,t):t===e}function ON(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(RN(t[n],e[n])===!1)return!1;return!0}const MN={to:[String,Object],replace:Boolean,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"},href:String,target:String,disable:Boolean};function NN(t){const e=Ge(),{props:n,proxy:r}=e,s=y_(e),i=x(()=>n.disable!==!0&&n.href!==void 0),o=x(()=>s===!0&&n.disable!==!0&&i.value!==!0&&n.to!==void 0&&n.to!==null&&n.to!==""),a=x(()=>{if(o.value===!0)try{return r.$router.resolve(n.to)}catch{}return null}),l=x(()=>a.value!==null),u=x(()=>i.value===!0||l.value===!0),c=x(()=>n.type==="a"||u.value===!0?"a":n.tag||t||"div"),h=x(()=>i.value===!0?{href:n.href,target:n.target}:l.value===!0?{href:a.value.href,target:n.target}:{}),d=x(()=>{if(l.value===!1)return null;const{matched:w}=a.value,{length:y}=w,_=w[y-1];if(_===void 0)return-1;const D=r.$route.matched;if(D.length===0)return-1;const M=D.findIndex(bp.bind(null,_));if(M>-1)return M;const I=wp(w[y-2]);return y>1&&wp(_)===I&&D[D.length-1].path!==I?D.findIndex(bp.bind(null,w[y-2])):M}),f=x(()=>l.value===!0&&d.value>-1&&DN(r.$route.params,a.value.params)),m=x(()=>f.value===!0&&d.value===r.$route.matched.length-1&&ON(r.$route.params,a.value.params)),b=x(()=>l.value===!0?m.value===!0?` ${n.exactActiveClass} ${n.activeClass}`:n.exact===!0?"":f.value===!0?` ${n.activeClass}`:"":"");function p(w){return n.disable===!0||w.metaKey||w.altKey||w.ctrlKey||w.shiftKey||w.__qNavigate!==!0&&w.defaultPrevented===!0||w.button!==void 0&&w.button!==0||n.target==="_blank"?!1:(ir(w),r.$router[n.replace===!0?"replace":"push"](n.to).catch(y=>y))}return{hasRouterLink:l,hasHrefLink:i,hasLink:u,linkTag:c,linkRoute:a,linkIsActive:f,linkIsExactActive:m,linkClass:b,linkProps:h,navigateToRouterLink:p}}const Ip={none:0,xs:4,sm:8,md:16,lg:24,xl:32},PN={xs:8,sm:10,md:14,lg:20,xl:24},LN=["button","submit","reset"],FN=/[^\s]\/[^\s]/,VN={...fi,...MN,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,square:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...p_.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function BN(t){const e=mi(t,PN),n=v_(t),{hasRouterLink:r,hasLink:s,linkTag:i,linkProps:o,navigateToRouterLink:a}=NN("button"),l=x(()=>{const p=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},p,{padding:t.padding.split(/\s+/).map(w=>w in Ip?Ip[w]+"px":w).join(" "),minWidth:"0",minHeight:"0"}):p}),u=x(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),c=x(()=>t.disable!==!0&&t.loading!==!0),h=x(()=>c.value===!0?t.tabindex||0:-1),d=x(()=>t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":"standard"),f=x(()=>{const p={tabindex:h.value};return s.value===!0?Object.assign(p,o.value):LN.includes(t.type)===!0&&(p.type=t.type),i.value==="a"?(t.disable===!0?p["aria-disabled"]="true":p.href===void 0&&(p.role="button"),r.value!==!0&&FN.test(t.type)===!0&&(p.type=t.type)):t.disable===!0&&(p.disabled="",p["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(p,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),p}),m=x(()=>{let p;t.color!==void 0?t.flat===!0||t.outline===!0?p=`text-${t.textColor||t.color}`:p=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(p=`text-${t.textColor}`);const w=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${d.value} q-btn--${w}`+(p!==void 0?" "+p:"")+(c.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),b=x(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:m,style:l,innerClasses:b,attributes:f,hasRouterLink:r,hasLink:s,linkTag:i,navigateToRouterLink:a,isActionable:c}}const{passiveCapture:jt}=Ot;let Es=null,Ts=null,Ss=null;var ph=mt({name:"QBtn",props:{...VN,percentage:Number,darkPercentage:Boolean},emits:["click","keydown","touchstart","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:r}=Ge(),{classes:s,style:i,innerClasses:o,attributes:a,hasRouterLink:l,hasLink:u,linkTag:c,navigateToRouterLink:h,isActionable:d}=BN(t),f=ke(null),m=ke(null);let b=null,p,w;const y=x(()=>t.label!==void 0&&t.label!==null&&t.label!==""),_=x(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:u.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),D=x(()=>({center:t.round})),M=x(()=>{const U=Math.max(0,Math.min(100,t.percentage));return U>0?{transition:"transform 0.6s",transform:`translateX(${U-100}%)`}:{}}),I=x(()=>t.loading===!0?{onMousedown:W,onTouchstartPassive:W,onClick:W,onKeydown:W,onKeyup:W}:d.value===!0?{onClick:S,onKeydown:O,onMousedown:B,onTouchstart:F}:{onClick:Ht}),E=x(()=>({ref:f,class:"q-btn q-btn-item non-selectable no-outline "+s.value,style:i.value,...a.value,...I.value}));function S(U){if(f.value!==null){if(U!==void 0){if(U.defaultPrevented===!0)return;const se=document.activeElement;if(t.type==="submit"&&se!==document.body&&f.value.contains(se)===!1&&se.contains(f.value)===!1){f.value.focus();const R=()=>{document.removeEventListener("keydown",Ht,!0),document.removeEventListener("keyup",R,jt),f.value!==null&&f.value.removeEventListener("blur",R,jt)};document.addEventListener("keydown",Ht,!0),document.addEventListener("keyup",R,jt),f.value.addEventListener("blur",R,jt)}}if(l.value===!0){const se=()=>{U.__qNavigate=!0,h(U)};n("click",U,se),U.defaultPrevented!==!0&&se()}else n("click",U)}}function O(U){f.value!==null&&(n("keydown",U),no(U,[13,32])===!0&&Ts!==f.value&&(Ts!==null&&H(),U.defaultPrevented!==!0&&(f.value.focus(),Ts=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("keyup",C,!0),f.value.addEventListener("blur",C,jt)),Ht(U)))}function F(U){f.value!==null&&(n("touchstart",U),U.defaultPrevented!==!0&&(Es!==f.value&&(Es!==null&&H(),Es=f.value,b=U.target,b.addEventListener("touchcancel",C,jt),b.addEventListener("touchend",C,jt)),p=!0,clearTimeout(w),w=setTimeout(()=>{p=!1},200)))}function B(U){f.value!==null&&(U.qSkipRipple=p===!0,n("mousedown",U),U.defaultPrevented!==!0&&Ss!==f.value&&(Ss!==null&&H(),Ss=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("mouseup",C,jt)))}function C(U){if(f.value!==null&&!(U!==void 0&&U.type==="blur"&&document.activeElement===f.value)){if(U!==void 0&&U.type==="keyup"){if(Ts===f.value&&no(U,[13,32])===!0){const se=new MouseEvent("click",U);se.qKeyEvent=!0,U.defaultPrevented===!0&&ir(se),U.cancelBubble===!0&&Wa(se),f.value.dispatchEvent(se),Ht(U),U.qKeyEvent=!0}n("keyup",U)}H()}}function H(U){const se=m.value;U!==!0&&(Es===f.value||Ss===f.value)&&se!==null&&se!==document.activeElement&&(se.setAttribute("tabindex",-1),se.focus()),Es===f.value&&(b!==null&&(b.removeEventListener("touchcancel",C,jt),b.removeEventListener("touchend",C,jt)),Es=b=null),Ss===f.value&&(document.removeEventListener("mouseup",C,jt),Ss=null),Ts===f.value&&(document.removeEventListener("keyup",C,!0),f.value!==null&&f.value.removeEventListener("blur",C,jt),Ts=null),f.value!==null&&f.value.classList.remove("q-btn--active")}function W(U){Ht(U),U.qSkipRipple=!0}return cn(()=>{H(!0)}),Object.assign(r,{click:S}),()=>{let U=[];t.icon!==void 0&&U.push(A(jn,{name:t.icon,left:t.stack===!1&&y.value===!0,role:"img","aria-hidden":"true"})),y.value===!0&&U.push(A("span",{class:"block"},[t.label])),U=Ur(e.default,U),t.iconRight!==void 0&&t.round===!1&&U.push(A(jn,{name:t.iconRight,right:t.stack===!1&&y.value===!0,role:"img","aria-hidden":"true"}));const se=[A("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&se.push(A("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[A("span",{class:"q-btn__progress-indicator fit block",style:M.value})])),se.push(A("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},U)),t.loading!==null&&se.push(A(Hs,{name:"q-transition--fade"},()=>t.loading===!0?[A("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[A(Eo)])]:null)),Dv(A(c.value,E.value,se),[[xN,_.value,void 0,D.value]])}}});let $N=document.body;function sf(t){const e=document.createElement("div");if(t!==void 0&&(e.id=t),Qa.globalNodes!==void 0){const n=Qa.globalNodes.class;n!==void 0&&(e.className=n)}return $N.appendChild(e),e}function w_(t){t.remove()}let UN=0;const Ba={},$a={},Xt={},b_={},qN=/^\s*$/,__=[],of=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],jN=["top-left","top-right","bottom-left","bottom-right"],As={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function I_(t,e,n){if(!t)return Si("parameter required");let r;const s={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(s,Ba),yn(t)===!1&&(s.type&&Object.assign(s,As[s.type]),t={message:t}),Object.assign(s,As[t.type||s.type],t),typeof s.icon=="function"&&(s.icon=s.icon(e)),s.spinner?(s.spinner===!0&&(s.spinner=Eo),s.spinner=Sn(s.spinner)):s.spinner=!1,s.meta={hasMedia:Boolean(s.spinner!==!1||s.icon||s.avatar),hasText:Ep(s.message)||Ep(s.caption)},s.position){if(of.includes(s.position)===!1)return Si("wrong position",t)}else s.position="bottom";if(s.timeout===void 0)s.timeout=5e3;else{const l=parseInt(s.timeout,10);if(isNaN(l)||l<0)return Si("wrong timeout",t);s.timeout=l}s.timeout===0?s.progress=!1:s.progress===!0&&(s.meta.progressClass="q-notification__progress"+(s.progressClass?` ${s.progressClass}`:""),s.meta.progressStyle={animationDuration:`${s.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(Ba.actions)===!0?Ba.actions:[]).concat(As[t.type]!==void 0&&Array.isArray(As[t.type].actions)===!0?As[t.type].actions:[]),{closeBtn:o}=s;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),s.actions=i.map(({handler:l,noDismiss:u,...c})=>({flat:!0,...c,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),s.multiLine===void 0&&(s.multiLine=s.actions.length>1),Object.assign(s.meta,{class:`q-notification row items-stretch q-notification--${s.multiLine===!0?"multi-line":"standard"}`+(s.color!==void 0?` bg-${s.color}`:"")+(s.textColor!==void 0?` text-${s.textColor}`:"")+(s.classes!==void 0?` ${s.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(s.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(s.multiLine===!0?"":" col"),leftClass:s.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...s.attrs}}),s.group===!1?(s.group=void 0,s.meta.group=void 0):((s.group===void 0||s.group===!0)&&(s.group=[s.message,s.caption,s.multiline].concat(s.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),s.meta.group=s.group+"|"+s.position),s.actions.length===0?s.actions=void 0:s.meta.actionsClass="q-notification__actions row items-center "+(s.multiLine===!0?"justify-end":"col-auto")+(s.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){clearTimeout(n.notif.meta.timer),s.meta.uid=n.notif.meta.uid;const l=Xt[s.position].value.indexOf(n.notif);Xt[s.position].value[l]=s}else{const l=$a[s.meta.group];if(l===void 0){if(s.meta.uid=UN++,s.meta.badge=1,["left","right","center"].indexOf(s.position)!==-1)Xt[s.position].value.splice(Math.floor(Xt[s.position].value.length/2),0,s);else{const u=s.position.indexOf("top")>-1?"unshift":"push";Xt[s.position].value[u](s)}s.group!==void 0&&($a[s.meta.group]=s)}else{if(clearTimeout(l.meta.timer),s.badgePosition!==void 0){if(jN.includes(s.badgePosition)===!1)return Si("wrong badgePosition",t)}else s.badgePosition=`top-${s.position.indexOf("left")>-1?"right":"left"}`;s.meta.uid=l.meta.uid,s.meta.badge=l.meta.badge+1,s.meta.badgeClass=`q-notification__badge q-notification__badge--${s.badgePosition}`+(s.badgeColor!==void 0?` bg-${s.badgeColor}`:"")+(s.badgeTextColor!==void 0?` text-${s.badgeTextColor}`:"")+(s.badgeClass?` ${s.badgeClass}`:"");const u=Xt[s.position].value.indexOf(l);Xt[s.position].value[u]=$a[s.meta.group]=s}}const a=()=>{HN(s),r=void 0};if(s.timeout>0&&(s.meta.timer=setTimeout(()=>{a()},s.timeout+1e3)),s.group!==void 0)return l=>{l!==void 0?Si("trying to update a grouped one which is forbidden",t):a()};if(r={dismiss:a,config:t,notif:s},n!==void 0){Object.assign(n,r);return}return l=>{if(r!==void 0)if(l===void 0)r.dismiss();else{const u=Object.assign({},r.config,l,{group:!1,position:s.position});I_(u,e,r)}}}function HN(t){clearTimeout(t.meta.timer);const e=Xt[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete $a[t.meta.group];const n=__[""+t.meta.uid];if(n){const{width:r,height:s}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=r,n.style.height=s}Xt[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function Ep(t){return t!=null&&qN.test(t)!==!0}function Si(t,e){return console.error(`Notify: ${t}`,e),!1}function zN(){return mt({name:"QNotifications",devtools:{hide:!0},setup(){return()=>A("div",{class:"q-notifications"},of.map(t=>A(rT,{key:t,class:b_[t],tag:"div",name:`q-notification--${t}`},()=>Xt[t].value.map(e=>{const n=e.meta,r=[];if(n.hasMedia===!0&&(e.spinner!==!1?r.push(A(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(A(jn,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(A(IN,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>A("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[A("div",a),A("div",{class:"q-notification__caption"},[e.caption])]:a}r.push(A("div",o,i))}const s=[A("div",{class:n.contentClass},r)];return e.progress===!0&&s.push(A("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&s.push(A("div",{class:n.actionsClass},e.actions.map(i=>A(ph,i)))),n.badge>1&&s.push(A("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),A("div",{ref:i=>{__[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[A("div",{class:n.wrapperClass},s)])}))))}})}var KN={setDefaults(t){yn(t)===!0&&Object.assign(Ba,t)},registerType(t,e){yn(e)===!0&&(As[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>I_(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){of.forEach(r=>{Xt[r]=ke([]);const s=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")>-1?"top":"bottom",i=r.indexOf("left")>-1?"start":r.indexOf("right")>-1?"end":"center",o=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${i}`;b_[r]=`q-notifications__list q-notifications__list--${s} fixed column no-wrap ${o}`});const n=sf("q-notify");ly(zN(),e).mount(n)}}};function GN(t,e,n){let r;function s(){r!==void 0&&(Sc.remove(r),r=void 0)}return cn(()=>{t.value===!0&&s()}),{removeFromHistory:s,addToHistory(){r={condition:()=>n.value===!0,handler:e},Sc.add(r)}}}function WN(){let t;return cn(()=>{clearTimeout(t)}),{registerTimeout(e,n){clearTimeout(t),t=setTimeout(e,n)},removeTimeout(){clearTimeout(t)}}}function YN(){let t;return cn(()=>{t=void 0}),{registerTick(e){t=e,vt(()=>{t===e&&(t(),t=void 0)})},removeTick(){t=void 0}}}const QN={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},XN=["before-show","show","before-hide","hide"];function JN({showing:t,canShow:e,hideOnRouteChange:n,handleShow:r,handleHide:s,processOnMount:i}){const o=Ge(),{props:a,emit:l,proxy:u}=o;let c;function h(y){t.value===!0?m(y):d(y)}function d(y){if(a.disable===!0||y!==void 0&&y.qAnchorHandled===!0||e!==void 0&&e(y)!==!0)return;const _=a["onUpdate:modelValue"]!==void 0;_===!0&&(l("update:modelValue",!0),c=y,vt(()=>{c===y&&(c=void 0)})),(a.modelValue===null||_===!1)&&f(y)}function f(y){t.value!==!0&&(t.value=!0,l("before-show",y),r!==void 0?r(y):l("show",y))}function m(y){if(a.disable===!0)return;const _=a["onUpdate:modelValue"]!==void 0;_===!0&&(l("update:modelValue",!1),c=y,vt(()=>{c===y&&(c=void 0)})),(a.modelValue===null||_===!1)&&b(y)}function b(y){t.value!==!1&&(t.value=!1,l("before-hide",y),s!==void 0?s(y):l("hide",y))}function p(y){a.disable===!0&&y===!0?a["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):y===!0!==t.value&&(y===!0?f:b)(c)}Le(()=>a.modelValue,p),n!==void 0&&y_(o)===!0&&Le(()=>u.$route.fullPath,()=>{n.value===!0&&t.value===!0&&m()}),i===!0&&So(()=>{p(a.modelValue)});const w={show:d,hide:m,toggle:h};return Object.assign(u,w),w}const ZN={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function VL(t,e){const n=ke(e.value);return Le(e,r=>{vt(()=>{n.value=r})}),{transition:x(()=>"q-transition--"+(n.value===!0?t.transitionHide:t.transitionShow)),transitionStyle:x(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}let qr=[],To=[];function E_(t){To=To.filter(e=>e!==t)}function eP(t){E_(t),To.push(t)}function Tp(t){E_(t),To.length===0&&qr.length>0&&(qr[qr.length-1](),qr=[])}function af(t){To.length===0?t():qr.push(t)}function tP(t){qr=qr.filter(e=>e!==t)}const Ua=[];function BL(t){return Ua.find(e=>e.__qPortalInnerRef.value!==null&&e.__qPortalInnerRef.value.contains(t))}function nP(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return Va(t)}else if(t.__qPortalInnerRef!==void 0){const n=Va(t);return n!==void 0&&n.$options.name==="QPopupProxy"?(t.hide(e),n):t}t=Va(t)}while(t!=null)}function $L(t,e,n){for(;n!==0&&t!==void 0&&t!==null;){if(t.__qPortalInnerRef!==void 0){if(n--,t.$options.name==="QMenu"){t=nP(t,e);continue}t.hide(e)}t=Va(t)}}function rP(t){for(t=t.parent;t!=null;){if(t.type.name==="QGlobalDialog")return!0;if(t.type.name==="QDialog"||t.type.name==="QMenu")return!1;t=t.parent}return!1}function sP(t,e,n,r){const s=ke(!1),i=ke(!1);let o=null;const a={},l=r===!0&&rP(t);function u(h){if(h===!0){Tp(a),i.value=!0;return}i.value=!1,s.value===!1&&(l===!1&&o===null&&(o=sf()),s.value=!0,Ua.push(t.proxy),eP(a))}function c(h){if(i.value=!1,h!==!0)return;Tp(a),s.value=!1;const d=Ua.indexOf(t.proxy);d>-1&&Ua.splice(d,1),o!==null&&(w_(o),o=null)}return Nl(()=>{c(!0)}),Object.assign(t.proxy,{__qPortalInnerRef:e}),{showPortal:u,hidePortal:c,portalIsActive:s,portalIsAccessible:i,renderPortal:()=>l===!0?n():s.value===!0?[A(yE,{to:o},n())]:void 0}}const iP=[null,document,document.body,document.scrollingElement,document.documentElement];function UL(t,e){let n=SN(e);if(n===void 0){if(t==null)return window;n=t.closest(".scroll,.scroll-y,.overflow-auto")}return iP.includes(n)?window:n}function oP(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function aP(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}let ga;function qL(){if(ga!==void 0)return ga;const t=document.createElement("p"),e=document.createElement("div");gh(t,{width:"100%",height:"200px"}),gh(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let r=t.offsetWidth;return n===r&&(r=e.clientWidth),e.remove(),ga=n-r,ga}function lP(t,e=!0){return!t||t.nodeType!==Node.ELEMENT_NODE?!1:e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"]))}let ki=0,ic,oc,Pi,ac=!1,Sp,kp,ks;function uP(t){cP(t)&&Ht(t)}function cP(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=bT(t),n=t.shiftKey&&!t.deltaX,r=!n&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),s=n||r?t.deltaY:t.deltaX;for(let i=0;i<e.length;i++){const o=e[i];if(lP(o,r))return r?s<0&&o.scrollTop===0?!0:s>0&&o.scrollTop+o.clientHeight===o.scrollHeight:s<0&&o.scrollLeft===0?!0:s>0&&o.scrollLeft+o.clientWidth===o.scrollWidth}return!0}function Cp(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function pa(t){ac!==!0&&(ac=!0,requestAnimationFrame(()=>{ac=!1;const{height:e}=t.target,{clientHeight:n,scrollTop:r}=document.scrollingElement;(Pi===void 0||e!==window.innerHeight)&&(Pi=n-e,document.scrollingElement.scrollTop=r),r>Pi&&(document.scrollingElement.scrollTop-=Math.ceil((r-Pi)/8))}))}function xp(t){const e=document.body,n=window.visualViewport!==void 0;if(t==="add"){const{overflowY:r,overflowX:s}=window.getComputedStyle(e);ic=aP(window),oc=oP(window),Sp=e.style.left,kp=e.style.top,e.style.left=`-${ic}px`,e.style.top=`-${oc}px`,s!=="hidden"&&(s==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,Xe.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",pa,Ot.passiveCapture),window.visualViewport.addEventListener("scroll",pa,Ot.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Cp,Ot.passiveCapture))}Xe.is.desktop===!0&&Xe.is.mac===!0&&window[`${t}EventListener`]("wheel",uP,Ot.notPassive),t==="remove"&&(Xe.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",pa,Ot.passiveCapture),window.visualViewport.removeEventListener("scroll",pa,Ot.passiveCapture)):window.removeEventListener("scroll",Cp,Ot.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=Sp,e.style.top=kp,window.scrollTo(ic,oc),Pi=void 0)}function hP(t){let e="add";if(t===!0){if(ki++,ks!==void 0){clearTimeout(ks),ks=void 0;return}if(ki>1)return}else{if(ki===0||(ki--,ki>0))return;if(e="remove",Xe.is.ios===!0&&Xe.is.nativeMobile===!0){clearTimeout(ks),ks=setTimeout(()=>{xp(e),ks=void 0},100);return}}xp(e)}function dP(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,hP(e))}}}const Gr=[];let ti;function fP(t){ti=t.keyCode===27}function mP(){ti===!0&&(ti=!1)}function gP(t){ti===!0&&(ti=!1,no(t,27)===!0&&Gr[Gr.length-1](t))}function T_(t){window[t]("keydown",fP),window[t]("blur",mP),window[t]("keyup",gP),ti=!1}function pP(t){Xe.is.desktop===!0&&(Gr.push(t),Gr.length===1&&T_("addEventListener"))}function Ap(t){const e=Gr.indexOf(t);e>-1&&(Gr.splice(e,1),Gr.length===0&&T_("removeEventListener"))}const Wr=[];function S_(t){Wr[Wr.length-1](t)}function vP(t){Xe.is.desktop===!0&&(Wr.push(t),Wr.length===1&&document.body.addEventListener("focusin",S_))}function Dp(t){const e=Wr.indexOf(t);e>-1&&(Wr.splice(e,1),Wr.length===0&&document.body.removeEventListener("focusin",S_))}let va=0;const yP={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Rp={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var wP=mt({name:"QDialog",inheritAttrs:!1,props:{...QN,...ZN,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:t=>t==="standard"||["top","bottom","left","right"].includes(t)}},emits:[...XN,"shake","click","escape-key"],setup(t,{slots:e,emit:n,attrs:r}){const s=Ge(),i=ke(null),o=ke(!1),a=ke(!1),l=ke(!1);let u,c=null,h,d;const f=x(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:m}=dP(),{registerTimeout:b,removeTimeout:p}=WN(),{registerTick:w,removeTick:y}=YN(),{showPortal:_,hidePortal:D,portalIsAccessible:M,renderPortal:I}=sP(s,i,ie,!0),{hide:E}=JN({showing:o,hideOnRouteChange:f,handleShow:X,handleHide:q,processOnMount:!0}),{addToHistory:S,removeFromHistory:O}=GN(o,E,f),F=x(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${yP[t.position]}`+(l.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),B=x(()=>"q-transition--"+(t.transitionShow===void 0?Rp[t.position][0]:t.transitionShow)),C=x(()=>"q-transition--"+(t.transitionHide===void 0?Rp[t.position][1]:t.transitionHide)),H=x(()=>a.value===!0?C.value:B.value),W=x(()=>`--q-transition-duration: ${t.transitionDuration}ms`),U=x(()=>o.value===!0&&t.seamless!==!0),se=x(()=>t.autoClose===!0?{onClick:N}:{}),R=x(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${U.value===!0?"modal":"seamless"}`,r.class]);Le(o,ne=>{vt(()=>{a.value=ne})}),Le(()=>t.maximized,ne=>{o.value===!0&&Nt(ne)}),Le(U,ne=>{m(ne),ne===!0?(vP(G),pP(Ue)):(Dp(G),Ap(Ue))});function X(ne){p(),y(),S(),c=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,Nt(t.maximized),_(),l.value=!0,t.noFocus!==!0&&(document.activeElement!==null&&document.activeElement.blur(),w(Ie)),b(()=>{if(s.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:Ee,bottom:ye}=document.activeElement.getBoundingClientRect(),{innerHeight:de}=window,g=window.visualViewport!==void 0?window.visualViewport.height:de;Ee>0&&ye>g/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-g,ye>=de?1/0:Math.ceil(document.scrollingElement.scrollTop+ye-g/2))),document.activeElement.scrollIntoView()}d=!0,i.value.click(),d=!1}_(!0),l.value=!1,n("show",ne)},t.transitionDuration)}function q(ne){p(),y(),O(),Ae(!0),l.value=!0,D(),c!==null&&(c.focus(),c=null),b(()=>{D(!0),l.value=!1,n("hide",ne)},t.transitionDuration)}function Ie(ne){af(()=>{let Ee=i.value;Ee===null||Ee.contains(document.activeElement)===!0||(Ee=Ee.querySelector(ne||"[autofocus], [data-autofocus]")||Ee,Ee.focus({preventScroll:!0}))})}function $e(){Ie(),n("shake");const ne=i.value;ne!==null&&(ne.classList.remove("q-animate--scale"),ne.classList.add("q-animate--scale"),clearTimeout(u),u=setTimeout(()=>{i.value!==null&&(ne.classList.remove("q-animate--scale"),Ie())},170))}function Ue(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&$e():(n("escape-key"),E()))}function Ae(ne){clearTimeout(u),(ne===!0||o.value===!0)&&(Nt(!1),t.seamless!==!0&&(m(!1),Dp(G),Ap(Ue))),ne!==!0&&(c=null)}function Nt(ne){ne===!0?h!==!0&&(va<1&&document.body.classList.add("q-body--dialog"),va++,h=!0):h===!0&&(va<2&&document.body.classList.remove("q-body--dialog"),va--,h=!1)}function N(ne){d!==!0&&(E(ne),n("click",ne))}function te(ne){t.persistent!==!0&&t.noBackdropDismiss!==!0?E(ne):t.noShake!==!0&&$e()}function G(ne){t.allowFocusOutside!==!0&&M.value===!0&&kN(i.value,ne.target)!==!0&&Ie('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:Ie,shake:$e,__updateRefocusTarget(ne){c=ne||null}}),cn(Ae);function ie(){return A("div",{...r,class:R.value},[A(Hs,{name:"q-transition--fade",appear:!0},()=>U.value===!0?A("div",{class:"q-dialog__backdrop fixed-full",style:W.value,"aria-hidden":"true",onMousedown:te}):null),A(Hs,{name:H.value,appear:!0},()=>o.value===!0?A("div",{ref:i,class:F.value,style:W.value,tabindex:-1,...se.value},nn(e.default)):null)])}return I}});const gs={dark:{type:Boolean,default:null}};function ps(t,e){return x(()=>t.dark===null?e.dark.isActive:t.dark)}var bP=mt({name:"QCard",props:{...gs,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:e}){const n=Ge(),r=ps(t,n.proxy.$q),s=x(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>A(t.tag,{class:s.value},nn(e.default))}}),Ci=mt({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:e}){const n=x(()=>`q-card__section q-card__section--${t.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>A(t.tag,{class:n.value},nn(e.default))}}),_P=mt({name:"QCardActions",props:{...p_,vertical:Boolean},setup(t,{slots:e}){const n=v_(t),r=x(()=>`q-card__actions ${n.value} q-card__actions--${t.vertical===!0?"vert column":"horiz row"}`);return()=>A("div",{class:r.value},nn(e.default))}});const IP={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},lc={xs:2,sm:4,md:8,lg:16,xl:24};var Op=mt({name:"QSeparator",props:{...gs,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const e=Ge(),n=ps(t,e.proxy.$q),r=x(()=>t.vertical===!0?"vertical":"horizontal"),s=x(()=>` q-separator--${r.value}`),i=x(()=>t.inset!==!1?`${s.value}-${IP[t.inset]}`:""),o=x(()=>`q-separator${s.value}${i.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(n.value===!0?" q-separator--dark":"")),a=x(()=>{const l={};if(t.size!==void 0&&(l[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const u=t.spaced===!0?`${lc.md}px`:t.spaced in lc?`${lc[t.spaced]}px`:t.spaced,c=t.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${c[0]}`]=l[`margin${c[1]}`]=u}return l});return()=>A("hr",{class:o.value,style:a.value,"aria-orientation":r.value})}});function EP({validate:t,resetValidation:e,requiresQForm:n}){const r=Wt(LT,!1);if(r!==!1){const{props:s,proxy:i}=Ge();Object.assign(i,{validate:t,resetValidation:e}),Le(()=>s.disable,o=>{o===!0?(typeof e=="function"&&e(),r.unbindComponent(i)):r.bindComponent(i)}),s.disable!==!0&&r.bindComponent(i),cn(()=>{s.disable!==!0&&r.unbindComponent(i)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Mp=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,Np=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Pp=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,ya=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,wa=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Lp={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>Mp.test(t),hexaColor:t=>Np.test(t),hexOrHexaColor:t=>Pp.test(t),rgbColor:t=>ya.test(t),rgbaColor:t=>wa.test(t),rgbOrRgbaColor:t=>ya.test(t)||wa.test(t),hexOrRgbColor:t=>Mp.test(t)||ya.test(t),hexaOrRgbaColor:t=>Np.test(t)||wa.test(t),anyColor:t=>Pp.test(t)||ya.test(t)||wa.test(t)},TP={...fi,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,thickness:{type:Number,default:.2,validator:t=>t>=0&&t<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},vh=50,k_=2*vh,C_=k_*Math.PI,SP=Math.round(C_*1e3)/1e3;mt({name:"QCircularProgress",props:{...TP,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=Ge(),r=mi(t),s=x(()=>{const d=(n.lang.rtl===!0?-1:1)*t.angle;return{transform:t.reverse!==(n.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-d}deg)`:`rotate3d(0, 0, 1, ${d-90}deg)`}}),i=x(()=>t.instantFeedback!==!0&&t.indeterminate!==!0?{transition:`stroke-dashoffset ${t.animationSpeed}ms ease 0s, stroke ${t.animationSpeed}ms ease`}:""),o=x(()=>k_/(1-t.thickness/2)),a=x(()=>`${o.value/2} ${o.value/2} ${o.value} ${o.value}`),l=x(()=>uk(t.value,t.min,t.max)),u=x(()=>C_*(1-(l.value-t.min)/(t.max-t.min))),c=x(()=>t.thickness/2*o.value);function h({thickness:d,offset:f,color:m,cls:b}){return A("circle",{class:"q-circular-progress__"+b+(m!==void 0?` text-${m}`:""),style:i.value,fill:"transparent",stroke:"currentColor","stroke-width":d,"stroke-dasharray":SP,"stroke-dashoffset":f,cx:o.value,cy:o.value,r:vh})}return()=>{const d=[];t.centerColor!==void 0&&t.centerColor!=="transparent"&&d.push(A("circle",{class:`q-circular-progress__center text-${t.centerColor}`,fill:"currentColor",r:vh-c.value/2,cx:o.value,cy:o.value})),t.trackColor!==void 0&&t.trackColor!=="transparent"&&d.push(h({cls:"track",thickness:c.value,offset:0,color:t.trackColor})),d.push(h({cls:"circle",thickness:c.value,offset:u.value,color:t.color}));const f=[A("svg",{class:"q-circular-progress__svg",style:s.value,viewBox:a.value,"aria-hidden":"true"},d)];return t.showValue===!0&&f.push(A("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:t.fontSize}},e.default!==void 0?e.default():[A("div",l.value)])),A("div",{class:`q-circular-progress q-circular-progress--${t.indeterminate===!0?"in":""}determinate`,style:r.value,role:"progressbar","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.indeterminate===!0?void 0:l.value},h_(e.internal,f))}}});const kP=["rejected"],CP=[...kP,"start","finish","added","removed"],xP=()=>!0;function AP(t){const e={};return t.forEach(n=>{e[n]=xP}),e}AP(CP);let uc,ba=0;const lt=new Array(256);for(let t=0;t<256;t++)lt[t]=(t+256).toString(16).substring(1);const DP=(()=>{const t=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const n=new Uint8Array(e);return t.getRandomValues(n),n}}return e=>{const n=[];for(let r=e;r>0;r--)n.push(Math.floor(Math.random()*256));return n}})(),Fp=4096;function RP(){(uc===void 0||ba+16>Fp)&&(ba=0,uc=DP(Fp));const t=Array.prototype.slice.call(uc,ba,ba+=16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,lt[t[0]]+lt[t[1]]+lt[t[2]]+lt[t[3]]+"-"+lt[t[4]]+lt[t[5]]+"-"+lt[t[6]]+lt[t[7]]+"-"+lt[t[8]]+lt[t[9]]+"-"+lt[t[10]]+lt[t[11]]+lt[t[12]]+lt[t[13]]+lt[t[14]]+lt[t[15]]}const OP=[!0,!1,"ondemand"],MP={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:t=>OP.includes(t)}};function NP(t,e){const{props:n,proxy:r}=Ge(),s=ke(!1),i=ke(null),o=ke(null);EP({validate:m,resetValidation:f});let a=0,l;const u=x(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length>0),c=x(()=>n.disable!==!0&&u.value===!0),h=x(()=>n.error===!0||s.value===!0),d=x(()=>typeof n.errorMessage=="string"&&n.errorMessage.length>0?n.errorMessage:i.value);Le(()=>n.modelValue,()=>{b()}),Le(()=>n.reactiveRules,w=>{w===!0?l===void 0&&(l=Le(()=>n.rules,()=>{b(!0)})):l!==void 0&&(l(),l=void 0)},{immediate:!0}),Le(t,w=>{w===!0?o.value===null&&(o.value=!1):o.value===!1&&(o.value=!0,c.value===!0&&n.lazyRules!=="ondemand"&&e.value===!1&&p())});function f(){a++,e.value=!1,o.value=null,s.value=!1,i.value=null,p.cancel()}function m(w=n.modelValue){if(c.value!==!0)return!0;const y=++a;e.value!==!0&&n.lazyRules!==!0&&(o.value=!0);const _=(M,I)=>{s.value!==M&&(s.value=M);const E=I||void 0;i.value!==E&&(i.value=E),e.value=!1},D=[];for(let M=0;M<n.rules.length;M++){const I=n.rules[M];let E;if(typeof I=="function"?E=I(w):typeof I=="string"&&Lp[I]!==void 0&&(E=Lp[I](w)),E===!1||typeof E=="string")return _(!0,E),!1;E!==!0&&E!==void 0&&D.push(E)}return D.length===0?(_(!1),!0):(e.value=!0,Promise.all(D).then(M=>{if(M===void 0||Array.isArray(M)===!1||M.length===0)return y===a&&_(!1),!0;const I=M.find(E=>E===!1||typeof E=="string");return y===a&&_(I!==void 0,I),I===void 0},M=>(y===a&&(console.error(M),_(!0)),!1)))}function b(w){c.value===!0&&n.lazyRules!=="ondemand"&&(o.value===!0||n.lazyRules!==!0&&w!==!0)&&p()}const p=ny(m,0);return cn(()=>{l!==void 0&&l(),p.cancel()}),Object.assign(r,{resetValidation:f,validate:m}),ko(r,"hasError",()=>h.value),{isDirtyModel:o,hasRules:u,hasError:h,errorMessage:d,validate:m,resetValidation:f}}const Vp=/^on[A-Z]/;function PP(t,e){const n={listeners:ke({}),attributes:ke({})};function r(){const s={},i={};for(const o in t)o!=="class"&&o!=="style"&&Vp.test(o)===!1&&(s[o]=t[o]);for(const o in e.props)Vp.test(o)===!0&&(i[o]=e.props[o]);n.attributes.value=s,n.listeners.value=i}return xv(r),r(),n}function yh(t){return t===void 0?`f_${RP()}`:t}function wh(t){return t!=null&&(""+t).length>0}const LP={...gs,...MP,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},FP=["update:modelValue","clear","focus","blur","popup-show","popup-hide"];function VP(){const{props:t,attrs:e,proxy:n,vnode:r}=Ge();return{isDark:ps(t,n.$q),editable:x(()=>t.disable!==!0&&t.readonly!==!0),innerLoading:ke(!1),focused:ke(!1),hasPopupOpen:!1,splitAttrs:PP(e,r),targetUid:ke(yh(t.for)),rootRef:ke(null),targetRef:ke(null),controlRef:ke(null)}}function BP(t){const{props:e,emit:n,slots:r,attrs:s,proxy:i}=Ge(),{$q:o}=i;let a;t.hasValue===void 0&&(t.hasValue=x(()=>wh(e.modelValue))),t.emitValue===void 0&&(t.emitValue=R=>{n("update:modelValue",R)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:O,onFocusout:F}),Object.assign(t,{clearValue:B,onControlFocusin:O,onControlFocusout:F,focus:E}),t.computedCounter===void 0&&(t.computedCounter=x(()=>{if(e.counter!==!1){const R=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,X=e.maxlength!==void 0?e.maxlength:e.maxValues;return R+(X!==void 0?" / "+X:"")}}));const{isDirtyModel:l,hasRules:u,hasError:c,errorMessage:h,resetValidation:d}=NP(t.focused,t.innerLoading),f=t.floatingLabel!==void 0?x(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):x(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),m=x(()=>e.bottomSlots===!0||e.hint!==void 0||u.value===!0||e.counter===!0||e.error!==null),b=x(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),p=x(()=>`q-field row no-wrap items-start q-field--${b.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(f.value===!0?" q-field--float":"")+(y.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&m.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),w=x(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(c.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length>0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),y=x(()=>e.labelSlot===!0||e.label!==void 0),_=x(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&c.value!==!0?` text-${e.labelColor}`:"")),D=x(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:f.value,modelValue:e.modelValue,emitValue:t.emitValue})),M=x(()=>{const R={for:t.targetUid.value};return e.disable===!0?R["aria-disabled"]="true":e.readonly===!0&&(R["aria-readonly"]="true"),R});Le(()=>e.for,R=>{t.targetUid.value=yh(R)});function I(){const R=document.activeElement;let X=t.targetRef!==void 0&&t.targetRef.value;X&&(R===null||R.id!==t.targetUid.value)&&(X.hasAttribute("tabindex")===!0||(X=X.querySelector("[tabindex]")),X&&X!==R&&X.focus({preventScroll:!0}))}function E(){af(I)}function S(){tP(I);const R=document.activeElement;R!==null&&t.rootRef.value.contains(R)&&R.blur()}function O(R){clearTimeout(a),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,n("focus",R))}function F(R,X){clearTimeout(a),a=setTimeout(()=>{document.hasFocus()===!0&&(t.hasPopupOpen===!0||t.controlRef===void 0||t.controlRef.value===null||t.controlRef.value.contains(document.activeElement)!==!1)||(t.focused.value===!0&&(t.focused.value=!1,n("blur",R)),X!==void 0&&X())})}function B(R){Ht(R),o.platform.is.mobile!==!0?(t.targetRef!==void 0&&t.targetRef.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),n("update:modelValue",null),n("clear",e.modelValue),vt(()=>{d(),o.platform.is.mobile!==!0&&(l.value=!1)})}function C(){const R=[];return r.prepend!==void 0&&R.push(A("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:ir},r.prepend())),R.push(A("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},H())),c.value===!0&&e.noErrorIcon===!1&&R.push(U("error",[A(jn,{name:o.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?R.push(U("inner-loading-append",r.loading!==void 0?r.loading():[A(Eo,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&R.push(U("inner-clearable-append",[A(jn,{class:"q-field__focusable-action",tag:"button",name:e.clearIcon||o.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:B})])),r.append!==void 0&&R.push(A("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:ir},r.append())),t.getInnerAppend!==void 0&&R.push(U("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&R.push(t.getControlChild()),R}function H(){const R=[];return e.prefix!==void 0&&e.prefix!==null&&R.push(A("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&R.push(t.getShadowControl()),t.getControl!==void 0?R.push(t.getControl()):r.rawControl!==void 0?R.push(r.rawControl()):r.control!==void 0&&R.push(A("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},r.control(D.value))),y.value===!0&&R.push(A("div",{class:_.value},nn(r.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&R.push(A("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),R.concat(nn(r.default))}function W(){let R,X;c.value===!0?h.value!==null?(R=[A("div",{role:"alert"},h.value)],X=`q--slot-error-${h.value}`):(R=nn(r.error),X="q--slot-error"):(e.hideHint!==!0||t.focused.value===!0)&&(e.hint!==void 0?(R=[A("div",e.hint)],X=`q--slot-hint-${e.hint}`):(R=nn(r.hint),X="q--slot-hint"));const q=e.counter===!0||r.counter!==void 0;if(e.hideBottomSpace===!0&&q===!1&&R===void 0)return;const Ie=A("div",{key:X,class:"q-field__messages col"},R);return A("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale")},[e.hideBottomSpace===!0?Ie:A(Hs,{name:"q-transition--field-message"},()=>Ie),q===!0?A("div",{class:"q-field__counter"},r.counter!==void 0?r.counter():t.computedCounter.value):null])}function U(R,X){return X===null?null:A("div",{key:R,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},X)}Object.assign(i,{focus:E,blur:S});let se=!1;return kv(()=>{se=!0}),Sv(()=>{se===!0&&e.autofocus===!0&&i.focus()}),So(()=>{$n.value===!0&&e.for===void 0&&(t.targetUid.value=yh()),e.autofocus===!0&&i.focus()}),cn(()=>{clearTimeout(a)}),function(){const X=t.getControl===void 0&&r.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...M.value}:M.value;return A("label",{ref:t.rootRef,class:[p.value,s.class],style:s.style,...X},[r.before!==void 0?A("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:ir},r.before()):null,A("div",{class:"q-field__inner relative-position col self-stretch"},[A("div",{ref:t.controlRef,class:w.value,tabindex:-1,...t.controlEvents},C()),m.value===!0?W():null]),r.after!==void 0?A("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:ir},r.after()):null])}}const Bp={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Tl={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},x_=Object.keys(Tl);x_.forEach(t=>{Tl[t].regex=new RegExp(Tl[t].pattern)});const $P=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+x_.join("")+"])|(.)","g"),$p=/[.*+?^${}()|[\]\\]/g,et=String.fromCharCode(1),UP={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function qP(t,e,n,r){let s,i,o,a;const l=ke(null),u=ke(h());function c(){return t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)}Le(()=>t.type+t.autogrow,f),Le(()=>t.mask,I=>{if(I!==void 0)m(u.value,!0);else{const E=D(u.value);f(),t.modelValue!==E&&e("update:modelValue",E)}}),Le(()=>t.fillMask+t.reverseFillMask,()=>{l.value===!0&&m(u.value,!0)}),Le(()=>t.unmaskedValue,()=>{l.value===!0&&m(u.value)});function h(){if(f(),l.value===!0){const I=y(D(t.modelValue));return t.fillMask!==!1?M(I):I}return t.modelValue}function d(I){if(I<s.length)return s.slice(-I);let E="",S=s;const O=S.indexOf(et);if(O>-1){for(let F=I-S.length;F>0;F--)E+=et;S=S.slice(0,O)+E+S.slice(O)}return S}function f(){if(l.value=t.mask!==void 0&&t.mask.length>0&&c(),l.value===!1){a=void 0,s="",i="";return}const I=Bp[t.mask]===void 0?t.mask:Bp[t.mask],E=typeof t.fillMask=="string"&&t.fillMask.length>0?t.fillMask.slice(0,1):"_",S=E.replace($p,"\\$&"),O=[],F=[],B=[];let C=t.reverseFillMask===!0,H="",W="";I.replace($P,(X,q,Ie,$e,Ue)=>{if($e!==void 0){const Ae=Tl[$e];B.push(Ae),W=Ae.negate,C===!0&&(F.push("(?:"+W+"+)?("+Ae.pattern+"+)?(?:"+W+"+)?("+Ae.pattern+"+)?"),C=!1),F.push("(?:"+W+"+)?("+Ae.pattern+")?")}else if(Ie!==void 0)H="\\"+(Ie==="\\"?"":Ie),B.push(Ie),O.push("([^"+H+"]+)?"+H+"?");else{const Ae=q!==void 0?q:Ue;H=Ae==="\\"?"\\\\\\\\":Ae.replace($p,"\\\\$&"),B.push(Ae),O.push("([^"+H+"]+)?"+H+"?")}});const U=new RegExp("^"+O.join("")+"("+(H===""?".":"[^"+H+"]")+"+)?$"),se=F.length-1,R=F.map((X,q)=>q===0&&t.reverseFillMask===!0?new RegExp("^"+S+"*"+X):q===se?new RegExp("^"+X+"("+(W===""?".":W)+"+)?"+(t.reverseFillMask===!0?"$":S+"*")):new RegExp("^"+X));o=B,a=X=>{const q=U.exec(X);q!==null&&(X=q.slice(1).join(""));const Ie=[],$e=R.length;for(let Ue=0,Ae=X;Ue<$e;Ue++){const Nt=R[Ue].exec(Ae);if(Nt===null)break;Ae=Ae.slice(Nt.shift().length),Ie.push(...Nt)}return Ie.length>0?Ie.join(""):X},s=B.map(X=>typeof X=="string"?X:et).join(""),i=s.split(et).join(E)}function m(I,E,S){const O=r.value,F=O.selectionEnd,B=O.value.length-F,C=D(I);E===!0&&f();const H=y(C),W=t.fillMask!==!1?M(H):H,U=u.value!==W;O.value!==W&&(O.value=W),U===!0&&(u.value=W),document.activeElement===O&&vt(()=>{if(W===i){const R=t.reverseFillMask===!0?i.length:0;O.setSelectionRange(R,R,"forward");return}if(S==="insertFromPaste"&&t.reverseFillMask!==!0){const R=F-1;p.right(O,R,R);return}if(["deleteContentBackward","deleteContentForward"].indexOf(S)>-1){const R=t.reverseFillMask===!0?F===0?W.length>H.length?1:0:Math.max(0,W.length-(W===i?0:Math.min(H.length,B)+1))+1:F;O.setSelectionRange(R,R,"forward");return}if(t.reverseFillMask===!0)if(U===!0){const R=Math.max(0,W.length-(W===i?0:Math.min(H.length,B+1)));R===1&&F===1?O.setSelectionRange(R,R,"forward"):p.rightReverse(O,R,R)}else{const R=W.length-B;O.setSelectionRange(R,R,"backward")}else if(U===!0){const R=Math.max(0,s.indexOf(et),Math.min(H.length,F)-1);p.right(O,R,R)}else{const R=F-1;p.right(O,R,R)}});const se=t.unmaskedValue===!0?D(W):W;String(t.modelValue)!==se&&n(se,!0)}function b(I,E,S){const O=y(D(I.value));E=Math.max(0,s.indexOf(et),Math.min(O.length,E)),I.setSelectionRange(E,S,"forward")}const p={left(I,E,S,O){const F=s.slice(E-1).indexOf(et)===-1;let B=Math.max(0,E-1);for(;B>=0;B--)if(s[B]===et){E=B,F===!0&&E++;break}if(B<0&&s[E]!==void 0&&s[E]!==et)return p.right(I,0,0);E>=0&&I.setSelectionRange(E,O===!0?S:E,"backward")},right(I,E,S,O){const F=I.value.length;let B=Math.min(F,S+1);for(;B<=F;B++)if(s[B]===et){S=B;break}else s[B-1]===et&&(S=B);if(B>F&&s[S-1]!==void 0&&s[S-1]!==et)return p.left(I,F,F);I.setSelectionRange(O?E:S,S,"forward")},leftReverse(I,E,S,O){const F=d(I.value.length);let B=Math.max(0,E-1);for(;B>=0;B--)if(F[B-1]===et){E=B;break}else if(F[B]===et&&(E=B,B===0))break;if(B<0&&F[E]!==void 0&&F[E]!==et)return p.rightReverse(I,0,0);E>=0&&I.setSelectionRange(E,O===!0?S:E,"backward")},rightReverse(I,E,S,O){const F=I.value.length,B=d(F),C=B.slice(0,S+1).indexOf(et)===-1;let H=Math.min(F,S+1);for(;H<=F;H++)if(B[H-1]===et){S=H,S>0&&C===!0&&S--;break}if(H>F&&B[S-1]!==void 0&&B[S-1]!==et)return p.leftReverse(I,F,F);I.setSelectionRange(O===!0?E:S,S,"forward")}};function w(I){if(iy(I)===!0)return;const E=r.value,S=E.selectionStart,O=E.selectionEnd;if(I.keyCode===37||I.keyCode===39){const F=p[(I.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];I.preventDefault(),F(E,S,O,I.shiftKey)}else I.keyCode===8&&t.reverseFillMask!==!0&&S===O?p.left(E,S,O,!0):I.keyCode===46&&t.reverseFillMask===!0&&S===O&&p.rightReverse(E,S,O,!0)}function y(I){if(I==null||I==="")return"";if(t.reverseFillMask===!0)return _(I);const E=o;let S=0,O="";for(let F=0;F<E.length;F++){const B=I[S],C=E[F];if(typeof C=="string")O+=C,B===C&&S++;else if(B!==void 0&&C.regex.test(B))O+=C.transform!==void 0?C.transform(B):B,S++;else return O}return O}function _(I){const E=o,S=s.indexOf(et);let O=I.length-1,F="";for(let B=E.length-1;B>=0&&O>-1;B--){const C=E[B];let H=I[O];if(typeof C=="string")F=C+F,H===C&&O--;else if(H!==void 0&&C.regex.test(H))do F=(C.transform!==void 0?C.transform(H):H)+F,O--,H=I[O];while(S===B&&H!==void 0&&C.regex.test(H));else return F}return F}function D(I){return typeof I!="string"||a===void 0?typeof I=="number"?a(""+I):I:a(I)}function M(I){return i.length-I.length<=0?I:t.reverseFillMask===!0&&I.length>0?i.slice(0,-I.length)+I:I+i.slice(I.length)}return{innerValue:u,hasMask:l,moveCursorForPaste:b,updateMaskValue:m,onMaskedKeydown:w}}const lf={name:String};function A_(t={}){return(e,n,r)=>{e[n](A("input",{class:"hidden"+(r||""),...t.value}))}}function jP(t){return x(()=>t.name||t.for)}function HP(t,e){function n(){const r=t.modelValue;try{const s="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(i=>{s.items.add(i)}),{files:s.files}}catch{return{files:void 0}}}return x(e===!0?()=>{if(t.type==="file")return n()}:n)}const zP=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,KP=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,GP=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,WP=/[a-z0-9_ -]$/i;function YP(t){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,t(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(Xe.is.firefox===!0?WP.test(n.data)===!1:zP.test(n.data)===!0||KP.test(n.data)===!0||GP.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}var QP=mt({name:"QInput",inheritAttrs:!1,props:{...LP,...UP,...lf,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...FP,"paste","change"],setup(t,{emit:e,attrs:n}){const r={};let s=NaN,i,o,a,l;const u=ke(null),c=jP(t),{innerValue:h,hasMask:d,moveCursorForPaste:f,updateMaskValue:m,onMaskedKeydown:b}=qP(t,e,C,u),p=HP(t,!0),w=x(()=>wh(h.value)),y=YP(B),_=VP(),D=x(()=>t.type==="textarea"||t.autogrow===!0),M=x(()=>D.value===!0||["text","search","url","tel","password"].includes(t.type)),I=x(()=>{const q={..._.splitAttrs.listeners.value,onInput:B,onPaste:F,onChange:W,onBlur:U,onFocus:Wa};return q.onCompositionstart=q.onCompositionupdate=q.onCompositionend=y,d.value===!0&&(q.onKeydown=b),t.autogrow===!0&&(q.onAnimationend=H),q}),E=x(()=>{const q={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:c.value,..._.splitAttrs.attributes.value,id:_.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return D.value===!1&&(q.type=t.type),t.autogrow===!0&&(q.rows=1),q});Le(()=>t.type,()=>{u.value&&(u.value.value=t.modelValue)}),Le(()=>t.modelValue,q=>{if(d.value===!0){if(o===!0&&(o=!1,String(q)===s))return;m(q)}else h.value!==q&&(h.value=q,t.type==="number"&&r.hasOwnProperty("value")===!0&&(i===!0?i=!1:delete r.value));t.autogrow===!0&&vt(H)}),Le(()=>t.autogrow,q=>{q===!0?vt(H):u.value!==null&&n.rows>0&&(u.value.style.height="auto")}),Le(()=>t.dense,()=>{t.autogrow===!0&&vt(H)});function S(){af(()=>{const q=document.activeElement;u.value!==null&&u.value!==q&&(q===null||q.id!==_.targetUid.value)&&u.value.focus({preventScroll:!0})})}function O(){u.value!==null&&u.value.select()}function F(q){if(d.value===!0&&t.reverseFillMask!==!0){const Ie=q.target;f(Ie,Ie.selectionStart,Ie.selectionEnd)}e("paste",q)}function B(q){if(!q||!q.target)return;if(t.type==="file"){e("update:modelValue",q.target.files);return}const Ie=q.target.value;if(q.target.qComposing===!0){r.value=Ie;return}if(d.value===!0)m(Ie,!1,q.inputType);else if(C(Ie),M.value===!0&&q.target===document.activeElement){const{selectionStart:$e,selectionEnd:Ue}=q.target;$e!==void 0&&Ue!==void 0&&vt(()=>{q.target===document.activeElement&&Ie.indexOf(q.target.value)===0&&q.target.setSelectionRange($e,Ue)})}t.autogrow===!0&&H()}function C(q,Ie){l=()=>{t.type!=="number"&&r.hasOwnProperty("value")===!0&&delete r.value,t.modelValue!==q&&s!==q&&(s=q,Ie===!0&&(o=!0),e("update:modelValue",q),vt(()=>{s===q&&(s=NaN)})),l=void 0},t.type==="number"&&(i=!0,r.value=q),t.debounce!==void 0?(clearTimeout(a),r.value=q,a=setTimeout(l,t.debounce)):l()}function H(){const q=u.value;if(q!==null){const Ie=q.parentNode.style,{overflow:$e}=q.style;Ie.marginBottom=q.scrollHeight-1+"px",q.style.height="1px",q.style.overflow="hidden",q.style.height=q.scrollHeight+"px",q.style.overflow=$e,Ie.marginBottom=""}}function W(q){y(q),clearTimeout(a),l!==void 0&&l(),e("change",q.target.value)}function U(q){q!==void 0&&Wa(q),clearTimeout(a),l!==void 0&&l(),i=!1,o=!1,delete r.value,t.type!=="file"&&setTimeout(()=>{u.value!==null&&(u.value.value=h.value!==void 0?h.value:"")})}function se(){return r.hasOwnProperty("value")===!0?r.value:h.value!==void 0?h.value:""}cn(()=>{U()}),So(()=>{t.autogrow===!0&&H()}),Object.assign(_,{innerValue:h,fieldClass:x(()=>`q-${D.value===!0?"textarea":"input"}`+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:x(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length>0),inputRef:u,emitValue:C,hasValue:w,floatingLabel:x(()=>w.value===!0||wh(t.displayValue)),getControl:()=>A(D.value===!0?"textarea":"input",{ref:u,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...E.value,...I.value,...t.type!=="file"?{value:se()}:p.value}),getShadowControl:()=>A("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(D.value===!0?"":" text-no-wrap")},[A("span",{class:"invisible"},se()),A("span",t.shadowText)])});const R=BP(_),X=Ge();return Object.assign(X.proxy,{focus:S,select:O,getNativeElement:()=>u.value}),R}});function D_(t,e){const n=ke(null),r=x(()=>t.disable===!0?null:A("span",{ref:n,class:"no-outline",tabindex:-1}));function s(i){const o=e.value;i!==void 0&&i.type.indexOf("key")===0?o!==null&&document.activeElement!==o&&o.contains(document.activeElement)===!0&&o.focus():n.value!==null&&(i===void 0||o!==null&&o.contains(i.target)===!0)&&n.value.focus()}return{refocusTargetEl:r,refocusTarget:s}}var R_={xs:30,sm:35,md:40,lg:50,xl:60};const XP=A("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24","aria-hidden":"true"},[A("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),A("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var JP=mt({name:"QRadio",props:{...gs,...fi,...lf,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(t,{slots:e,emit:n}){const{proxy:r}=Ge(),s=ps(t,r.$q),i=mi(t,R_),o=ke(null),{refocusTargetEl:a,refocusTarget:l}=D_(t,o),u=x(()=>pe(t.modelValue)===pe(t.val)),c=x(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(t.disable===!0?" disabled":"")+(s.value===!0?" q-radio--dark":"")+(t.dense===!0?" q-radio--dense":"")+(t.leftLabel===!0?" reverse":"")),h=x(()=>{const _=t.color!==void 0&&(t.keepColor===!0||u.value===!0)?` text-${t.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${_}`}),d=x(()=>(u.value===!0?t.checkedIcon:t.uncheckedIcon)||null),f=x(()=>t.disable===!0?-1:t.tabindex||0),m=x(()=>{const _={type:"radio"};return t.name!==void 0&&Object.assign(_,{"^checked":u.value===!0?"checked":void 0,name:t.name,value:t.val}),_}),b=A_(m);function p(_){_!==void 0&&(Ht(_),l(_)),t.disable!==!0&&u.value!==!0&&n("update:modelValue",t.val,_)}function w(_){(_.keyCode===13||_.keyCode===32)&&Ht(_)}function y(_){(_.keyCode===13||_.keyCode===32)&&p(_)}return Object.assign(r,{set:p}),()=>{const _=d.value!==null?[A("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[A(jn,{class:"q-radio__icon",name:d.value})])]:[XP];t.disable!==!0&&b(_,"unshift"," q-radio__native q-ma-none q-pa-none");const D=[A("div",{class:h.value,style:i.value},_)];a.value!==null&&D.push(a.value);const M=t.label!==void 0?Ur(e.default,[t.label]):nn(e.default);return M!==void 0&&D.push(A("div",{class:"q-radio__label q-anchor--skip"},M)),A("div",{ref:o,class:c.value,tabindex:f.value,role:"radio","aria-label":t.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:p,onKeydown:w,onKeyup:y},D)}}});const O_={...gs,...fi,...lf,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},M_=["update:modelValue"];function N_(t,e){const{props:n,slots:r,emit:s,proxy:i}=Ge(),{$q:o}=i,a=ps(n,o),l=ke(null),{refocusTargetEl:u,refocusTarget:c}=D_(n,l),h=mi(n,R_),d=x(()=>n.val!==void 0&&Array.isArray(n.modelValue)),f=x(()=>{const C=pe(n.val);return d.value===!0?n.modelValue.findIndex(H=>pe(H)===C):-1}),m=x(()=>d.value===!0?f.value>-1:pe(n.modelValue)===pe(n.trueValue)),b=x(()=>d.value===!0?f.value===-1:pe(n.modelValue)===pe(n.falseValue)),p=x(()=>m.value===!1&&b.value===!1),w=x(()=>n.disable===!0?-1:n.tabindex||0),y=x(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(n.disable===!0?" disabled":"")+(a.value===!0?` q-${t}--dark`:"")+(n.dense===!0?` q-${t}--dense`:"")+(n.leftLabel===!0?" reverse":"")),_=x(()=>{const C=m.value===!0?"truthy":b.value===!0?"falsy":"indet",H=n.color!==void 0&&(n.keepColor===!0||(t==="toggle"?m.value===!0:b.value!==!0))?` text-${n.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${C}${H}`}),D=x(()=>{const C={type:"checkbox"};return n.name!==void 0&&Object.assign(C,{"^checked":m.value===!0?"checked":void 0,name:n.name,value:d.value===!0?n.val:n.trueValue}),C}),M=A_(D),I=x(()=>{const C={tabindex:w.value,role:"checkbox","aria-label":n.label,"aria-checked":p.value===!0?"mixed":m.value===!0?"true":"false"};return n.disable===!0&&(C["aria-disabled"]="true"),C});function E(C){C!==void 0&&(Ht(C),c(C)),n.disable!==!0&&s("update:modelValue",S(),C)}function S(){if(d.value===!0){if(m.value===!0){const C=n.modelValue.slice();return C.splice(f.value,1),C}return n.modelValue.concat([n.val])}if(m.value===!0){if(n.toggleOrder!=="ft"||n.toggleIndeterminate===!1)return n.falseValue}else if(b.value===!0){if(n.toggleOrder==="ft"||n.toggleIndeterminate===!1)return n.trueValue}else return n.toggleOrder!=="ft"?n.trueValue:n.falseValue;return n.indeterminateValue}function O(C){(C.keyCode===13||C.keyCode===32)&&Ht(C)}function F(C){(C.keyCode===13||C.keyCode===32)&&E(C)}const B=e(m,p);return Object.assign(i,{toggle:E}),()=>{const C=B();n.disable!==!0&&M(C,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const H=[A("div",{class:_.value,style:h.value},C)];u.value!==null&&H.push(u.value);const W=n.label!==void 0?Ur(r.default,[n.label]):nn(r.default);return W!==void 0&&H.push(A("div",{class:`q-${t}__label q-anchor--skip`},W)),A("div",{ref:l,class:y.value,...I.value,onClick:E,onKeydown:O,onKeyup:F},H)}}const ZP=A("div",{key:"svg",class:"q-checkbox__bg absolute"},[A("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24","aria-hidden":"true"},[A("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),A("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var eL=mt({name:"QCheckbox",props:O_,emits:M_,setup(t){function e(n,r){const s=x(()=>(n.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>s.value!==null?[A("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[A(jn,{class:"q-checkbox__icon",name:s.value})])]:[ZP]}return N_("checkbox",e)}}),tL=mt({name:"QToggle",props:{...O_,icon:String,iconColor:String},emits:M_,setup(t){function e(n,r){const s=x(()=>(n.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),i=x(()=>n.value===!0?t.iconColor:null);return()=>[A("div",{class:"q-toggle__track"}),A("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},s.value!==void 0?[A(jn,{name:s.value,color:i.value})]:void 0)]}return N_("toggle",e)}});const P_={radio:JP,checkbox:eL,toggle:tL},nL=Object.keys(P_);var rL=mt({name:"QOptionGroup",props:{...gs,modelValue:{required:!0},options:{type:Array,validator:t=>t.every(e=>"value"in e&&"label"in e)},name:String,type:{default:"radio",validator:t=>nL.includes(t)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{emit:e,slots:n}){const{proxy:{$q:r}}=Ge(),s=Array.isArray(t.modelValue);t.type==="radio"?s===!0&&console.error("q-option-group: model should not be array"):s===!1&&console.error("q-option-group: model should be array in your case");const i=ps(t,r),o=x(()=>P_[t.type]),a=x(()=>"q-option-group q-gutter-x-sm"+(t.inline===!0?" q-option-group--inline":"")),l=x(()=>{const c={};return t.type==="radio"&&(c.role="radiogroup",t.disable===!0&&(c["aria-disabled"]="true")),c});function u(c){e("update:modelValue",c)}return()=>A("div",{class:a.value,...l.value},t.options.map((c,h)=>{const d=n["label-"+h]!==void 0?()=>n["label-"+h](c):n.label!==void 0?()=>n.label(c):void 0;return A("div",[A(o.value,{modelValue:t.modelValue,val:c.value,name:c.name===void 0?t.name:c.name,disable:t.disable||c.disable,label:d===void 0?c.label:null,leftLabel:c.leftLabel===void 0?t.leftLabel:c.leftLabel,color:c.color===void 0?t.color:c.color,checkedIcon:c.checkedIcon,uncheckedIcon:c.uncheckedIcon,dark:c.dark||i.value,size:c.size===void 0?t.size:c.size,dense:t.dense,keepColor:c.keepColor===void 0?t.keepColor:c.keepColor,"onUpdate:modelValue":u},d)])}))}}),sL=mt({name:"DialogPlugin",props:{...gs,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:t=>["ok","cancel","none"].includes(t)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:n}=Ge(),{$q:r}=n,s=ps(t,r),i=ke(null),o=ke(t.prompt!==void 0?t.prompt.model:t.options!==void 0?t.options.model:void 0),a=x(()=>"q-dialog-plugin"+(s.value===!0?" q-dialog-plugin--dark q-dark":"")+(t.progress!==!1?" q-dialog-plugin--progress":"")),l=x(()=>t.color||(s.value===!0?"amber":"primary")),u=x(()=>t.progress===!1?null:yn(t.progress)===!0?{component:t.progress.spinner||Eo,props:{color:t.progress.color||l.value}}:{component:Eo,props:{color:l.value}}),c=x(()=>t.prompt!==void 0||t.options!==void 0),h=x(()=>{if(c.value!==!0)return{};const{model:W,isValid:U,items:se,...R}=t.prompt!==void 0?t.prompt:t.options;return R}),d=x(()=>yn(t.ok)===!0||t.ok===!0?r.lang.label.ok:t.ok),f=x(()=>yn(t.cancel)===!0||t.cancel===!0?r.lang.label.cancel:t.cancel),m=x(()=>t.prompt!==void 0?t.prompt.isValid!==void 0&&t.prompt.isValid(o.value)!==!0:t.options!==void 0?t.options.isValid!==void 0&&t.options.isValid(o.value)!==!0:!1),b=x(()=>({color:l.value,label:d.value,ripple:!1,disable:m.value,...yn(t.ok)===!0?t.ok:{flat:!0},"data-autofocus":t.focus==="ok"&&c.value!==!0||void 0,onClick:_})),p=x(()=>({color:l.value,label:f.value,ripple:!1,...yn(t.cancel)===!0?t.cancel:{flat:!0},"data-autofocus":t.focus==="cancel"&&c.value!==!0||void 0,onClick:D}));Le(()=>t.prompt&&t.prompt.model,I),Le(()=>t.options&&t.options.model,I);function w(){i.value.show()}function y(){i.value.hide()}function _(){e("ok",pe(o.value)),y()}function D(){y()}function M(){e("hide")}function I(W){o.value=W}function E(W){m.value!==!0&&t.prompt.type!=="textarea"&&no(W,13)===!0&&_()}function S(W,U){return t.html===!0?A(Ci,{class:W,innerHTML:U}):A(Ci,{class:W},()=>U)}function O(){return[A(QP,{modelValue:o.value,...h.value,color:l.value,dense:!0,autofocus:!0,dark:s.value,"onUpdate:modelValue":I,onKeyup:E})]}function F(){return[A(rL,{modelValue:o.value,...h.value,color:l.value,options:t.options.items,dark:s.value,"onUpdate:modelValue":I})]}function B(){const W=[];return t.cancel&&W.push(A(ph,p.value)),t.ok&&W.push(A(ph,b.value)),A(_P,{class:t.stackButtons===!0?"items-end":"",vertical:t.stackButtons,align:"right"},()=>W)}function C(){const W=[];return t.title&&W.push(S("q-dialog__title",t.title)),t.progress!==!1&&W.push(A(Ci,{class:"q-dialog__progress"},()=>A(u.value.component,u.value.props))),t.message&&W.push(S("q-dialog__message",t.message)),t.prompt!==void 0?W.push(A(Ci,{class:"scroll q-dialog-plugin__form"},O)):t.options!==void 0&&W.push(A(Op,{dark:s.value}),A(Ci,{class:"scroll q-dialog-plugin__form"},F),A(Op,{dark:s.value})),(t.ok||t.cancel)&&W.push(B()),W}function H(){return[A(bP,{class:[a.value,t.cardClass],style:t.cardStyle,dark:s.value},C)]}return Object.assign(n,{show:w,hide:y}),()=>A(wP,{ref:i,onHide:M},H)}});function L_(t,e){for(const n in e)n!=="spinner"&&Object(e[n])===e[n]?(t[n]=Object(t[n])!==t[n]?{}:{...t[n]},L_(t[n],e[n])):t[n]=e[n]}function iL(t,e,n){return r=>{let s,i;const o=e===!0&&r.component!==void 0;if(o===!0){const{component:y,componentProps:_}=r;s=typeof y=="string"?n.component(y):y,i=_||{}}else{const{class:y,style:_,...D}=r;s=t,i=D,y!==void 0&&(D.cardClass=y),_!==void 0&&(D.cardStyle=_)}let a,l=!1;const u=ke(null),c=sf(),h=y=>{if(u.value!==null&&u.value[y]!==void 0){u.value[y]();return}const _=a.$.subTree;if(_&&_.component){if(_.component.proxy&&_.component.proxy[y]){_.component.proxy[y]();return}if(_.component.subTree&&_.component.subTree.component&&_.component.subTree.component.proxy&&_.component.subTree.component.proxy[y]){_.component.subTree.component.proxy[y]();return}}console.error("[Quasar] Incorrectly defined Dialog component")},d=[],f=[],m={onOk(y){return d.push(y),m},onCancel(y){return f.push(y),m},onDismiss(y){return d.push(y),f.push(y),m},hide(){return h("hide"),m},update(y){if(a!==null){if(o===!0)Object.assign(i,y);else{const{class:_,style:D,...M}=y;_!==void 0&&(M.cardClass=_),D!==void 0&&(M.cardStyle=D),L_(i,M)}a.$forceUpdate()}return m}},b=y=>{l=!0,d.forEach(_=>{_(y)})},p=()=>{w.unmount(c),w_(c),w=null,a=null,l!==!0&&f.forEach(y=>{y()})};let w=ly({name:"QGlobalDialog",setup:()=>()=>A(s,{...i,ref:u,onOk:b,onHide:p,onVnodeMounted(...y){typeof i.onVnodeMounted=="function"&&i.onVnodeMounted(...y),vt(()=>h("show"))}})},n);return a=w.mount(c),m}}var oL={install({$q:t,parentApp:e}){t.dialog=iL(sL,!0,e),this.__installed!==!0&&(this.create=t.dialog)}},aL={config:{},plugins:{Meta:fN,Notify:KN,Dialog:oL}};async function lL({app:t,router:e,store:n}){t.use(e),t.mount("#q-app")}oN(ey,aL).then(lL);export{yr as $,wL as A,Fh as B,lp as C,tS as D,$v as E,qv as F,PI as G,Hv as H,kt as I,Ps as J,IN as K,hL as L,Jt as M,Op as N,IE as O,QI as P,jn as Q,xN as R,ph as S,Ot as T,LL as U,bL as V,UL as W,oP as X,aP as Y,qL as Z,HT as _,So as a,BP as a$,Nl as a0,uL as a1,gs as a2,ps as a3,Tc as a4,VN as a5,Wa as a6,mN as a7,BL as a8,$L as a9,Ci as aA,fL as aB,PL as aC,hp as aD,eS as aE,RL as aF,xL as aG,kL as aH,iN as aI,AL as aJ,ap as aK,NL as aL,CL as aM,DL as aN,He as aO,OL as aP,ML as aQ,y_ as aR,zI as aS,Sc as aT,fi as aU,mi as aV,FL as aW,h_ as aX,ny as aY,LP as aZ,FP as a_,ir as aa,_T as ab,IT as ac,Ua as ad,Xe as ae,QN as af,ZN as ag,XN as ah,VL as ai,JN as aj,sP as ak,vP as al,wT as am,Dp as an,Ap as ao,nP as ap,Hs as aq,af as ar,pP as as,kN as at,EL as au,QP as av,tL as aw,LT as ax,PT as ay,bP as az,no as b,VP as b0,lf as b1,jP as b2,wh as b3,Du as b4,xv as b5,Av as b6,YP as b7,SL as b8,wP as b9,IL as ba,ay as bb,yn as bc,pL as bd,eL as be,ko as bf,vL as bg,yL as bh,GN as bi,uk as bj,dP as bk,cL as bl,EE as bm,Fk as bn,gL as bo,_P as bp,mL as bq,PP as br,c_ as bs,dL as bt,TL as bu,x as c,Ht as d,Ur as e,mt as f,Ge as g,A as h,Wt as i,NN as j,Le as k,YN as l,WN as m,to as n,cn as o,kv as p,Sv as q,ke as r,iy as s,_L as t,MN as u,nn as v,Dv as w,vt as x,Ia as y,$n as z};
